(self.webpackChunkcvdesignr=self.webpackChunkcvdesignr||[]).push([[6316],{69570:(e,t,n)=>{(function(){n(68309),n(19601),n(74916),n(23123);var t=function(e){return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n     viewBox="0 0 520.1 370.1" enable-background="new 0 0 520.1 370.1" xml:space="preserve">    <defs>            <linearGradient id="gradient-payment-'+e+'" x1="0%" y1="50%" x2="50%" y2="100%">              <stop offset="0%" stop-color="#ea4f96"/>              <stop offset="100%" stop-color="#2BABE2"/>            </linearGradient>          </defs>  <path id="strokeLarge" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M426,295.5H104.9c-6.9,0-12.6-5.7-12.6-12.6v-192c0-6.9,5.7-12.6,12.6-12.6H426c6.9,0,12.6,5.7,12.6,12.6v192C438.6,289.8,432.9,295.5,426,295.5z"/>  <rect class="rectSmall" x="340.6" y="100.3" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="57" height="37"/>  <path class="lineBig" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M370.7,119.5c-0.4,6-5.3,10.8-11.4,10.8c-6.3,0-11.5-5.1-11.5-11.5c0-6.3,5.1-11.5,11.5-11.5c6.1,0,11.2,4.8,11.5,10.9C370.7,118.3,370.7,119.5,370.7,119.5z"/>  <path class="lineBig" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M372.1,130.3h14.1v0c2.8-0.2,5.1-2.7,5.1-5.7c0-3.1-2.2-5.5-5.1-5.7v0c3-0.1,5.3-2.7,5.3-5.8c0-3.1-2.4-5.7-5.3-5.8v0h-14.1C372.1,107.3,372,130.2,372.1,130.3z"/>  <path class="rectSmall" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M183.6,184.7h-48.7c-2.8,0-5-2.3-5-5v-32c0-2.8,2.3-5,5-5h48.7c2.8,0,5,2.3,5,5v32C188.6,182.4,186.3,184.7,183.6,184.7z"/>  <rect class="rect" x="201.2" y="115.3" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="122.3" height="22"/>  <rect class="rect" x="129.2" y="246.3" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="208.7" height="22"/>  <rect class="rectSmall" x="129.9" y="207.7" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="44.7" height="18"/>  <rect class="rectSmall" x="184.9" y="207.7" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="44.7" height="18"/>  <rect class="rectSmall" x="239.9" y="207.7" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="44.7" height="18"/>  <rect class="rectSmall" x="294.9" y="207.7" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3"        stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" width="44.7" height="18"/>  <path class="puce" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M145.1,142.9c1.8,1.7,2.8,4.1,2.8,6.7c0,2.8-1.2,5.3-3.2,7l0,0c2,1.7,3.2,4.2,3.2,7c0,2.8-1.2,5.3-3.1,7l0,0.1c1.9,1.7,3.1,4.2,3.1,6.9c0,2.8-1.3,5.4-3.3,7.1"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="144.8" y1="156.6" x2="130" y2="156.6"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="144.8" y1="170.6" x2="130" y2="170.6"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="175.1" y1="170.9" x2="188.5" y2="170.9"/>  <path class="puce" fill="none" stroke="url(#gradient-payment-'+e+')" stroke-width="3" stroke-linecap="round"        stroke-linejoin="round" stroke-miterlimit="10" d="M174.7,184.7c-1.8-1.7-2.8-4.1-2.8-6.7c0-2.8,1.2-5.3,3.2-7l0,0c-2-1.7-3.2-4.2-3.2-7c0-2.8,1.2-5.3,3.1-7l0.1,0h13.5"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="153.2" y1="148.5" x2="165.1" y2="148.5"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="153.2" y1="179" x2="165.1" y2="179"/>  <line class="line" fill="none" stroke="#EA4F96" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"        stroke-miterlimit="10" x1="386.1" y1="118.8" x2="359.8" y2="118.8"/></svg>'},r=function(e,n){var r=!1;if(n.initialValues&&n.initialValues.address){var o=n.initialValues.address;o.address1&&o.postalCode&&o.countryCode&&o.city&&(r=!0)}var i=n.initialValues&&n.initialValues.address?n.initialValues.address:{},a=("undefined"!=typeof orderModalOptions&&orderModalOptions.basketBefore?orderModalOptions.basketBefore:"")+'<div class="basket-payout">\n    <div class="basket-payout__information '+n.classnames.information+' shadow-card">\n        <h2>'+intl("basket.payout.details")+'</h2>\n        <div class="basket-payout__information__summary">\n            '+n.html.basketSummary+"\n"+("undefined"!=typeof orderModalOptions&&orderModalOptions.basketSummaryAfter?orderModalOptions.basketSummaryAfter:"")+'        </div>\n    </div>\n    <div class="basket-payout__form">\n        <div id="'+e+'-loading-payment" class="loading-payment" style="display: none">\n            <div class="loading-card-loader">\n                '+t(e)+'\n            </div>\n            <div class="loading-payment-line status">\n            </div>\n        </div>\n\n        <form action="" method="post" id="'+e+'-payment-form">\n            '+n.html.customFieldsBefore+'\n            <div class="form__group">\n                <div class="form__group__title form__group__title--darkblue">\n                    '+intl("basket.payout.fields.name")+'\n                </div>\n                <div class="form__group__row">\n';for(var l in n.decomposeNameInputs?a+='                        <div class="form__group__row__col form__group__row__col--w50 pr5">\n                            <input type="text" name="billing-firstname" required\n                                   value="'+n.initialValues.firstname+'"\n                                   placeholder="'+intl("basket.payout.placeholders.firstname")+'"/>\n                        </div>\n                        <div class="form__group__row__col form__group__row__col--w50 pl5">\n                            <input type="text" name="billing-lastname" required\n                                   value="'+n.initialValues.lastname+'"\n                                   placeholder="'+intl("basket.payout.placeholders.lastname")+'"/>\n                        </div>\n':a+='                        <div class="form__group__row__col form__group__row__col--w70">\n                            <input type="text" name="billing-name" required\n                                   value="'+n.initialValues.name+'"\n                                   placeholder="'+intl("basket.payout.placeholders.name")+'"/>\n                        </div>\n',a+="                </div>\n            </div>\n\n",n.initialValues.email||(a+='            <div class="form__group">\n                    <div class="form__group__title form__group__title--darkblue">\n                        '+intl("basket.payout.fields.email")+'\n                    </div>\n                    <div class="form__group__row">\n                        <div class="form__group__row__col form__group__row__col--w70">\n                            <input type="email" name="email" required\n                                   placeholder="'+intl("basket.payout.placeholders.email")+'"/>\n                        </div>\n                    </div>\n            </div>\n'),a+='\n            <div class="form__group">\n                <div class="form__group__title form__group__title--darkblue">\n                    '+intl("basket.payout.fields.billingAddress")+"\n",r&&(a+=' <a href="javascript:;"\n                       onclick="$(\'#'+e+"-summary').addClass('hidden-element');$('.address-fields',this.parentNode.parentNode).removeClass('hidden-element');$(this).remove();$('#"+e+'-billingAddress1\').focus();">\n                            <span class="cvdr-icon">\n                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path\n                                            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path\n                                            d="M0 0h24v24H0z" fill="none"/></svg>\n                                </span>\n</a>\n'),a+='                </div>\n                <div class="form__group__row '+(r?"":"hidden-element")+'" id="'+e+'-summary">\n                    <p>\n                        '+(i.address1||"")+"<br/>\n                        "+(i.postalCode||"")+" "+(i.city||"")+"<br/>\n                        "+intl("countries."+i.countryCode)+'\n                    </p>\n                </div>\n                <div class="form__group__row '+(r?"hidden-element":"")+' address-fields">\n                    <div class="form__group__row__col">\n                        <input type="text" id="'+e+'-billingAddress1" name="billing-address"\n                               value="'+(i.address1?i.address1:"")+'" required\n                               placeholder="'+intl("basket.payout.placeholders.billingAddress")+'"/>\n                    </div>\n                </div>\n                <div class="form__group__row mt5 '+(r?"hidden-element":"")+' address-fields">\n                    <div class="form__group__row__col form__group__row__col--w50 pr5">\n                        <input type="text" name="billing-zip" value="'+(i.postalCode?i.postalCode:"")+'" required\n                               placeholder="'+intl("basket.payout.placeholders.billingPostalCode")+'"/>\n                    </div>\n                    <div class="form__group__row__col form__group__row__col--w50 pl5">\n                        <input type="text" name="billing-city" value="'+(i.city?i.city:"")+'" required\n                               placeholder="'+intl("basket.payout.placeholders.billingCity")+'"/>\n                    </div>\n                </div>\n                <div class="form__group__row mt10 '+(r?"hidden-element":"")+' address-fields">\n                    <div class="form__group__row__col form__group__row__col--w70">\n                        <div class="select-container">\n                            <select name="billing-country" required>\n                                <option value="">'+intl("basket.payout.placeholders.billingCountry")+"</option>\n",LIST_COUNTRIES){var s=LIST_COUNTRIES[l],d=lang.split("_")[1];a+="<option\n"+(i.countryCode==l||d==l?"selected":"")+'\nvalue="'+l+'">'+s+"</option>\n"}for(var c in a+='                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form__group">\n                <div class="form__group__title form__group__title--darkblue">\n                    '+intl("basket.payout.fields.paymentMethod")+'\n                </div>\n                <div class="form__group__row">\n                    <div class="form__group__row__col">\n\n                        <nav class="payment-methods">\n                            <ul>\n',LOCALIZED_PAYMENTS){LOCALIZED_PAYMENTS[c]&&(c==PAYMENT_METHOD.CARD?a+='<li class="visible choosed" data-payment="card"\n          data-open="'+e+'__card">\n          <div>'+intl("basket.payout.source.bankCard")+"</div>\n</li>\n":c==PAYMENT_METHOD.SOFORT?a+='<li class="visible" data-payment="sofort"\n          data-open="'+e+'__redirect">\n          <div>'+intl("basket.payout.source.sofort")+"</div>\n</li>\n":c==PAYMENT_METHOD.BANCONTACT?a+='<li class="visible" data-payment="bancontact"\n          data-open="'+e+'__redirect">\n          <div>'+intl("basket.payout.source.bancontact")+"</div>\n</li>\n":c==PAYMENT_METHOD.IDEAL&&(a+='<li class="visible" data-payment="ideal"\n          data-open="'+e+'__ideal">\n          <div>'+intl("basket.payout.source.ideal")+"</div>\n</li>\n"))}return a+='                            </ul>\n                        </nav>\n                        <div class="payment-source-loading"><svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\n  <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>\n  <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z">\n    <animateTransform attributeType="xml"\n      attributeName="transform"\n      type="rotate"\n      from="0 20 20"\n      to="360 20 20"\n      dur="0.5s"\n      repeatCount="indefinite"/>\n    </path>\n  </svg>                        </div>                        <div class="payment-info" id="'+e+'__card">\n                            <div class="source"></div>\n                            <div class="error" role="alert"></div>\n                        </div>\n                        <div class="payment-info" id="'+e+'__ideal" style="display: none">\n                            <div class="source"></div>\n                            <div class="error" role="alert"></div>\n                        </div>\n                        <div class="payment-info" id="'+e+'__redirect" style="display: none">\n                            <p class="notice source">'+intl("basket.payout.redirectionFlowNotice")+'</p>\n                        </div>\n\n                    </div>\n                </div>\n                <div class="form__group__row mt15">\n                    <div class="form__group__row__col">\n                        <p>\n                                <span class="cvdr-icon"><svg xmlns="http://www.w3.org/2000/svg"\n                                                             xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"\n                                                             x="0px" y="0px" viewBox="0 0 100 125"\n                                                             enable-background="new 0 0 100 100" xml:space="preserve"><g><path\n                                                d="M73.548,45.661V31.784c0.019-1,0-2.024,0-2.944C73.548,15.834,63.005,5.292,50,5.292S26.45,15.834,26.45,28.84   c-0.024,1.171,0,2.008,0,2.944v13.876h-7.849V95h62.797V45.661H73.548z M67.941,31.503v14.158H32.059V31.503   c0-0.712-0.022-1.349,0-2.242c0-9.909,8.033-17.942,17.941-17.942s17.941,8.034,17.941,17.942   C67.941,29.961,67.958,30.741,67.941,31.503z" fill="#5C5C5C"/></g></svg></span>\n                            '+intl("basket.payout.reinsurance")+'\n                        </p>\n                    </div>\n                </div>\n                <div class="form__group__row mt5">\n                    <div class="form__group__row__col">\n                        <label class="form-checkbox">\n                            <input type="checkbox" name="terms" required value="1"/>\n                            <span class="form-checkbox__label">'+n.html.termsWording+'</span>\n                            <span class="form-checkbox__checkmark"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n\n            '+n.html.customFieldsAfter+'\n\n            <div class="form-group">\n                <div class="group-row">\n                    <div class="form__group__row__col align-center">\n                        <button type="submit" class="cta-btn cta-btn--pink cta-btn--highlight-effect1 cta-btn--hover-effect2">\n                                <span class="cta-btn__text">\n                                    '+n.html.buyWording+"\n                                </span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n"},o=function(e,t,n,o,i,a,l,s,d,c,u){var p;this.modalID=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(10);var m=this,f=function(){var n=$(".swal2-container");$(".swal2-popup input").change((function(){$(this).removeClass("warning")})),n.bind("touchstart mousedown",(function(e){e.stopPropagation()})),(p=new Order(Object.assign(e,{formSelector:"#"+m.modalID+"-payment-form",loadingSelector:"#"+m.modalID+"-loading-payment",initialSource:{type:"card",selector:"#"+m.modalID+"__card"}}),(function(){var e;$('*[type="submit"]',this.$getForm()).prop("disabled",!0),$('*[type="submit"]',this.$getForm()).addClass("loading"),$(".swal2-close",n).hide(),e=this.$getForm(),u&&u(e,m)}),(function(){var e;$('*[type="submit"]',this.$getForm()).prop("disabled",!1),$('*[type="submit"]',this.$getForm()).removeClass("loading"),$(".swal2-close",n).show(),this.$getForm()[0].reset(),Swal.fire({type:"success",title:a.title,html:a.text,showCloseButton:!1,showCancelButton:!1,allowOutsideClick:!1,customClass:{popup:"swal2-popup--feedback",confirmButton:"cta-btn cta-btn--green cta-btn--hover-effect1"},preConfirm:s||null,onAfterClose:d||null,buttonsStyling:!1,focusConfirm:!1,confirmButtonText:'<span class="cta-btn__text">'+a.btnLabel+"</span>"}),e=this.$getForm(),l&&l(e,m)}),(function(e,t,r,o){if(o?($('*[type="submit"]',this.$getForm()).hide(),$(".form__group",this.$getForm()).hide()):($('*[type="submit"]',this.$getForm()).prop("disabled",!1),$('*[type="submit"]',this.$getForm()).removeClass("loading")),$(".swal2-close",n).show(),handleFormMessage(this.$getForm(),e,"danger"),r)for(var a in r)$('*[name="'+a+'"]',this.$getForm()).addClass("warning");!function(e,t,n,r,o){i&&i(e,t,n,r,o)}(this.$getForm(),e,t,r,o)}),(function(){}))).submitOrderDataLoader=t,p.bindSourceDOM(),p.bindFormSubmitListener(),p.bindFormPaymentMethodTabs(),o&&o(n),"undefined"!=typeof orderModalOptions&&orderModalOptions.onOpen&&orderModalOptions.onOpen()},_=function(){c&&c(),"undefined"!=typeof orderModalOptions&&orderModalOptions.onClose&&orderModalOptions.onClose()};this.getOrder=function(){return p||null},this.open=function(){Swal.fire({type:null,title:"undefined"!=typeof orderModalOptions&&orderModalOptions.basketTitle?orderModalOptions.basketTitle:null,html:r(m.modalID,n),showCloseButton:!0,showConfirmButton:!1,allowOutsideClick:!1,customClass:{container:"undefined"!=typeof orderModalOptions&&orderModalOptions.basketContainerClassname?orderModalOptions.basketContainerClassname:"",popup:"basket-payout-popup content-full shadow-card "+("undefined"!=typeof orderModalOptions&&orderModalOptions.basketPopupClassname?orderModalOptions.basketPopupClassname:""),title:"undefined"!=typeof orderModalOptions&&orderModalOptions.basketTitleClassname?orderModalOptions.basketTitleClassname:""},onOpen:f,onClose:_||null})}};window.loadingHTML=t,window.formTemplate=r,window.OrderModal=o,e.exports={loadingHTML:t,formTemplate:r,OrderModal:o}}).call(window)},53906:(e,t,n)=>{(function(){n(82772),n(21249),n(85827),n(68309),n(19601),n(41539),n(88674),n(74916),n(15306),n(64765),n(23123);var t=t||null;if(t||window.Stripe)t=window.Stripe(window.stripe_key);else{var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("src","https://js.stripe.com/v3/"),o.setAttribute("type","text/javascript"),o.setAttribute("async","false"),o.onload=function(){t=window.Stripe(window.stripe_key)},r.appendChild(o)}var i=function(e,n,r,o,i){this.paidOrderStatus=1,this.validFinaleOrderStatus=[-6,-5,-4,-2,1],this.listenOrderRepeatDelay=1e3,this.listenOrderMaximumDelay=45e3;var l=e.pageData,s=e.orderTypeKey,d=e.formSelector,c=e.loadingSelector,u=e.initialSource.selector,p=e.initialSource.type,m={createOrder:e.urls.createOrder,submitOrder:e.urls.submitOrder,checkOrderStatus:e.urls.checkOrderStatus,cancelOrder:e.urls.cancelOrder},f={processingPayment:e.labels&&e.labels.processingPayment?e.labels.processingPayment:"order.create.processingPayment",errors:e.labels&&e.labels.errors?{paymentPopupClosed:e.labels.errors.paymentPopupClosed,paymentPopupOpenFail:e.labels.errors.paymentPopupOpenFail,stripeError:e.labels.errors.stripeError,paymentDelayExpired:e.labels.errors.paymentDelayExpired,paymentFailed:e.labels.errors.paymentFailed}:{stripeError:"order.create.stripe.errors.%code%",paymentPopupOpenFail:"order.create.paymentPopupOpenFail",paymentPopupClosed:"order.create.paymentPopupClosed",paymentDelayExpired:"order.create.paymentDelayExpired",paymentFailed:"order.create.paymentFailed"}},_=e.isSubscription||!1;this.submitOrderDataLoader=null,this.setOrderTypeKey=function(e){s=e},this.setPageData=function(e,t){l=t?Object.assign(l,e):e},this.getPageData=function(e){return e?l[e]:l};var h=this,y=null;this.setId=function(e){y=e},this.getId=function(){return y},this.setIsSubscription=function(e){_=e};var v=null;this.setPaymentIntentSecret=function(e){v=e},this.getPaymentIntentSecret=function(){return v};var g=null;this.setTotal=function(e){g=e},this.getTotal=function(){return g};var b=$(d);this.$getForm=function(){return b};var w=$(c),k=$(".status",w),O=t.elements(),C=null,x=null,S=!1,T=null,M=0;this.setSource=function(e,t){return C&&(C.destroy(),x=null,C=null,S=!1),p=e,u=t,this.bindSourceDOM()},this.bindSourceDOM=function(){var e=$(u),t=$(".source",e).get(0);return N(e),x=!_&&!("ideal"===p||"sofort"===p||"bancontact"===p),new Promise((function(n){h.createOrder().then((function(){switch(p){case"card":(C=O.create("card",{hidePostalCode:!0})).mount(t);var r=$(".error",e);S=!1,C.addEventListener("change",(function(e){e.error?r.text(e.error.message):r.text(""),S=e.complete}));break;case"ideal":(C=O.create("idealBank",{})).mount(t);r=$(".error",e);S=!1,C.addEventListener("change",(function(e){e.error?r.text(e.error.message):r.text(""),S=e.complete}));break;default:S=!0}C?C.on("ready",(function(){n(!0)})):n(!0)})).catch((function(e){A(e,[],1)}))})).then((function(){R(e)}))},this.destroy=function(){T&&(clearInterval(T),T=null),M=0,C&&(C.destroy(),x=null,C=null,S=!1),y=null,g=null,v=null;var e=b[0];e.removeEventListener("submit",j),e.reset(),I()};var F={},E=Promise.resolve(!0),P=function(e){!function(e){k.text()!==intl(e)&&k.text(intl(e))}(e),E=E.then((function(){return new Promise((function(e,t){b.hide(),w.show(),e(!0)}))}))},I=function(){E=E.then((function(){return new Promise((function(e,t){w.hide(),b.show(),e(!0)}))}))},A=function(e,t,n){var r,i=null;e.data&&(i=e.data);var a=null;e.fields_problems&&(a=e.fields_problems),e.raw?r=e.raw:"string"==typeof e?r=intl(e,t||{}):console.warn(e),I(),o.bind(h)(r,i,a,n)},D=function(){E=E.then((function(){return new Promise((function(e,t){w.hide("normal",(function(){b.hide("normal")}))}))}))},N=function(e){e.hide(),$(".payment-source-loading",b).addClass("visible")},R=function(e){e.show(),$(".payment-source-loading",b).removeClass("visible")},q=!1;this.bindFormPaymentMethodTabs=function(){$(".payment-methods li",b).click((function(){if(!q){q=!0;var e=$(this);if(!e.hasClass("choosed")&&e.data("payment")!==p){var t=$(".payment-methods li[data-payment="+p+"]",b);t.removeClass("choosed"),$("#"+t.data("open")).hide(),e.addClass("choosed");var n=$("#"+e.data("open"));n.show(),p=e.data("payment"),h.setSource(p,n[0]).then((function(){q=!1})).catch((function(){q=!1}))}}}))};var j=function(e){e.preventDefault();var o="string"==typeof u?$(u):u;if(x&&null!==h.getPaymentIntentSecret()||!x)if(!0===S){var i=this;n.bind(h)(e),P(f.processingPayment),-1===M?(M=0,B((function(){D(),r&&r.bind(h)()}),A,A)):L({"billing-firstname":i.querySelector("input[name=billing-firstname]")?i.querySelector("input[name=billing-firstname]").value:null,"billing-lastname":i.querySelector("input[name=billing-lastname]")?i.querySelector("input[name=billing-lastname]").value:null,"billing-name":i.querySelector("input[name=billing-name]")?i.querySelector("input[name=billing-name]").value:null,"billing-address":i.querySelector("input[name=billing-address]").value,"billing-zip":i.querySelector("input[name=billing-zip]").value,"billing-city":i.querySelector("input[name=billing-city]").value,"billing-country":i.querySelector("select[name=billing-country]").value,terms:$('input[name="terms"]',i).prop("checked"),email:$('input[name="email"]',i).val()}).then((function(e){if("function"==typeof FRONT_CATCHER&&FRONT_CATCHER("submitOrder response : "+JSON.stringify(e)),x)t.handleCardPayment(h.getPaymentIntentSecret(),C,{payment_method_data:{billing_details:e.billing_details}}).then((function(e){e.error&&e.error.type?h.cancelOrder(e.error.type).then((function(){A({raw:e.error.message})})):("function"==typeof FRONT_CATCHER&&FRONT_CATCHER("stripe.handleCardPayment : "+JSON.stringify(e)),B((function(){D(),r&&r.bind(h)()}),A,A))})).catch(A);else{var n={orderId:h.getId(),type:s,email:e.billing_details.email,name:e.billing_details.name,country:e.billing_details.address.country,total:h.getTotal()};h.setId(n.orderId),"function"==typeof FRONT_CATCHER&&FRONT_CATCHER("before createSource : "+JSON.stringify(n)),H(n).then((function(e){"function"==typeof FRONT_CATCHER&&FRONT_CATCHER("after createSource : "+JSON.stringify(e)),B((function(){D(),r&&r.bind(h)()}),A,A)})).catch(A)}})).catch((function(e){A(e)}))}else!1===S&&"card"==p&&$(".error",o).text(intl("order.create.stripe.errors.empty_card_informations"));else $(".error",o).text(intl("order.create.stripe.errors.intent_not_ready"))};this.bindFormSubmitListener=function(){b[0].addEventListener("submit",j,!1)};var H=function(e){return new Promise((function(n,r){var o={},i=null;if("card"===p)o={owner:{name:e.name,email:e.email},metadata:{orderType:e.type,orderId:e.orderId}};else{if(o={type:p,amount:e.total,currency:"eur",owner:{name:e.name,email:e.email},redirect:{return_url:window.location.href},statement_descriptor:"CVDesignR",metadata:{orderType:e.type,orderId:e.orderId}},"sofort"===p)o.sofort={country:e.country};switch(p){case"sofort":case"bancontact":i=t.createSource(o)}}null===i&&(i=t.createSource(C,o)),i.then((function(e){e.error?("function"==typeof FRONT_CATCHER&&FRONT_CATCHER("source creation err : "+JSON.stringify(e.error)),e.error.type&&"api_connection_error"===e.error.type?h.cancelOrder("api_connection_error").then((function(){r({raw:e.error.message})})):e.error.type&&"invalid_request_error"===e.error.type?h.cancelOrder("invalid_request_error").then((function(){r({raw:e.error.message})})):r(f.errors.stripeError.replace("%code%",e.error.code))):"redirect"===e.source.flow?new a(e.source.redirect.url,{},(function(e,t){h.cancelOrder("popupOpenFail").then((function(){r(f.errors.paymentPopupOpenFail)}))}),(function(t,o){t?t.popupClosed?h.cancelOrder("popupClosed").then((function(){r(f.errors.paymentPopupClosed)})):r({raw:t}):n($.extend(e,{popup:{res:o}}))})):n(e)})).catch((function(e){h.cancelOrder(e?JSON.stringify(e):"unknown_during_create").then((function(){})),"function"==typeof FRONT_CATCHER&&FRONT_CATCHER(JSON.stringify(e)),r(f.errors.stripeError.replace("%code%","unknown_during_source_create"))}))}))};this.createOrder=function(){return h.setId(null),h.setPaymentIntentSecret(null),h.setTotal(null),new Promise((function(e,t){var n=$.extend(l,{orderTypeKey:s,acceptsPaymentIntent:x?1:0});requestPOST(m.createOrder,(function(n){n.success?(n.data.order.payment_intent_secret&&h.setPaymentIntentSecret(n.data.order.payment_intent_secret),h.setTotal(n.data.order.total),h.setId(n.data.order.id),e(n.data)):n.data?t({raw:n.error,data:n.data,fields_problems:n.fields_problems}):t({raw:n.error,fields_problems:n.fields_problems})}),n)}))};var L=function(e){return new Promise((function(t,n){F=null===h.submitOrderDataLoader?{}:h.submitOrderDataLoader(b),e=$.extend(l,F,e,{id:h.getId(),orderTypeKey:s}),requestPOST(m.submitOrder,(function(e){e.success?t(e.data):e.data?n({raw:e.error,data:e.data,fields_problems:e.fields_problems}):n({raw:e.error,fields_problems:e.fields_problems})}),e)}))};this.cancelOrder=function(e){return new Promise((function(t,n){requestGET(m.cancelOrder+"?id="+h.getId()+(e?"&reason="+e:""),(function(e){h.createOrder().then((function(){t(e)}))}))}))};var B=function(e,t,n){T=setInterval((function(){if(M>=h.listenOrderMaximumDelay)return clearInterval(T),T=null,M=-1,void n(f.errors.paymentDelayExpired);var r=h.validFinaleOrderStatus,o=h.paidOrderStatus;requestGET(m.checkOrderStatus+"?id="+h.getId(),(function(n){void 0!==n.status&&r.indexOf(n.status)>-1&&null!==T&&(clearInterval(T),T=null,n.status,n.status===o?e():t(f.errors.paymentFailed,{bankReason:n.bankReason}))})),M+=h.listenOrderRepeatDelay}),h.listenOrderRepeatDelay)}},a=function(e,t,n,r){this.options=t||{},2==arguments.length&&(this.done=this.options,this.options={}),this.configure=function(e){e.width,e.height;return{width:500,height:500}};var o=function(e){var t=function(e){return e.split("&").reduce((function(e,t){var n=t.split("=").map((function(e){return decodeURIComponent(e.replace(/\+/g," "))}));return e[n[0]]=n[1],e}),{})},n=setInterval((function(){if(e.closed)return clearInterval(n),void r({popupClosed:!0},null);try{var o=document.location.host,i=e.location.host}catch(e){}if(i===o&&(e.location.search||e.location.hash)){var a=e.location.search.substring(1).replace(/\/$/,""),l=e.location.hash.substring(1).replace(/[\/$]/,""),s=t(l),d=t(a);(d=$.extend(d,s)).error?(clearInterval(n),e.close(),r(d.error,null)):(clearInterval(n),e.close(),r(null,d))}}),35)},i=$.param(this.configure(t)),a=window.open(e,t.name||"",i);return a?(a.focus(),o(a)):n(),a};window.stripe=t,window.head=r,window.script=o,window.Order=i,window.ChildPopup=a,e.exports={stripe:t,head:r,script:o,Order:i,ChildPopup:a}}).call(window)},47906:()=>{}}]);