/*! For license information please see 6576.abd9c44a.js.LICENSE.txt */
(self.webpackChunkcvdesignr=self.webpackChunkcvdesignr||[]).push([[6576],{77288:function(t,e,i){var n;t=i.nmd(t),i(92222),i(26541),i(57327),i(89554),i(82772),i(66992),i(69600),i(21249),i(47042),i(5212),i(40561),i(39575),i(68309),i(59595),i(30489),i(47941),i(41539),i(24603),i(74916),i(39714),i(4723),i(15306),i(23123),i(73210),i(15218),i(82472),i(92990),i(18927),i(33105),i(35035),i(74345),i(7174),i(32846),i(44731),i(77209),i(96319),i(58867),i(37789),i(33739),i(29368),i(14483),i(12056),i(3462),i(30678),i(27462),i(33824),i(55021),i(12974),i(15016),i(54747),i(33948);var o=i(50008);"classList"in document.createElement("_")||function(t){"use strict";if("Element"in t){var e="classList",i="prototype",n=t.Element[i],o=Object,s=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[i].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},c=function(t){for(var e=s.call(t.getAttribute("class")||""),i=e?e.split(/\s+/):[],n=0,o=i.length;o>n;n++)this.push(i[n]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},d=c[i]=[],u=function(){return new c(this)};if(a[i]=Error[i],d.item=function(t){return this[t]||null},d.contains=function(t){return-1!==l(this,t+="")},d.add=function(){var t,e=arguments,i=0,n=e.length,o=!1;do{t=e[i]+"",-1===l(this,t)&&(this.push(t),o=!0)}while(++i<n);o&&this._updateClassName()},d.remove=function(){var t,e,i=arguments,n=0,o=i.length,s=!1;do{for(t=i[n]+"",e=l(this,t);-1!==e;)this.splice(e,1),s=!0,e=l(this,t)}while(++n<o);s&&this._updateClassName()},d.toggle=function(t,e){t+="";var i=this.contains(t),n=i?!0!==e&&"remove":!1!==e&&"add";return n&&this[n](t),!0===e||!1===e?e:!i},d.toString=function(){return this.join(" ")},o.defineProperty){var h={get:u,enumerable:!0,configurable:!0};try{o.defineProperty(n,e,h)}catch(t){-2146823252===t.number&&(h.enumerable=!1,o.defineProperty(n,e,h))}}else o[i].__defineGetter__&&n.__defineGetter__(e,u)}}(self),function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(t,e,i){this.data=t,this.size=t.length,this.type=e,this.encoding=i},o=i.prototype,s=n.prototype,r=t.FileReaderSync,a=function(t){this.code=this[this.name=t]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,d=t.URL||t.webkitURL||t,u=d.createObjectURL,h=d.revokeObjectURL,p=d,f=t.btoa,m=t.atob,g=t.ArrayBuffer,v=t.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=s.fake=!0;c--;)a.prototype[l[c]]=c+1;return d.createObjectURL||(p=t.URL=function(t){var e,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=t,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(e=t.match(b),i.origin=e&&e[1])),i}),p.createObjectURL=function(t){var e,i=t.type;return null===i&&(i="application/octet-stream"),t instanceof n?(e="data:"+i,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):f?e+";base64,"+f(t.data):e+","+encodeURIComponent(t.data)):u?u.call(d,t):void 0},p.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&h&&h.call(d,t)},o.append=function(t){var i=this.data;if(v&&(t instanceof g||t instanceof v)){for(var o="",s=new v(t),l=0,c=s.length;c>l;l++)o+=String.fromCharCode(s[l]);i.push(o)}else if("Blob"===e(t)||"File"===e(t)){if(!r)throw new a("NOT_READABLE_ERR");var d=new r;i.push(d.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&m?i.push(m(t.data)):"URI"===t.encoding?i.push(decodeURIComponent(t.data)):"raw"===t.encoding&&i.push(t.data):("string"!=typeof t&&(t+=""),i.push(unescape(encodeURIComponent(t))))},o.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},o.toString=function(){return"[object BlobBuilder]"},s.slice=function(t,e,i){var o=arguments.length;return 3>o&&(i=null),new n(this.data.slice(t,o>1?e:this.data.length),i,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},i}(t);t.Blob=function(t,i){var n=i&&i.type||"",o=new e;if(t)for(var s=0,r=t.length;r>s;s++)Uint8Array&&t[s]instanceof Uint8Array?o.append(t[s].buffer):o.append(t[s]);var a=o.getBlob(n);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var i=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=i(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(s,r){"use strict";"object"==o(t)&&"undefined"!=typeof process&&process&&process.versions&&process.versions.electron||"object"!=o(t)?void 0===(n=function(){return r}.call(e,i,e,t))||(t.exports=n):t.exports=r}(0,function(){"use strict";function t(t,e){return this.init(t,e)}return t.extensions={},function(e){function i(t,e){var i,n=Array.prototype.slice.call(arguments,2);e=e||{};for(var o=0;o<n.length;o++){var s=n[o];if(s)for(i in s)s.hasOwnProperty(i)&&void 0!==s[i]&&(t||!1===e.hasOwnProperty(i))&&(e[i]=s[i])}return e}var n=!1;try{var o=document.createElement("div"),s=document.createTextNode(" ");o.appendChild(s),n=o.contains(s)}catch(t){}var r={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(t){return!!(r.isMac&&t.metaKey||!r.isMac&&t.ctrlKey)},isKey:function(t,e){var i=r.getKeyCode(t);return!1===Array.isArray(e)?i===e:-1!==e.indexOf(i)},getKeyCode:function(t){var e=t.which;return null===e&&(e=null!==t.charCode?t.charCode:t.keyCode),e},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var t=[!0].concat(Array.prototype.slice.call(arguments));return i.apply(this,t)},defaults:function(){var t=[!1].concat(Array.prototype.slice.call(arguments));return i.apply(this,t)},createLink:function(t,e,i,n){var o=t.createElement("a");return r.moveTextRangeIntoElement(e[0],e[e.length-1],o),o.setAttribute("href",i),n&&("_blank"===n&&o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target",n)),o},findOrCreateMatchingTextNodes:function(t,e,i){for(var n=t.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),o=[],s=0,a=!1,l=null,c=null;null!==(l=n.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!a&&i.start<s+l.nodeValue.length&&(a=!0,c=r.splitStartNodeIfNeeded(l,i.start,s)),a&&r.splitEndNodeIfNeeded(l,c,i.end,s),a&&s===i.end)break;if(a&&s>i.end+1)throw new Error("PerformLinking overshot the target!");a&&o.push(c||l),s+=l.nodeValue.length,null!==c&&(s+=c.nodeValue.length,n.nextNode()),c=null}else"img"===l.tagName.toLowerCase()&&(!a&&i.start<=s&&(a=!0),a&&o.push(l));return o},splitStartNodeIfNeeded:function(t,e,i){return e!==i?t.splitText(e-i):null},splitEndNodeIfNeeded:function(t,e,i,n){var o,s;o=n+t.nodeValue.length+(e?e.nodeValue.length:0)-1,s=i-n-(e?t.nodeValue.length:0),o>=i&&n!==o&&0!==s&&(e||t).splitText(s)},splitByBlockElements:function(e){if(3!==e.nodeType&&1!==e.nodeType)return[];var i=[],n=t.util.blockContainerElementNames.join(",");if(3===e.nodeType||0===e.querySelectorAll(n).length)return[e];for(var o=0;o<e.childNodes.length;o++){var s=e.childNodes[o];if(3===s.nodeType)i.push(s);else if(1===s.nodeType){0===s.querySelectorAll(n).length?i.push(s):i=i.concat(t.util.splitByBlockElements(s))}}return i},findAdjacentTextNodeWithContent:function(t,e,i){var n,o=!1,s=i.createNodeIterator(t,NodeFilter.SHOW_TEXT,null,!1);for(n=s.nextNode();n;){if(n===e)o=!0;else if(o&&3===n.nodeType&&n.nodeValue&&n.nodeValue.trim().length>0)break;n=s.nextNode()}return n},findPreviousSibling:function(t){if(!t||r.isMediumEditorElement(t))return!1;for(var e=t.previousSibling;!e&&!r.isMediumEditorElement(t.parentNode);)e=(t=t.parentNode).previousSibling;return e},isDescendant:function(t,e,i){if(!t||!e)return!1;if(t===e)return!!i;if(1!==t.nodeType)return!1;if(n||3!==e.nodeType)return t.contains(e);for(var o=e.parentNode;null!==o;){if(o===t)return!0;o=o.parentNode}return!1},isElement:function(t){return!(!t||1!==t.nodeType)},throttle:function(t,e){var i,n,o,s=null,r=0,a=function(){r=Date.now(),s=null,o=t.apply(i,n),s||(i=n=null)};return e||0===e||(e=50),function(){var l=Date.now(),c=e-(l-r);return i=this,n=arguments,0>=c||c>e?(s&&(clearTimeout(s),s=null),r=l,o=t.apply(i,n),s||(i=n=null)):s||(s=setTimeout(a,c)),o}},traverseUp:function(t,e){if(!t)return!1;do{if(1===t.nodeType){if(e(t))return t;if(r.isMediumEditorElement(t))return!1}t=t.parentNode}while(t);return!1},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,i){var n,o,s,a,l,c,d,u=!1,h=["insertHTML",!1,i];if(!t.util.isEdge&&e.queryCommandSupported("insertHTML"))try{return e.execCommand.apply(e,h)}catch(t){}if((n=e.getSelection()).rangeCount){if(d=(o=n.getRangeAt(0)).commonAncestorContainer,r.isMediumEditorElement(d)&&!d.firstChild)o.selectNode(d.appendChild(e.createTextNode("")));else if(3===d.nodeType&&0===o.startOffset&&o.endOffset===d.nodeValue.length||3!==d.nodeType&&d.innerHTML===o.toString()){for(;!r.isMediumEditorElement(d)&&d.parentNode&&1===d.parentNode.childNodes.length&&!r.isMediumEditorElement(d.parentNode);)d=d.parentNode;o.selectNode(d)}for(o.deleteContents(),(s=e.createElement("div")).innerHTML=i,a=e.createDocumentFragment();s.firstChild;)l=s.firstChild,c=a.appendChild(l);o.insertNode(a),c&&((o=o.cloneRange()).setStartAfter(c),o.collapse(!0),t.selection.selectRange(e,o)),u=!0}return e.execCommand.callListeners&&e.execCommand.callListeners(h,u),u},execFormatBlock:function(e,i){var n=r.getTopBlockContainer(t.selection.getSelectionStart(e));if("blockquote"===i){if(n&&Array.prototype.slice.call(n.childNodes).some((function(t){return r.isBlockContainer(t)})))return e.execCommand("outdent",!1,null);if(r.isIE)return e.execCommand("indent",!1,i)}if(n&&i===n.nodeName.toLowerCase()&&(i="p"),r.isIE&&(i="<"+i+">"),n&&"blockquote"===n.nodeName.toLowerCase()){if(r.isIE&&"<p>"===i)return e.execCommand("outdent",!1,i);if((r.isFF||r.isEdge)&&"p"===i)return Array.prototype.slice.call(n.childNodes).some((function(t){return!r.isBlockContainer(t)}))&&e.execCommand("formatBlock",!1,i),e.execCommand("outdent",!1,i)}return e.execCommand("formatBlock",!1,i)},setTargetBlank:function(t,e){var i,n=e||!1;if("a"===t.nodeName.toLowerCase())t.target="_blank",t.rel="noopener noreferrer";else for(t=t.getElementsByTagName("a"),i=0;i<t.length;i+=1)!1!==n&&n!==t[i].attributes.href.value||(t[i].target="_blank",t[i].rel="noopener noreferrer")},removeTargetBlank:function(t,e){var i;if("a"===t.nodeName.toLowerCase())t.removeAttribute("target"),t.removeAttribute("rel");else for(t=t.getElementsByTagName("a"),i=0;i<t.length;i+=1)e===t[i].attributes.href.value&&(t[i].removeAttribute("target"),t[i].removeAttribute("rel"))},addClassToAnchors:function(t,e){var i,n,o=e.split(" ");if("a"===t.nodeName.toLowerCase())for(n=0;n<o.length;n+=1)t.classList.add(o[n]);else{var s=t.getElementsByTagName("a");if(0===s.length){var a=r.getClosestTag(t,"a");t=a?[a]:[]}else t=s;for(i=0;i<t.length;i+=1)for(n=0;n<o.length;n+=1)t[i].classList.add(o[n])}},isListItem:function(t){if(!t)return!1;if("li"===t.nodeName.toLowerCase())return!0;for(var e=t.parentNode,i=e.nodeName.toLowerCase();"li"===i||!r.isBlockContainer(e)&&"div"!==i;){if("li"===i)return!0;if(!(e=e.parentNode))return!1;i=e.nodeName.toLowerCase()}return!1},cleanListDOM:function(e,i){if("li"===i.nodeName.toLowerCase()){var n=i.parentElement;"p"===n.parentElement.nodeName.toLowerCase()&&(r.unwrap(n.parentElement,e),t.selection.moveCursor(e,i.firstChild,i.firstChild.textContent.length))}},splitOffDOMTree:function(t,e,i){for(var n=e,o=null,s=!i;n!==t;){var r,a=n.parentNode,l=a.cloneNode(!1),c=s?n:a.firstChild;for(o&&(s?l.appendChild(o):r=o),o=l;c;){var d=c.nextSibling;c===n?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=s?d:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=d)}r&&o.appendChild(r),n=a}return o},moveTextRangeIntoElement:function(t,e,i){if(!t||!e)return!1;var n=r.findCommonRoot(t,e);if(!n)return!1;if(e===t){var o=t.parentNode,s=t.nextSibling;return o.removeChild(t),i.appendChild(t),s?o.insertBefore(i,s):o.appendChild(i),i.hasChildNodes()}for(var a,l,c,d=[],u=0;u<n.childNodes.length;u++)if(c=n.childNodes[u],a){if(r.isDescendant(c,e,!0)){l=c;break}d.push(c)}else r.isDescendant(c,t,!0)&&(a=c);var h=l.nextSibling,p=n.ownerDocument.createDocumentFragment();return a===t?(a.parentNode.removeChild(a),p.appendChild(a)):p.appendChild(r.splitOffDOMTree(a,t)),d.forEach((function(t){t.parentNode.removeChild(t),p.appendChild(t)})),l===e?(l.parentNode.removeChild(l),p.appendChild(l)):p.appendChild(r.splitOffDOMTree(l,e,!0)),i.appendChild(p),l.parentNode===n?n.insertBefore(i,l):h?n.insertBefore(i,h):n.appendChild(i),i.hasChildNodes()},depthOfNode:function(t){for(var e=0,i=t;null!==i.parentNode;)i=i.parentNode,e++;return e},findCommonRoot:function(t,e){for(var i=r.depthOfNode(t),n=r.depthOfNode(e),o=t,s=e;i!==n;)i>n?(o=o.parentNode,i-=1):(s=s.parentNode,n-=1);for(;o!==s;)o=o.parentNode,s=s.parentNode;return o},isElementAtBeginningOfBlock:function(t){for(var e;!r.isBlockContainer(t)&&!r.isMediumEditorElement(t);){for(e=t;e=e.previousSibling;)if((3===e.nodeType?e.nodeValue:e.textContent).length>0)return!1;t=t.parentNode}return!0},isMediumEditorElement:function(t){return t&&t.getAttribute&&!!t.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(t){return r.traverseUp(t,(function(t){return r.isMediumEditorElement(t)}))},isBlockContainer:function(t){return t&&3!==t.nodeType&&-1!==r.blockContainerElementNames.indexOf(t.nodeName.toLowerCase())},getClosestBlockContainer:function(t){return r.traverseUp(t,(function(t){return r.isBlockContainer(t)||r.isMediumEditorElement(t)}))},getTopBlockContainer:function(t){var e=!!r.isBlockContainer(t)&&t;return r.traverseUp(t,(function(t){return r.isBlockContainer(t)&&(e=t),!(e||!r.isMediumEditorElement(t))&&(e=t,!0)})),e},getFirstSelectableLeafNode:function(t){for(;t&&t.firstChild;)t=t.firstChild;if("table"===(t=r.traverseUp(t,(function(t){return-1===r.emptyElementNames.indexOf(t.nodeName.toLowerCase())}))).nodeName.toLowerCase()){var e=t.querySelector("th, td");e&&(t=e)}return t},getFirstTextNode:function(t){return r.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),r._getFirstTextNode(t)},_getFirstTextNode:function(t){if(3===t.nodeType)return t;for(var e=0;e<t.childNodes.length;e++){var i=r._getFirstTextNode(t.childNodes[e]);if(null!==i)return i}return null},ensureUrlHasProtocol:function(t){return-1===t.indexOf("://")?"http://"+t:t},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(t,e,i){var n=t+" is deprecated, please use "+e+" instead.";i&&(n+=" Will be removed in "+i),r.warn(n)},deprecatedMethod:function(t,e,i,n){r.deprecated(t,e,n),"function"==typeof this[e]&&this[e].apply(this,i)},cleanupAttrs:function(t,e){e.forEach((function(e){t.removeAttribute(e)}))},cleanupTags:function(t,e){-1!==e.indexOf(t.nodeName.toLowerCase())&&t.parentNode.removeChild(t)},unwrapTags:function(e,i){-1!==i.indexOf(e.nodeName.toLowerCase())&&t.util.unwrap(e,document)},getClosestTag:function(t,e){return r.traverseUp(t,(function(t){return t.nodeName.toLowerCase()===e.toLowerCase()}))},unwrap:function(t,e){for(var i=e.createDocumentFragment(),n=Array.prototype.slice.call(t.childNodes),o=0;o<n.length;o++)i.appendChild(n[o]);i.childNodes.length?t.parentNode.replaceChild(i,t):t.parentNode.removeChild(t)},guid:function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}};t.util=r}(window),(e=function(e){t.util.extend(this,e)}).extend=function(e){var i,n=this;i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},t.util.extend(i,n);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,e&&t.util.extend(i.prototype,e),i},e.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(t){return this.base.options[t]}},["execAction","on","off","subscribe","trigger"].forEach((function(t){e.prototype[t]=function(){return this.base[t].apply(this.base,arguments)}})),t.Extension=e,function(){function e(e){return t.util.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var i={findMatchingSelectionParent:function(e,i){var n,o=i.getSelection();return 0!==o.rangeCount&&(n=o.getRangeAt(0).commonAncestorContainer,t.util.traverseUp(n,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent((function(e){return t.util.isMediumEditorElement(e)}),e)},exportSelection:function(t,e){if(!t)return null;var i=null,n=e.getSelection();if(n.rangeCount>0){var o,s=n.getRangeAt(0),r=s.cloneRange();r.selectNodeContents(t),r.setEnd(s.startContainer,s.startOffset),i={start:o=r.toString().length,end:o+s.toString().length},this.doesRangeStartWithImages(s,e)&&(i.startsWithImage=!0);var a=this.getTrailingImageCount(t,i,s.endContainer,s.endOffset);if(a&&(i.trailingImageCount=a),0!==o){var l=this.getIndexRelativeToAdjacentEmptyBlocks(e,t,s.startContainer,s.startOffset);-1!==l&&(i.emptyBlocksIndex=l)}}return i},importSelection:function(t,e,i,n){if(t&&e){var o=i.createRange();o.setStart(e,0),o.collapse(!0);var s,r=e,a=[],l=0,c=!1,d=!1,u=0,h=!1,p=!1,f=null;for((n||t.startsWithImage||void 0!==t.emptyBlocksIndex)&&(p=!0);!h&&r;)if(r.nodeType>3)r=a.pop();else{if(3!==r.nodeType||d){if(t.trailingImageCount&&d&&("img"===r.nodeName.toLowerCase()&&u++,u===t.trailingImageCount)){for(var m=0;r.parentNode.childNodes[m]!==r;)m++;o.setEnd(r.parentNode,m+1),h=!0}if(!h&&1===r.nodeType)for(var g=r.childNodes.length-1;g>=0;)a.push(r.childNodes[g]),g-=1}else s=l+r.length,!c&&t.start>=l&&t.start<=s&&(p||t.start<s?(o.setStart(r,t.start-l),c=!0):f=r),c&&t.end>=l&&t.end<=s&&(t.trailingImageCount?d=!0:(o.setEnd(r,t.end-l),h=!0)),l=s;h||(r=a.pop())}!c&&f&&(o.setStart(f,f.length),o.setEnd(f,f.length)),void 0!==t.emptyBlocksIndex&&(o=this.importSelectionMoveCursorPastBlocks(i,e,t.emptyBlocksIndex,o)),n&&(o=this.importSelectionMoveCursorPastAnchor(t,o)),this.selectRange(i,o)}},importSelectionMoveCursorPastAnchor:function(e,i){if(e.start===e.end&&3===i.startContainer.nodeType&&i.startOffset===i.startContainer.nodeValue.length&&t.util.traverseUp(i.startContainer,(function(t){return"a"===t.nodeName.toLowerCase()}))){for(var n=i.startContainer,o=i.startContainer.parentNode;null!==o&&"a"!==o.nodeName.toLowerCase();)o.childNodes[o.childNodes.length-1]!==n?o=null:(n=o,o=o.parentNode);if(null!==o&&"a"===o.nodeName.toLowerCase()){for(var s=null,r=0;null===s&&r<o.parentNode.childNodes.length;r++)o.parentNode.childNodes[r]===o&&(s=r);i.setStart(o.parentNode,s+1),i.collapse(!0)}}return i},importSelectionMoveCursorPastBlocks:function(i,n,o,s){var r,a,l=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e,!1),c=s.startContainer,d=0;for(o=o||1,r=3===c.nodeType&&t.util.isBlockContainer(c.previousSibling)?c.previousSibling:t.util.getClosestBlockContainer(c);l.nextNode();)if(a){if(a=l.currentNode,++d===o)break;if(a.textContent.length>0)break}else r===l.currentNode&&(a=l.currentNode);return a||(a=r),s.setStart(t.util.getFirstSelectableLeafNode(a),0),s},getIndexRelativeToAdjacentEmptyBlocks:function(i,n,o,s){if(o.textContent.length>0&&s>0)return-1;var r=o;if(3!==r.nodeType&&(r=o.childNodes[s]),r){if(!t.util.isElementAtBeginningOfBlock(r))return-1;var a=t.util.findPreviousSibling(r);if(!a)return-1;if(a.nodeValue)return-1}for(var l=t.util.getClosestBlockContainer(o),c=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e,!1),d=0;c.nextNode();){var u=""===c.currentNode.textContent;if((u||d>0)&&(d+=1),c.currentNode===l)return d;u||(d=0)}return d},doesRangeStartWithImages:function(t,e){if(0!==t.startOffset||1!==t.startContainer.nodeType)return!1;if("img"===t.startContainer.nodeName.toLowerCase())return!0;var i=t.startContainer.querySelector("img");if(!i)return!1;for(var n=e.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);n.nextNode();){var o=n.currentNode;if(o===i)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(t,e,i,n){if(0===n||1!==i.nodeType)return 0;if("img"!==i.nodeName.toLowerCase()&&!i.querySelector("img"))return 0;for(var o=i.childNodes[n-1];o.hasChildNodes();)o=o.lastChild;for(var s,r=t,a=[],l=0,c=!1,d=!1,u=!1,h=0;!u&&r;)if(r.nodeType>3)r=a.pop();else{if(3!==r.nodeType||d){if("img"===r.nodeName.toLowerCase()&&h++,r===o)u=!0;else if(1===r.nodeType)for(var p=r.childNodes.length-1;p>=0;)a.push(r.childNodes[p]),p-=1}else h=0,s=l+r.length,!c&&e.start>=l&&e.start<=s&&(c=!0),c&&e.end>=l&&e.end<=s&&(d=!0),l=s;u||(r=a.pop())}return h},selectionContainsContent:function(t){var e=t.getSelection();if(!e||e.isCollapsed||!e.rangeCount)return!1;if(""!==e.toString().trim())return!0;var i=this.getSelectedParentElement(e.getRangeAt(0));return!(!i||!("img"===i.nodeName.toLowerCase()||1===i.nodeType&&i.querySelector("img")))},selectionInContentEditableFalse:function(t){var e,i=this.findMatchingSelectionParent((function(t){var i=t&&t.getAttribute("contenteditable");return"true"===i&&(e=!0),"#text"!==t.nodeName&&"false"===i}),t);return!e&&i},getSelectionHtml:function(t){var e,i,n,o="",s=t.getSelection();if(s.rangeCount){for(n=t.createElement("div"),e=0,i=s.rangeCount;i>e;e+=1)n.appendChild(s.getRangeAt(e).cloneContents());o=n.innerHTML}return o},getCaretOffsets:function(t,e){var i,n;return e||(e=window.getSelection().getRangeAt(0)),i=e.cloneRange(),n=e.cloneRange(),i.selectNodeContents(t),i.setEnd(e.endContainer,e.endOffset),n.selectNodeContents(t),n.setStart(e.endContainer,e.endOffset),{left:i.toString().length,right:n.toString().length}},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&3!==t.startContainer.childNodes[t.startOffset].nodeType?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var e,i,n,o=t.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(3===(e=o.getRangeAt(0)).commonAncestorContainer.nodeType){for(i=[],n=e.commonAncestorContainer;n.parentNode&&1===n.parentNode.childNodes.length;)i.push(n.parentNode),n=n.parentNode;return i}return[].filter.call(e.commonAncestorContainer.getElementsByTagName("*"),(function(t){return"function"!=typeof o.containsNode||o.containsNode(t,!0)}))},selectNode:function(t,e){var i=e.createRange();i.selectNodeContents(t),this.selectRange(e,i)},select:function(t,e,i,n,o){var s=t.createRange();return s.setStart(e,i),n?s.setEnd(n,o):s.collapse(!0),this.selectRange(t,s),s},clearSelection:function(t,e){e?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,e,i){this.select(t,e,i)},getSelectionRange:function(t){var e=t.getSelection();return 0===e.rangeCount?null:e.getRangeAt(0)},selectRange:function(t,e){var i=t.getSelection();i.removeAllRanges(),i.addRange(e)},getSelectionStart:function(t){var e=t.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e}};t.selection=i}(),function(){function e(e,i){return!!e&&e.some((function(e){if("function"!=typeof e.getInteractionElements)return!1;var n=e.getInteractionElements();return!!n&&(Array.isArray(n)||(n=[n]),n.some((function(e){return t.util.isDescendant(e,i,!0)})))}))}var i=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};i.prototype={InputEventOnContenteditableSupported:!t.util.isIE&&!t.util.isEdge,attachDOMEvent:function(e,i,n,o){var s=this.base.options.contentWindow,r=this.base.options.ownerDocument;e=t.util.isElement(e)||[s,r].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){t.addEventListener(i,n,o),this.events.push([t,i,n,o])}.bind(this))},detachDOMEvent:function(e,i,n,o){var s,r,a=this.base.options.contentWindow,l=this.base.options.ownerDocument;e&&(e=t.util.isElement(e)||[a,l].indexOf(e)>-1?[e]:e,Array.prototype.forEach.call(e,function(t){-1!==(s=this.indexOfListener(t,i,n,o))&&(r=this.events.splice(s,1)[0])[0].removeEventListener(r[1],r[2],r[3])}.bind(this)))},indexOfListener:function(t,e,i,n){var o,s,r;for(o=0,s=this.events.length;s>o;o+=1)if((r=this.events[o])[0]===t&&r[1]===e&&r[2]===i&&r[3]===n)return o;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var e=this.events.filter((function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")})),i=0,n=e.length;n>i;i++){var o=e[i];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach((function(e){this.attachDOMEvent(t,e.name,e.handler.bind(this))}),this)},enableCustomEvent:function(t){void 0!==this.disabledEvents[t]&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,e){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e)},detachCustomEvent:function(t,e){var i=this.indexOfCustomListener(t,e);-1!==i&&this.customEvents[t].splice(i,1)},indexOfCustomListener:function(t,e){return this.customEvents[t]&&this.customEvents[t].length?this.customEvents[t].indexOf(e):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,e,i){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach((function(t){t(e,i)}))},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach((function(t){t.removeAttribute("data-medium-focused")}))},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(t){this.handleDocumentExecCommand(t)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(this.execCommandListener&&t.execCommand.listeners){var e=t.execCommand.listeners.indexOf(this.execCommandListener);-1!==e&&t.execCommand.listeners.splice(e,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var e=function(e,i){t.execCommand.listeners&&t.execCommand.listeners.forEach((function(t){t({command:e[0],value:e[2],args:e,result:i})}))},i=function(){var i=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return i;var n=Array.prototype.slice.call(arguments);return e(n,i),i};i.orig=t.execCommand,i.listeners=[],i.callListeners=e,t.execCommand=i}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach((function(t){this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML}),this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":case"editableKeydownEnter":case"editableKeydownTab":case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[t]=!0}},attachToEachElement:function(t,e){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach((function(i){this.attachDOMEvent(i,t,e.bind(this))}),this),this.eventsCache.push({name:t,handler:e})},cleanupElement:function(t){var e=t.getAttribute("medium-editor-index");e&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[e])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(i,n){var o,s=this.base.getFocusedElement();s&&"click"===n.type&&this.lastMousedownTarget&&(t.util.isDescendant(s,this.lastMousedownTarget,!0)||e(this.base.extensions,this.lastMousedownTarget))&&(o=s),o||this.base.elements.some((function(e){return!o&&t.util.isDescendant(e,i,!0)&&(o=e),!!o}),this);var r=!t.util.isDescendant(s,i,!0)&&!e(this.base.extensions,i);o!==s&&(s&&r&&(s.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",n,s)),o&&(o.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",n,o))),r&&this.triggerCustomEvent("externalInteraction",n)},updateInput:function(t,e){if(this.contentCache){var i=t.getAttribute("medium-editor-index"),n=t.innerHTML;n!==this.contentCache[i]&&this.triggerCustomEvent("editableInput",e,t),this.contentCache[i]=n}},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var i,n=e.currentTarget.activeElement;this.base.elements.some((function(e){return!!t.util.isDescendant(e,n,!0)&&(i=e,!0)}),this),i&&this.updateInput(i,{target:n,currentTarget:i})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var e={target:t.target,currentTarget:t.currentTarget};setTimeout(function(){this.updateInput(e.currentTarget,e)}.bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.util.isKey(e,t.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.ENTER)||e.ctrlKey&&t.util.isKey(e,t.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.util.isKey(e,t.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.util.isKey(e,[t.util.keyCode.DELETE,t.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}},t.Events=i}(),function(){var e=t.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(i){e.isBuiltInButton(i)?t.Extension.call(this,this.defaults[i]):t.Extension.call(this,i)},init:function(){t.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,i=this.getAria(),n=this.getEditorOption("buttonLabels");return t.classList.add("medium-editor-action"),t.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach((function(e){t.classList.add(e)})),t.setAttribute("data-action",this.getAction()),i&&(t.setAttribute("title",i),t.setAttribute("aria-label",i)),this.attrs&&Object.keys(this.attrs).forEach((function(e){t.setAttribute(e,this.attrs[e])}),this),"fontawesome"===n&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=this.getAction();e&&this.execAction(e)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var t=null;return this.useQueryState&&(t=this.base.queryCommandState(this.getAction())),t},isAlreadyApplied:function(t){var e,i,n=!1,o=this.getTagNames();return!1===this.knownState||!0===this.knownState?this.knownState:(o&&o.length>0&&(n=-1!==o.indexOf(t.nodeName.toLowerCase())),!n&&this.style&&(e=this.style.value.split("|"),i=this.window.getComputedStyle(t,null).getPropertyValue(this.style.prop),e.forEach((function(t){this.knownState||((n=-1!==i.indexOf(t))||"text-decoration"!==this.style.prop)&&(this.knownState=n)}),this)),n)}});e.isBuiltInButton=function(e){return"string"==typeof e&&t.extensions.button.prototype.defaults.hasOwnProperty(e)},t.extensions.button=e}(),t.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}},function(){var e=t.extensions.button.extend({init:function(){t.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var t=this.base.getExtensionByName("toolbar");t&&t.hideToolbarDefaultActions()},setToolbarPosition:function(){var t=this.base.getExtensionByName("toolbar");t&&t.setToolbarPosition()}});t.extensions.form=e}(),function(){var e=t.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var i=t.selection.getSelectionRange(this.document);return"a"===i.startContainer.nodeName.toLowerCase()||"a"===i.endContainer.nodeName.toLowerCase()||t.util.getClosestTag(t.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.util.isKey(e,t.util.keyCode.K)&&t.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var t=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return t.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),t.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&t.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),t.join("")},isDisplayed:function(){return t.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){t.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var i=this.getInput(),n=this.getAnchorTargetCheckbox(),o=this.getAnchorButtonCheckbox();if("string"==typeof(e=e||{value:""})&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),t.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=e.value,i.focus(),n&&(n.checked="_blank"===e.target),o){var s=e.buttonClass?e.buttonClass.split(" "):[];o.checked=-1!==s.indexOf(this.customClassOption)}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var t=this.getAnchorTargetCheckbox(),e=this.getAnchorButtonCheckbox(),i={value:this.getInput().value.trim()};return this.linkValidation&&(i.value=this.checkLinkFormat(i.value)),i.target="_self",t&&t.checked&&(i.target="_blank"),e&&e.checked&&(i.buttonClass=this.customClassOption),i},doFormSave:function(){var t=this.getFormOpts();this.completeFormSave(t)},completeFormSave:function(t){this.base.restoreSelection(),this.execAction(this.action,t),this.base.checkSelection()},ensureEncodedUri:function(t){return t===decodeURI(t)?encodeURI(t):t},ensureEncodedUriComponent:function(t){return t===decodeURIComponent(t)?encodeURIComponent(t):t},ensureEncodedParam:function(t){var e=t.split("="),i=e[0],n=e[1];return i+(void 0===n?"":"="+this.ensureEncodedUriComponent(n))},ensureEncodedQuery:function(t){return t.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(t){var e=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i.test(t),i="",n=t.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),o=n[1],s=n[2],r=n[3];if(/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/.test(t))return"tel:"+t;if(!e){var a=o.split("/")[0];(a.match(/.+(\.|:).+/)||"localhost"===a)&&(i="http://")}return i+this.ensureEncodedUri(o)+(void 0===s?"":"?"+this.ensureEncodedQuery(s))+(void 0===r?"":"#"+r)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(t){var e=t.querySelector(".medium-editor-toolbar-close"),i=t.querySelector(".medium-editor-toolbar-save"),n=t.querySelector(".medium-editor-toolbar-input");this.on(t,"click",this.handleFormClick.bind(this)),this.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.on(e,"click",this.handleCloseClick.bind(this)),this.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var t=this.document.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){return e.keyCode===t.util.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.anchor=e}(),function(){var e=t.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var t=this.document.createElement("div");return t.id="medium-editor-anchor-preview-"+this.getEditorId(),t.className="medium-editor-anchor-preview",t.innerHTML=this.getTemplate(),this.on(t,"click",this.handleClick.bind(this)),t},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(t){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!t.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=t.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=t.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=t,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(t){t=t||this.activeAnchor;var e,i,n,o,s,r=this.window.innerWidth,a=this.anchorPreview.offsetHeight,l=t.getBoundingClientRect(),c=this.diffLeft,d=this.diffTop,u=this.getEditorOption("elementsContainer"),h=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,p={};e=this.anchorPreview.offsetWidth/2;var f=this.base.getExtensionByName("toolbar");f&&(c=f.diffLeft,d=f.diffTop),i=c-e,h?(o=u.getBoundingClientRect(),["top","left"].forEach((function(t){p[t]=l[t]-o[t]})),p.width=l.width,p.height=l.height,l=p,r=o.width,s=u.scrollTop):s=this.window.pageYOffset,n=l.left+l.width/2,s+=a+l.top+l.height-d-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(s)+"px",this.anchorPreview.style.right="initial",e>n?(this.anchorPreview.style.left=i+e+"px",this.anchorPreview.style.right="initial"):e>r-n?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=i+n+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(t){var e=this.base.getExtensionByName("anchor"),i=this.activeAnchor;e&&i&&(t.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(i){var t={value:i.attributes.href.value,target:i.getAttribute("target"),buttonClass:i.getAttribute("class")};e.showForm(t),i=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var i=t.util.getClosestTag(e.target,"a");if(!1!==i){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var n=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&n&&n.isDisplayed&&n.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;(new Date).getTime()-this.lastOver>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});t.extensions.anchorPreview=e}(),function(){function e(e){return!t.util.getClosestTag(e,"a")}var i,n,o,s;i=[" ","\t","\n","\r"," ","","","","","\u2028","\u2029"],n="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",o=new RegExp("^("+n+")$","i"),s=new RegExp("(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.](com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw))","gi");var r=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var t=0,e=0;e<this.window._mediumEditors.length;e++){var i=this.window._mediumEditors[e];null!==i&&void 0!==i.getExtensionByName("autoLink")&&t++}return 1===t},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(t,e){this.performLinking(e)},onKeypress:function(e){this.disableEventHandling||t.util.isKey(e,[t.util.keyCode.SPACE,t.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(t){window.console&&window.console.error("Failed to perform linking",t),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var i=t.util.splitByBlockElements(e),n=!1;0===i.length&&(i=[e]);for(var o=0;o<i.length;o++)n=this.removeObsoleteAutoLinkSpans(i[o])||n,n=this.performLinkingWithinElement(i[o])||n;return this.base.events.updateInput(e,{target:e,currentTarget:e}),n},removeObsoleteAutoLinkSpans:function(i){if(!i||3===i.nodeType)return!1;for(var n=i.querySelectorAll('span[data-auto-link="true"]'),o=!1,s=0;s<n.length;s++){var r=n[s].textContent;if(-1===r.indexOf("://")&&(r=t.util.ensureUrlHasProtocol(r)),n[s].getAttribute("data-href")!==r&&e(n[s])){o=!0;var a=r.replace(/\s+$/,"");if(n[s].getAttribute("data-href")===a){var l=r.length-a.length,c=t.util.splitOffDOMTree(n[s],this.splitTextBeforeEnd(n[s],l));n[s].parentNode.insertBefore(c,n[s].nextSibling)}else t.util.unwrap(n[s],this.document)}}return o},splitTextBeforeEnd:function(t,e){for(var i=this.document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),n=!0;n;)n=null!==i.lastChild();for(var o,s,r;e>0&&null!==r;)(s=(o=i.currentNode).nodeValue).length>e?(r=o.splitText(s.length-e),e=0):(r=i.previousNode(),e-=s.length);return r},performLinkingWithinElement:function(e){for(var i=this.findLinkableText(e),n=0;n<i.length;n++){var o=t.util.findOrCreateMatchingTextNodes(this.document,e,i[n]);this.shouldNotLink(o)||this.createAutoLink(o,i[n].href)}return!1},shouldNotLink:function(e){for(var i=!1,n=0;n<e.length&&!1===i;n++)i=!!t.util.traverseUp(e[n],(function(t){return"a"===t.nodeName.toLowerCase()||t.getAttribute&&"true"===t.getAttribute("data-auto-link")}));return i},findLinkableText:function(t){for(var e=t.textContent,n=null,r=[];null!==(n=s.exec(e));){var a=n.index+n[0].length;!(0!==n.index&&-1===i.indexOf(e[n.index-1])||a!==e.length&&-1===i.indexOf(e[a]))&&(-1!==n[0].indexOf("/")||o.test(n[0].split(".").pop().split("?").shift()))&&r.push({href:n[0],start:n.index,end:a})}return r},createAutoLink:function(e,i){i=t.util.ensureUrlHasProtocol(i);var n=t.util.createLink(this.document,e,i,this.getEditorOption("targetBlank")?"_blank":null),o=this.document.createElement("span");for(o.setAttribute("data-auto-link","true"),o.setAttribute("data-href",i),n.insertBefore(o,n.firstChild);n.childNodes.length>1;)o.appendChild(n.childNodes[1])}});t.extensions.autoLink=r}(),function(){function e(e){var n=t.util.getContainerEditorElement(e);Array.prototype.slice.call(n.parentElement.querySelectorAll("."+i)).forEach((function(t){t.classList.remove(i)}))}var i="medium-editor-dragover",n=t.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var n=t.target.classList?t.target:t.target.parentElement;e(n),"dragover"===t.type&&n.classList.add(i)},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),this.base.selectElement(t.target);var i=this.base.exportSelection();i.start=i.end,this.base.importSelection(i),t.dataTransfer.files&&Array.prototype.slice.call(t.dataTransfer.files).forEach((function(t){this.isAllowedFile(t)&&t.type.match("image")&&this.insertImageFile(t)}),this),e(t.target)},isAllowedFile:function(t){return this.allowedTypes.some((function(e){return!!t.type.match(e)}))},insertImageFile:function(e){if("function"==typeof FileReader){var i=new FileReader;i.readAsDataURL(e),i.addEventListener("load",function(e){var i=this.document.createElement("img");i.src=e.target.result,t.util.insertHTMLCommand(this.document,i.outerHTML)}.bind(this))}}});t.extensions.fileDragging=n}(),function(){var e=t.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach((function(t){var e=t.key.charCodeAt(0);this.keys[e]||(this.keys[e]=[]),this.keys[e].push(t)}),this)},handleKeydown:function(e){var i=t.util.getKeyCode(e);if(this.keys[i]){var n=t.util.isMetaCtrlKey(e),o=!!e.shiftKey,s=!!e.altKey;this.keys[i].forEach((function(t){t.meta!==n||t.shift!==o||t.alt!==s&&void 0!==t.alt||(e.preventDefault(),e.stopPropagation(),"function"==typeof t.command?t.command.apply(this):!1!==t.command&&this.execAction(t.command))}),this)}}});t.extensions.keyboardCommands=e}(),function(){var e=t.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontName")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(t){var e=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var t,e=this.document,i=e.createElement("div"),n=e.createElement("select"),o=e.createElement("a"),s=e.createElement("a");i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var r=0;r<this.fonts.length;r++)(t=e.createElement("option")).innerHTML=this.fonts[r],t.value=this.fonts[r],n.appendChild(t);return n.className="medium-editor-toolbar-select",i.appendChild(n),this.on(n,"change",this.handleFontChange.bind(this)),s.setAttribute("href","#"),s.className="medium-editor-toobar-save",s.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(s),this.on(s,"click",this.handleSaveClick.bind(this),!0),o.setAttribute("href","#"),o.className="medium-editor-toobar-close",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",i.appendChild(o),this.on(o,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){t.selection.getSelectedElements(this.document).forEach((function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("face")&&t.removeAttribute("face")}))},handleFontChange:function(){var t=this.getSelect().value;""===t?this.clearFontName():this.execAction("fontName",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontName=e}(),function(){var e=t.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){t.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),!this.isDisplayed()){var e=this.document.queryCommandValue("fontSize")+"";this.showForm(e)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(t){var e=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),e.value=t||"",e.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var t=this.document,e=t.createElement("div"),i=t.createElement("input"),n=t.createElement("a"),o=t.createElement("a");return e.className="medium-editor-toolbar-form",e.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(e,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",e.appendChild(i),this.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",e.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",e.appendChild(n),this.on(n,"click",this.handleCloseClick.bind(this)),e},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){t.selection.getSelectedElements(this.document).forEach((function(t){"font"===t.nodeName.toLowerCase()&&t.hasAttribute("size")&&t.removeAttribute("size")}))},handleSliderChange:function(){var t=this.getInput().value;"4"===t?this.clearFontSize():this.execAction("fontSize",{value:t})},handleFormClick:function(t){t.stopPropagation()},handleSaveClick:function(t){t.preventDefault(),this.doFormSave()},handleCloseClick:function(t){t.preventDefault(),this.doFormCancel()}});t.extensions.fontSize=e}(),function(){function e(t,e,i){var n=t.clipboardData||e.clipboardData||i.dataTransfer,o={};if(!n)return o;if(n.getData){var s=n.getData("Text");s&&s.length>0&&(o["text/plain"]=s)}if(n.types)for(var r=0;r<n.types.length;r++){var a=n.types[r];o[a]=n.getData(a)}return o}var i="%ME_PASTEBIN%",n=null,o=null,s=function(t){t.stopPropagation()},r=t.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){t.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach((function(t){this.on(t,"paste",this.handlePaste.bind(this))}),this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(t,e){this.on(e,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(t,i){if(!t.defaultPrevented){var n=e(t,this.window,this.document),o=n["text/html"],s=n["text/plain"];this.window.clipboardData&&void 0===t.clipboardData&&!o&&(o=s),(o||s)&&(t.preventDefault(),this.doPaste(o,s,i))}},doPaste:function(e,i,n){var o,s,r="";if(this.cleanPastedHTML&&e)return this.cleanPaste(e);if(i){if(this.getEditorOption("disableReturn")||n&&n.getAttribute("data-disable-return"))r=t.util.htmlEntities(i);else if((o=i.split(/[\r\n]+/g)).length>1)for(s=0;s<o.length;s+=1)""!==o[s]&&(r+="<p>"+t.util.htmlEntities(o[s])+"</p>");else r=t.util.htmlEntities(o[0]);t.util.insertHTMLCommand(this.document,r)}},handlePasteBinPaste:function(t){if(!t.defaultPrevented){var i=e(t,this.window,this.document),n=i["text/html"],s=i["text/plain"],r=o;return!this.cleanPastedHTML||n?(t.preventDefault(),this.removePasteBin(),this.doPaste(n,s,r),void this.trigger("editablePaste",{currentTarget:r,target:r},r)):void setTimeout(function(){this.cleanPastedHTML&&(n=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(n,s,r),this.trigger("editablePaste",{currentTarget:r,target:r},r)}.bind(this),0)}this.removePasteBin()},handleKeydown:function(e,i){t.util.isKey(e,t.util.keyCode.V)&&t.util.isMetaCtrlKey(e)&&(e.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(i))},createPasteBin:function(e){var r,a=t.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=e,a&&(l+=(r=a.getClientRects()).length?r[0].top:void 0!==a.startContainer.getBoundingClientRect?a.startContainer.getBoundingClientRect().top:a.getBoundingClientRect().top),n=a;var c=this.document.createElement("div");c.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),c.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),c.setAttribute("contentEditable",!0),c.innerHTML=i,this.document.body.appendChild(c),this.on(c,"focus",s),this.on(c,"focusin",s),this.on(c,"focusout",s),c.focus(),t.selection.selectNode(c,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(c,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==n&&(t.selection.selectRange(this.document,n),n=null),null!==o&&(o=null);var e=this.getPasteBin();e&&e&&(this.off(e,"focus",s),this.off(e,"focusin",s),this.off(e,"focusout",s),this.off(e,"paste",this.boundHandlePaste),e.parentElement.removeChild(e))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var t=this.getPasteBin();if(!t)return!1;if(t.firstChild&&"mcepastebin"===t.firstChild.id)return!1;var e=t.innerHTML;return!(!e||e===i)&&e},cleanPaste:function(t){var e,i,n,o,s=/<p|<br|<div/.test(t),r=[].concat(this.preCleanReplacements||[],[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]],this.cleanReplacements||[]);for(e=0;e<r.length;e+=1)t=t.replace(r[e][0],r[e][1]);if(!s)return this.pasteHTML(t);for((n=this.document.createElement("div")).innerHTML="<p>"+t.split("<br><br>").join("</p><p>")+"</p>",i=n.querySelectorAll("a,p,div,br"),e=0;e<i.length;e+=1)switch((o=i[e]).innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}this.pasteHTML(n.innerHTML)},pasteHTML:function(e,i){i=t.util.defaults({},i,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var n,o,s,r,a=this.document.createDocumentFragment();for(a.appendChild(this.document.createElement("body")),(r=a.querySelector("body")).innerHTML=e,this.cleanupSpans(r),n=r.querySelectorAll("*"),s=0;s<n.length;s+=1)"a"===(o=n[s]).nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&t.util.setTargetBlank(o),t.util.cleanupAttrs(o,i.cleanAttrs),t.util.cleanupTags(o,i.cleanTags),t.util.unwrapTags(o,i.unwrapTags);t.util.insertHTMLCommand(this.document,r.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.nodeName.toLowerCase()||"div"===t.nodeName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.textContent)&&t.parentNode&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?this.removeWithParent(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?t.parentNode&&1===t.parentNode.childElementCount&&""===t.parentNode.textContent&&this.removeWithParent(t):this.removeWithParent(t)},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t))},cleanupSpans:function(e){var i,n,o,s=e.querySelectorAll(".replace-with"),r=function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")};for(i=0;i<s.length;i+=1)n=s[i],o=this.document.createElement(n.classList.contains("bold")?"b":"i"),n.classList.contains("bold")&&n.classList.contains("italic")?o.innerHTML="<i>"+n.innerHTML+"</i>":o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n);for(s=e.querySelectorAll("span"),i=0;i<s.length;i+=1){if(n=s[i],t.util.traverseUp(n,r))return!1;t.util.unwrap(n,this.document)}}});t.extensions.paste=r}(),function(){var e=t.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(t,e){this.initElement(e)},initElement:function(t){t.getAttribute("data-placeholder")||t.setAttribute("data-placeholder",this.text),this.updatePlaceholder(t)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(t,e){this.cleanupElement(e)},cleanupElement:function(t){t.getAttribute("data-placeholder")===this.text&&t.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(t.util.isFF&&0===e.childNodes.length?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(t){t&&(t.classList.remove("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(t,e){return t.querySelector("img, blockquote, ul, ol, table")||""!==t.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(t):void(e||this.showPlaceholder(t))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(t,e){var i=this.hideOnClick&&e===this.base.getFocusedElement();this.updatePlaceholder(e,i)},handleFocus:function(t,e){this.hidePlaceholder(e)},handleBlur:function(t,e){this.updatePlaceholder(e)}});t.extensions.placeholder=e}(),function(){var e=t.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){t.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach((function(i){return i!==this?t.apply(e||this,arguments):void 0}),this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension((function(e){e.hasForm&&t.appendChild(e.getForm())})),this.attachEventHandlers(),t},createToolbarButtons:function(){var e,i,n,o,s,r,a=this.document.createElement("ul");return a.id="medium-editor-toolbar-actions"+this.getEditorId(),a.className="medium-editor-toolbar-actions",a.style.display="block",this.buttons.forEach((function(n){"string"==typeof n?(s=n,r=null):(s=n.name,r=n),(o=this.base.addBuiltInExtension(s,r))&&"function"==typeof o.getButton&&(i=o.getButton(this.base),e=this.document.createElement("li"),t.util.isElement(i)?e.appendChild(i):e.innerHTML=i,a.appendChild(e))}),this),(n=a.querySelectorAll("button")).length>0&&(n[0].classList.add(this.firstButtonClass),n[n.length-1].classList.add(this.lastButtonClass)),a},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){return!(e&&e.target&&t.util.isDescendant(this.getToolbarElement(),e.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension((function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()}))},multipleBlockElementsSelected:function(){var e=new RegExp("<("+t.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=t.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(e);return!!i&&i.length>1},modifySelection:function(){var e=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&e.startContainer.nodeValue&&e.startOffset===e.startContainer.nodeValue.length){var i=t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window),e.startContainer,this.document);if(i){for(var n=0;0===i.nodeValue.substr(n,1).trim().length;)n+=1;e=t.selection.select(this.document,i,n,e.endContainer,e.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||t.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=t.selection.getSelectionElement(this.window);return!e||-1===this.getEditorElements().indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!t.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension((function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()})),this.checkActiveButtons()},checkActiveButtons:function(){var e,i=[],n=null,o=t.selection.getSelectionRange(this.document),s=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(o&&(this.forEachExtension((function(t){return"function"==typeof t.queryCommandState&&null!==(n=t.queryCommandState())?void(n&&"function"==typeof t.setActive&&t.setActive()):void i.push(t)})),e=t.selection.getSelectedParentElement(o),this.getEditorElements().some((function(i){return t.util.isDescendant(i,e,!0)}))))for(;e&&(i.forEach(s),!t.util.isMediumEditorElement(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();return t?void(!this.static&&e.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,n=this.window.innerWidth,o=this.getToolbarElement(),s=t.getBoundingClientRect(),r=s.top+i,a=s.left+s.width/2,l=o.offsetHeight,c=o.offsetWidth,d=c/2;switch(this.sticky?i>r+t.offsetHeight-l-this.stickyTopOffset?(o.style.top=r+t.offsetHeight-l+"px",o.classList.remove("medium-editor-sticky-toolbar")):i>r-l-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=r-l+"px"):o.style.top=r-l+"px",this.align){case"left":e=s.left;break;case"right":e=s.right-c;break;case"center":e=a-d}0>e?e=0:e+c>n&&(e=n-Math.ceil(c)-1),o.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),i=e.getBoundingClientRect();(!i||0===i.height&&0===i.width&&e.startContainer===e.endContainer)&&(i=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var n,o,s=this.window.innerWidth,r=this.getToolbarElement(),a=r.offsetHeight,l=r.offsetWidth/2,c=this.diffLeft-l,d=this.getEditorOption("elementsContainer"),u=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,h={},p={};u?(o=d.getBoundingClientRect(),["top","left"].forEach((function(t){p[t]=i[t]-o[t]})),p.width=i.width,p.height=i.height,i=p,s=o.width,h.top=d.scrollTop):h.top=this.window.pageYOffset,n=i.left+i.width/2,h.top+=i.top-a,i.top<50?(r.classList.add("medium-toolbar-arrow-over"),r.classList.remove("medium-toolbar-arrow-under"),h.top+=50+i.height-this.diffTop):(r.classList.add("medium-toolbar-arrow-under"),r.classList.remove("medium-toolbar-arrow-over"),h.top+=this.diffTop),l>n?(h.left=c+l,h.right="initial"):l>s-n?(h.left="auto",h.right=0):(h.left=c+n,h.right="initial"),["top","left","right"].forEach((function(t){r.style[t]=h[t]+(isNaN(h[t])?"":"px")}))}});t.extensions.toolbar=e}(),function(){var e=t.Extension.extend({init:function(){t.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(t){var e="medium-editor-dragover";t.preventDefault(),t.dataTransfer.dropEffect="copy","dragover"===t.type?t.target.classList.add(e):"dragleave"===t.type&&t.target.classList.remove(e)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files,0).some(function(e){var i,n;e.type.match("image")&&((i=new FileReader).readAsDataURL(e),n="medium-img-"+ +new Date,t.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+n+'" />'),i.onload=function(){var t=this.document.getElementById(n);t&&(t.removeAttribute("id"),t.removeAttribute("class"),t.src=i.result)}.bind(this))}.bind(this)),e.target.classList.remove("medium-editor-dragover")}});t.extensions.imageDragging=e}(),function(){function e(e){var i=t.selection.getSelectionStart(this.options.ownerDocument),n=i.textContent,o=t.selection.getCaretOffsets(i);(void 0===n[o.left-1]||""===n[o.left-1].trim()||void 0!==n[o.left]&&""===n[o.left].trim())&&e.preventDefault()}function i(e,i){if(this.options.disableReturn||i.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||i.getAttribute("data-disable-double-return")){var n=t.selection.getSelectionStart(this.options.ownerDocument);(n&&""===n.textContent.trim()&&"li"!==n.nodeName.toLowerCase()||n.previousElementSibling&&"br"!==n.previousElementSibling.nodeName.toLowerCase()&&""===n.previousElementSibling.textContent.trim())&&e.preventDefault()}}function n(e){var i=t.selection.getSelectionStart(this.options.ownerDocument);"pre"===(i&&i.nodeName.toLowerCase())&&(e.preventDefault(),t.util.insertHTMLCommand(this.options.ownerDocument,"    ")),t.util.isListItem(i)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(e){var i,n=t.selection.getSelectionStart(this.options.ownerDocument),o=n.nodeName.toLowerCase(),s=/^(\s+|<br\/?>)?$/i,r=/h\d/i;t.util.isKey(e,[t.util.keyCode.BACKSPACE,t.util.keyCode.ENTER])&&n.previousElementSibling&&r.test(o)&&0===t.selection.getCaretOffsets(n).left?t.util.isKey(e,t.util.keyCode.BACKSPACE)&&s.test(n.previousElementSibling.innerHTML)?(n.previousElementSibling.parentNode.removeChild(n.previousElementSibling),e.preventDefault()):!this.options.disableDoubleReturn&&t.util.isKey(e,t.util.keyCode.ENTER)&&((i=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.previousElementSibling.parentNode.insertBefore(i,n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.DELETE)&&n.nextElementSibling&&n.previousElementSibling&&!r.test(o)&&s.test(n.innerHTML)&&r.test(n.nextElementSibling.nodeName.toLowerCase())?(t.selection.moveCursor(this.options.ownerDocument,n.nextElementSibling),n.previousElementSibling.parentNode.removeChild(n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&"li"===o&&s.test(n.innerHTML)&&!n.previousElementSibling&&!n.parentElement.previousElementSibling&&n.nextElementSibling&&"li"===n.nextElementSibling.nodeName.toLowerCase()?((i=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.parentElement.parentElement.insertBefore(i,n.parentElement),t.selection.moveCursor(this.options.ownerDocument,i),n.parentElement.removeChild(n),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&!1!==t.util.getClosestTag(n,"blockquote")&&0===t.selection.getCaretOffsets(n).left?(e.preventDefault(),t.util.execFormatBlock(this.options.ownerDocument,"p")):t.util.isKey(e,t.util.keyCode.ENTER)&&!1!==t.util.getClosestTag(n,"blockquote")&&0===t.selection.getCaretOffsets(n).right?((i=this.options.ownerDocument.createElement("p")).innerHTML="<br>",n.parentElement.insertBefore(i,n.nextSibling),t.selection.moveCursor(this.options.ownerDocument,i),e.preventDefault()):t.util.isKey(e,t.util.keyCode.BACKSPACE)&&t.util.isMediumEditorElement(n.parentElement)&&!n.previousElementSibling&&n.nextElementSibling&&s.test(n.innerHTML)&&(e.preventDefault(),t.selection.moveCursor(this.options.ownerDocument,n.nextSibling),n.parentElement.removeChild(n))}function s(e){var i=t.selection.getSelectionStart(this.options.ownerDocument);i&&(t.util.isMediumEditorElement(i)&&0===i.children.length&&!t.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!t.util.isKey(e,t.util.keyCode.ENTER)||t.util.isListItem(i)||t.util.isBlockContainer(i)||("a"===i.nodeName.toLowerCase()?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function r(t,e){var i=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');i&&(i.value=e.innerHTML.trim())}function a(t){t._mediumEditors||(t._mediumEditors=[null]),this.id||(this.id=t._mediumEditors.length),t._mediumEditors[this.id]=this}function l(t){t._mediumEditors&&t._mediumEditors[this.id]&&(t._mediumEditors[this.id]=null)}function c(e,i,n){var o=[];if(e||(e=[]),"string"==typeof e&&(e=i.querySelectorAll(e)),t.util.isElement(e)&&(e=[e]),n)for(var s=0;s<e.length;s++){var r=e[s];!t.util.isElement(r)||r.getAttribute("data-medium-editor-element")||r.getAttribute("medium-editor-textarea-id")||o.push(r)}else o=Array.prototype.slice.apply(e);return o}function d(t){var e=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');e&&(e.classList.remove("medium-editor-hidden"),e.removeAttribute("medium-editor-textarea-id")),t.parentNode&&t.parentNode.removeChild(t)}function u(t,e,i){return t=function(t,e){return Object.keys(e).forEach((function(i){void 0===t[i]&&(t[i]=e[i])})),t}(t,{window:i.options.contentWindow,document:i.options.ownerDocument,base:i}),"function"==typeof t.init&&t.init(),t.name||(t.name=e),t}function h(){return!this.elements.every((function(t){return!!t.getAttribute("data-disable-toolbar")}))&&!1!==this.options.toolbar}function p(){return!!h.call(this)&&!1!==this.options.anchorPreview}function f(){return!1!==this.options.placeholder}function m(){return!1!==this.options.autoLink}function g(){return!1!==this.options.imageDragging}function v(){return!1!==this.options.keyboardCommands}function b(){return!this.options.extensions.imageDragging}function y(t){for(var e=this.options.ownerDocument.createElement("div"),i=Date.now(),n="medium-editor-"+i,o=t.attributes;this.options.ownerDocument.getElementById(n);)i++,n="medium-editor-"+i;e.className=t.className,e.id=n,e.innerHTML=t.value,t.setAttribute("medium-editor-textarea-id",n);for(var s=0,r=o.length;r>s;s++)e.hasAttribute(o[s].nodeName)||e.setAttribute(o[s].nodeName,o[s].value);return t.form&&this.on(t.form,"reset",function(t){t.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(n))}.bind(this)),t.classList.add("medium-editor-hidden"),t.parentNode.insertBefore(e,t),e}function w(e,n){if(!e.getAttribute("data-medium-editor-element")){"textarea"===e.nodeName.toLowerCase()&&(e=y.call(this,e),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=r.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(e.getAttribute("data-disable-return")||e.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||e.getAttribute("data-disable-return")||this.on(e,"keyup",s.bind(this));var o=t.util.guid();e.setAttribute("data-medium-editor-element",!0),e.classList.add("medium-editor-element"),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("data-medium-editor-editor-index",n),e.setAttribute("medium-editor-index",o),T[o]=e.innerHTML,this.events.attachAllEventsToElement(e)}return e}function C(){this.subscribe("editableKeydownTab",n.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",e.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=i.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function x(){if(this.extensions=[],Object.keys(this.options.extensions).forEach((function(t){"toolbar"!==t&&this.options.extensions[t]&&this.extensions.push(u(this.options.extensions[t],t,this))}),this),b.call(this)){var e=this.options.fileDragging;e||(e={},g.call(this)||(e.allowedTypes=[])),this.addBuiltInExtension("fileDragging",e)}var i={paste:!0,"anchor-preview":p.call(this),autoLink:m.call(this),keyboardCommands:v.call(this),placeholder:f.call(this)};Object.keys(i).forEach((function(t){i[t]&&this.addBuiltInExtension(t)}),this);var n=this.options.extensions.toolbar;if(!n&&h.call(this)){var o=t.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});n=new t.extensions.toolbar(o)}n&&this.extensions.push(u(n,"toolbar",this))}function E(e,i){return i&&[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]].forEach((function(e){i.hasOwnProperty(e[0])&&void 0!==i[e[0]]&&t.util.deprecated(e[0],e[1],"v6.0.0")})),t.util.defaults({},i,e)}function _(e,i){var n,o;if(n=/^append-(.+)$/gi.exec(e))return t.util.execFormatBlock(this.options.ownerDocument,n[1]);if("fontSize"===e)return i.size&&t.util.deprecated(".size option for fontSize command",".value","6.0.0"),o=i.value||i.size,this.options.ownerDocument.execCommand("fontSize",!1,o);if("fontName"===e)return i.name&&t.util.deprecated(".name option for fontName command",".value","6.0.0"),o=i.value||i.name,this.options.ownerDocument.execCommand("fontName",!1,o);if("createLink"===e)return this.createLink(i);if("image"===e){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if("html"===e){var r=this.options.contentWindow.getSelection().toString().trim();return t.util.insertHTMLCommand(this.options.ownerDocument,r)}if(/justify([A-Za-z]*)$/g.exec(e)){var a=this.options.ownerDocument.execCommand(e,!1,null),l=t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));return l&&k.call(this,t.util.getTopBlockContainer(l)),a}return o=i&&i.value,this.options.ownerDocument.execCommand(e,!1,o)}function k(e){if(e){var i,n=Array.prototype.slice.call(e.childNodes).filter((function(t){var e="div"===t.nodeName.toLowerCase();return e&&!i&&(i=t.style.textAlign),e}));n.length&&(this.saveSelection(),n.forEach((function(e){if(e.style.textAlign===i){var n=e.lastChild;if(n){t.util.unwrap(e,this.options.ownerDocument);var o=this.options.ownerDocument.createElement("BR");n.parentNode.insertBefore(o,n.nextSibling)}}}),this),e.style.textAlign=i,this.restoreSelection())}}var T={};t.prototype={init:function(t,e){return this.options=E.call(this,this.defaults,e),this.origElements=t,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(a.call(this,this.options.contentWindow),this.events=new t.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,x.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach((function(t){"function"==typeof t.destroy&&t.destroy()}),this),this.events.destroy(),this.elements.forEach((function(t){this.options.spellcheck&&(t.innerHTML=t.innerHTML),t.removeAttribute("contentEditable"),t.removeAttribute("spellcheck"),t.removeAttribute("data-medium-editor-element"),t.classList.remove("medium-editor-element"),t.removeAttribute("role"),t.removeAttribute("aria-multiline"),t.removeAttribute("medium-editor-index"),t.removeAttribute("data-medium-editor-editor-index"),t.getAttribute("medium-editor-textarea-id")&&d(t)}),this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(t,e,i,n){return this.events.attachDOMEvent(t,e,i,n),this},off:function(t,e,i,n){return this.events.detachDOMEvent(t,e,i,n),this},subscribe:function(t,e){return this.events.attachCustomEvent(t,e),this},unsubscribe:function(t,e){return this.events.detachCustomEvent(t,e),this},trigger:function(t,e,i){return this.events.triggerCustomEvent(t,e,i),this},delay:function(t){var e=this;return setTimeout((function(){e.isActive&&t()}),this.options.delay)},serialize:function(){var t,e={},i=this.elements.length;for(t=0;i>t;t+=1)e[""!==this.elements[t].id?this.elements[t].id:"element-"+t]={value:this.elements[t].innerHTML.trim()};return e},getExtensionByName:function(t){var e;return this.extensions&&this.extensions.length&&this.extensions.some((function(i){return i.name===t&&(e=i,!0)})),e},addBuiltInExtension:function(e,i){var n,o=this.getExtensionByName(e);if(o)return o;switch(e){case"anchor":n=t.util.extend({},this.options.anchor,i),o=new t.extensions.anchor(n);break;case"anchor-preview":o=new t.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":o=new t.extensions.autoLink;break;case"fileDragging":o=new t.extensions.fileDragging(i);break;case"fontname":o=new t.extensions.fontName(this.options.fontName);break;case"fontsize":o=new t.extensions.fontSize(i);break;case"keyboardCommands":o=new t.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":o=new t.extensions.paste(this.options.paste);break;case"placeholder":o=new t.extensions.placeholder(this.options.placeholder);break;default:t.extensions.button.isBuiltInButton(e)&&(i?(n=t.util.defaults({},i,t.extensions.button.prototype.defaults[e]),o=new t.extensions.button(n)):o=new t.extensions.button(e))}return o&&this.extensions.push(u(o,e,this)),o},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var t=this.getExtensionByName("toolbar");return t&&t.checkState(),this},queryCommandState:function(t){var e,i=null;(e=/^full-(.+)$/gi.exec(t))&&(t=e[1]);try{i=this.options.ownerDocument.queryCommandState(t)}catch(t){i=null}return i},execAction:function(e,i){var n,o;return(n=/^full-(.+)$/gi.exec(e))?(this.saveSelection(),this.selectAllContents(),o=_.call(this,n[1],i),this.restoreSelection()):o=_.call(this,e,i),"insertunorderedlist"!==e&&"insertorderedlist"!==e||t.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),t.selection.getSelectedParentElement(e)},selectAllContents:function(){var e=t.selection.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){t.selection.selectNode(e,this.options.ownerDocument);var i=t.selection.getSelectionElement(this.options.contentWindow);i&&this.events.focusElement(i)},getFocusedElement:function(){var t;return this.elements.some((function(e){return!t&&e.getAttribute("data-medium-focused")&&(t=e),!!t}),this),t},exportSelection:function(){var e=t.selection.getSelectionElement(this.options.contentWindow),i=this.elements.indexOf(e),n=null;return i>=0&&(n=t.selection.exportSelection(e,this.options.ownerDocument)),null!==n&&0!==i&&(n.editableElementIndex=i),n},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,i){if(e){var n=this.elements[e.editableElementIndex||0];t.selection.importSelection(e,n,this.options.ownerDocument,i)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var i,n=t.selection.getSelectionElement(this.options.contentWindow),o={};if(-1!==this.elements.indexOf(n)){try{if(this.events.disableCustomEvent("editableInput"),e.url&&t.util.deprecated(".url option for createLink",".value","6.0.0"),(i=e.url||e.value)&&i.trim().length>0){var s=this.options.contentWindow.getSelection();if(s){var r,a,l,c,d=s.getRangeAt(0),u=d.commonAncestorContainer;if(3===d.endContainer.nodeType&&3!==d.startContainer.nodeType&&0===d.startOffset&&d.startContainer.firstChild===d.endContainer&&(u=d.endContainer),a=t.util.getClosestBlockContainer(d.startContainer),l=t.util.getClosestBlockContainer(d.endContainer),3!==u.nodeType&&0!==u.textContent.length&&a===l){var h=a||n,p=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),r=this.exportSelection(),p.appendChild(h.cloneNode(!0)),n===h?t.selection.select(this.options.ownerDocument,h.firstChild,0,h.lastChild,3===h.lastChild.nodeType?h.lastChild.nodeValue.length:h.lastChild.childNodes.length):t.selection.select(this.options.ownerDocument,h,0,h,h.childNodes.length);var f=this.exportSelection();0===(c=t.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,p,{start:r.start-f.start,end:r.end-f.start,editableElementIndex:r.editableElementIndex})).length&&((p=this.options.ownerDocument.createDocumentFragment()).appendChild(u.cloneNode(!0)),c=[p.firstChild.firstChild,p.firstChild.lastChild]),t.util.createLink(this.options.ownerDocument,c,i.trim());var m=(p.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;t.util.insertHTMLCommand(this.options.ownerDocument,p.firstChild.innerHTML.replace(/^\s+/,"")),r.start-=m,r.end-=m,this.importSelection(r)}else this.options.ownerDocument.execCommand("createLink",!1,i);this.options.targetBlank||"_blank"===e.target?t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),i):t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument),i),e.buttonClass&&t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument),e.buttonClass)}}if(this.options.targetBlank||"_blank"===e.target||e.buttonClass){(o=this.options.ownerDocument.createEvent("HTMLEvents")).initEvent("input",!0,!0,this.options.contentWindow);for(var g=0,v=this.elements.length;v>g;g+=1)this.elements[g].dispatchEvent(o)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",o,n)}},cleanPaste:function(t){this.getExtensionByName("paste").cleanPaste(t)},pasteHTML:function(t,e){this.getExtensionByName("paste").pasteHTML(t,e)},setContent:function(t,e){if(e=e||0,this.elements[e]){var i=this.elements[e];i.innerHTML=t,this.checkContentChanged(i)}},getContent:function(t){return t=t||0,this.elements[t]?this.elements[t].innerHTML.trim():null},checkContentChanged:function(e){e=e||t.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(e,{target:e,currentTarget:e})},resetContent:function(t){if(t){var e=this.elements.indexOf(t);-1!==e&&this.setContent(T[t.getAttribute("medium-editor-index")],e)}else this.elements.forEach((function(t,e){this.setContent(T[t.getAttribute("medium-editor-index")],e)}),this)},addElements:function(t){var e=c(t,this.options.ownerDocument,!0);return 0!==e.length&&void e.forEach((function(t){t=w.call(this,t,this.id),this.elements.push(t),this.trigger("addElement",{target:t,currentTarget:t},t)}),this)},removeElements:function(t){var e=c(t,this.options.ownerDocument).map((function(t){return t.getAttribute("medium-editor-textarea-id")&&t.parentNode?t.parentNode.querySelector('div[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]'):t}));this.elements=this.elements.filter((function(t){return-1===e.indexOf(t)||(this.events.cleanupElement(t),t.getAttribute("medium-editor-textarea-id")&&d(t),this.trigger("removeElement",{target:t,currentTarget:t},t),!1)}),this)}},t.getEditorFromElement=function(t){var e=t.getAttribute("data-medium-editor-editor-index"),i=t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow);return i&&i._mediumEditors&&i._mediumEditors[e]?i._mediumEditors[e]:null}}(),t.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0},t.parseVersionString=function(t){var e=t.split("-"),i=e[0].split("."),n=e.length>1?e[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:n,toString:function(){return[i[0],i[1],i[2]].join(".")+(n?"-"+n:"")}}},t.version=t.parseVersionString.call(this,"5.23.3"),t;var e}())},63250:(t,e,i)=>{"use strict";i.r(e);i(19755);(function(){i(69826),i(84944),i(82772),i(69600),i(33792),i(41539),i(39714),function(t){var e,i,n,o,s,r,a,l,c,d,u,h,p,f,m,g,v,b,y,w,C,x,E,_,k,T,S,A,L,N,$,D,B,I,P,M,O,R,j,H,q=(e=65,i='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div><div class="colorpicker_ok"><a href="javascript:;" onclick="" class="cta-btn cta-btn--xsmall cta-btn--black cta-btn--hover-effect1"><span class="cta-btn__text">'+intl("services.operator.correctionEditor.validate")+"</span></a></div></div>",n={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},o=function(e,i){var n=R(e);t(i).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},s=function(e,i){t(i).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},r=function(e,i){t(i).data("colorpicker").fields.eq(0).val(j(e)).end()},a=function(e,i){t(i).data("colorpicker").selector.css("backgroundColor","#"+j({h:e.h,s:100,b:100})),t(i).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},l=function(e,i){t(i).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},c=function(e,i){t(i).data("colorpicker").currentColor.css("backgroundColor","#"+j(e))},d=function(e,i){t(i).data("colorpicker").newColor.css("backgroundColor","#"+j(e))},u=function(i){var n=i.charCode||i.keyCode||-1;if(n>e&&n<=90||32==n)return!1;!0===t(this).parent().parent().data("colorpicker").livePreview&&h.apply(this)},h=function(e){var i,n=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?n.data("colorpicker").color=i=M(P(this.value)):this.parentNode.className.indexOf("_hsb")>0?n.data("colorpicker").color=i=B({h:parseInt(n.data("colorpicker").fields.eq(4).val(),10),s:parseInt(n.data("colorpicker").fields.eq(5).val(),10),b:parseInt(n.data("colorpicker").fields.eq(6).val(),10)}):n.data("colorpicker").color=i=O(I({r:parseInt(n.data("colorpicker").fields.eq(1).val(),10),g:parseInt(n.data("colorpicker").fields.eq(2).val(),10),b:parseInt(n.data("colorpicker").fields.eq(3).val(),10)})),e&&(o(i,n.get(0)),r(i,n.get(0)),s(i,n.get(0))),a(i,n.get(0)),l(i,n.get(0)),d(i,n.get(0)),n.data("colorpicker").onChange.apply(n,[i,j(i),R(i)])},p=function(e){t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")},f=function(){e=this.parentNode.className.indexOf("_hex")>0?70:65,t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),t(this).parent().addClass("colorpicker_focus")},m=function(e){var i=t(this).parent().find("input").focus(),n={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(document).bind("mouseup",n,v),t(document).bind("mousemove",n,g)},g=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10)))),t.data.preview&&h.apply(t.data.field.get(0),[!0]),!1},v=function e(i){return h.apply(i.data.field.get(0),[!0]),i.data.el.removeClass("colorpicker_slider").find("input").focus(),t(document).unbind("mouseup",e),t(document).unbind("mousemove",g),!1},b=function(e){e.preventDefault();var i=e;"undefined"!=typeof event&&event.touches&&(i=event.touches[0]);var n={cal:t(this).parent(),y:t(this).offset().top};return n.preview=n.cal.data("colorpicker").livePreview,t(document).bind("mouseup touchend",n,C),t(document).bind("mousemove touchmove",n,w),y(i,n,n.preview),!1},y=function(t,e,i){h.apply(e.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-e.y)))/150,10)).get(0),[i])},w=function(t){var e=t;return"undefined"!=typeof event&&event.touches&&(e=event.touches[0]),y(e,t.data,t.data.preview),!1},C=function e(i){return o(i.data.cal.data("colorpicker").color,i.data.cal.get(0)),r(i.data.cal.data("colorpicker").color,i.data.cal.get(0)),t(document).unbind("mouseup touchend",e),t(document).unbind("mousemove touchmove",w),!1},x=function(e){e.preventDefault();var i={cal:t(this).parent(),pos:t(this).offset()};i.preview=i.cal.data("colorpicker").livePreview,t(document).bind("mouseup touchend",i,_),t(document).bind("mousemove touchmove",i,E),t(".colorpicker_color",i.cal).one("click",i,E),e.data=i,E(e)},E=function(t){return"undefined"!=typeof event&&event.touches&&event.touches[0],h.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},_=function e(i){return o(i.data.cal.data("colorpicker").color,i.data.cal.get(0)),r(i.data.cal.data("colorpicker").color,i.data.cal.get(0)),t(document).unbind("mouseup touchend",e),t(document).unbind("mousemove touchmove",E),!1},k=function(e){t(this).addClass("colorpicker_focus")},T=function(e){t(this).removeClass("colorpicker_focus")},S=function(e){var i=t(this).parent(),n=i.data("colorpicker").color;i.data("colorpicker").origColor=n,c(n,i.get(0)),i.data("colorpicker").onSubmit(n,j(n),R(n),i.data("colorpicker").el)},A=function(e){var i=t("body"),n=i.data("colorpickerId"),o=t(this).data("colorpickerId");n&&n===o?(t(document).trigger("mousedown"),i.data("colorpickerId",null)):(L.call(this,e),i.data("colorpickerId",o))},L=function(e){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").onBeforeShow.apply(this,[i.get(0)]);var n=t(this).offset(),o=D(),s=n.top+this.offsetHeight,r=n.left;return s+176>o.t+o.h&&(s-=this.offsetHeight+176),r+356>o.l+o.w&&(r=Math.max(0,r-356)),i.css({left:r+"px",top:s+"px"}),0!=i.data("colorpicker").onShow.apply(this,[i.get(0)])&&i.show(),t(document).bind("mousedown",{cal:i},N),!1},N=function e(i){$(i.data.cal.get(0),i.target,i.data.cal.get(0))||(0!=i.data.cal.data("colorpicker").onHide.apply(this,[i.data.cal.get(0)])&&i.data.cal.hide(),$(t(i.data.cal[0]).data("colorpicker").el,i.target)||t("body").data("colorpickerId",null),t(document).unbind("mousedown",e))},$=function(t,e,i){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(var n=e.parentNode;n&&n!=i;){if(n==t)return!0;n=n.parentNode}return!1},D=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},B=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},I=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},P=function(t){var e=6-t.length;if(e>0){for(var i=[],n=0;n<e;n++)i.push("0");i.push(t),t=i.join("")}return t},M=function(t){return O(function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}(t))},O=function(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),o=n-i;return e.b=n,e.s=0!=n?255*o/n:0,0!=e.s?t.r==n?e.h=(t.g-t.b)/o:t.g==n?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},R=function(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),o=Math.round(255*t.b/100);if(0==n)e.r=e.g=e.b=o;else{var s=o,r=(255-n)*o/255,a=i%60*(s-r)/60;360==i&&(i=0),i<60?(e.r=s,e.b=r,e.g=r+a):i<120?(e.g=s,e.b=r,e.r=s-a):i<180?(e.g=s,e.r=r,e.b=r+a):i<240?(e.b=s,e.r=r,e.g=s-a):i<300?(e.b=s,e.g=r,e.r=r+a):i<360?(e.r=s,e.g=r,e.b=s-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},j=function(e){return i=R(e),n=[i.r.toString(16),i.g.toString(16),i.b.toString(16)],t.each(n,(function(t,e){1==e.length&&(n[t]="0"+e)})),n.join("");var i,n},H=function(){var e=t(this).parent(),i=e.data("colorpicker").origColor;e.data("colorpicker").color=i,o(i,e.get(0)),r(i,e.get(0)),s(i,e.get(0)),a(i,e.get(0)),l(i,e.get(0)),d(i,e.get(0))},{init:function(e){if("string"==typeof(e=t.extend({},n,e||{})).color)e.color=M(e.color);else if(null!=e.color.r&&null!=e.color.g&&null!=e.color.b)e.color=O(e.color);else{if(null==e.color.h||null==e.color.s||null==e.color.b)return this;e.color=B(e.color)}var g=this;return this.each((function(){if(!t(this).data("colorpickerId")){var n=t.extend({},e);n.origColor=e.color;var v="colorpicker_"+(t(this).attr("id")||parseInt(1e3*Math.random()));t(this).data("colorpickerId",v);var y=t(i).attr("id",v);n.flat?y.appendTo(this).show():y.appendTo(document.body),n.fields=y.find("input").bind("keyup",u).bind("change",h).bind("blur",p).bind("focus",f),y.find("span").not(".cta-btn__text").bind("mousedown touchstart",m).end().find(">div.colorpicker_current_color").bind("click",H),n.selector=y.find("div.colorpicker_color").bind("touchstart mousedown",x),n.selectorIndic=n.selector.find("div div"),n.el=this,n.hue=y.find("div.colorpicker_hue div"),y.find("div.colorpicker_hue").bind("mousedown touchstart",b),n.newColor=y.find("div.colorpicker_new_color"),n.currentColor=y.find("div.colorpicker_current_color"),y.data("colorpicker",n),y.find("div.colorpicker_submit").bind("mouseenter touchstart",k).bind("mouseleave touchend",T).bind("click",S),o(n.color,y.get(0)),s(n.color,y.get(0)),r(n.color,y.get(0)),l(n.color,y.get(0)),a(n.color,y.get(0)),c(n.color,y.get(0)),d(n.color,y.get(0)),t(".colorpicker_ok a",y).tmousedown(function(e){return g.each((function(){t(this).data("colorpickerId")&&N({data:{cal:t("#"+t(this).data("colorpickerId"))}})}))}.bind(this)),n.flat?y.css({position:"relative",display:"block"}):t(this).bind(n.eventName,A)}}))},showPicker:function(){return this.each((function(){t(this).data("colorpickerId")&&L.apply(this)}))},hidePicker:function(){return this.each((function(){t(this).data("colorpickerId")&&t("#"+t(this).data("colorpickerId")).hide()}))},setColor:function(e){if("string"==typeof e)e=M(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=O(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=B(e)}return this.each((function(){if(t(this).data("colorpickerId")){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").color=e,i.data("colorpicker").origColor=e,o(e,i.get(0)),s(e,i.get(0)),r(e,i.get(0)),l(e,i.get(0)),a(e,i.get(0)),c(e,i.get(0)),d(e,i.get(0))}}))}});t.fn.extend({ColorPicker:q.init,ColorPickerHide:q.hidePicker,ColorPickerShow:q.showPicker,ColorPickerSetColor:q.setColor})}(jQuery)}).call(window)},67194:(t,e,i)=>{"use strict";i.r(e);i(19755);t=i.hmd(t),function(){i(92222),i(57327),i(82772),i(66992),i(94986),i(21249),i(47042),i(68309),i(47941),i(41539),i(88674),i(74916),i(78783),i(15306),i(73210),i(33948);var e,n=i(50008);e=function(t,e,i,o){function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}for(var r=[["Afghanistan ()","af","93"],["Albania (Shqipri)","al","355"],["Algeria ()","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia ()","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (sterreich)","at","43"],["Azerbaijan (Azrbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain ()","bh","973"],["Bangladesh ()","bd","880"],["Barbados","bb","1246"],["Belarus ()","by","375"],["Belgium (Belgi)","be","32"],["Belize","bz","501"],["Benin (Bnin)","bj","229"],["Bermuda","bm","1441"],["Bhutan ()","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (  )","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria ()","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia ()","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (Rpublique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China ()","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros ( )","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cte dIvoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaao","cw","599",0],["Cyprus ()","cy","357"],["Czech Republic (esk republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (Repblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt ()","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Froyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane franaise)","gf","594"],["French Polynesia (Polynsie franaise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia ()","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece ()","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guernsey","gg","44",1],["Guinea (Guine)","gn","224"],["Guinea-Bissau (Guin Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong ()","hk","852"],["Hungary (Magyarorszg)","hu","36"],["Iceland (sland)","is","354"],["India ()","in","91"],["Indonesia","id","62"],["Iran ()","ir","98"],["Iraq ()","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2],["Israel ()","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan ()","jp","81"],["Jersey","je","44",3],["Jordan ()","jo","962"],["Kazakhstan ()","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait ()","kw","965"],["Kyrgyzstan ()","kg","996"],["Laos ()","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon ()","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya ()","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau ()","mo","853"],["Macedonia (FYROM) ()","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania ()","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1],["Mexico (Mxico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia ()","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco ()","ma","212",0],["Mozambique (Moambique)","mz","258"],["Myanmar (Burma) ()","mm","95"],["Namibia (Namibi)","na","264"],["Nauru","nr","674"],["Nepal ()","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Caldonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (   )","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47",0],["Oman ()","om","968"],["Pakistan ()","pk","92"],["Palau","pw","680"],["Palestine ()","ps","970"],["Panama (Panam)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar ()","qa","974"],["Runion (La Runion)","re","262",0],["Romania (Romnia)","ro","40"],["Russia ()","ru","7",0],["Rwanda","rw","250"],["Saint Barthlemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie franaise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe (So Tom e Prncipe)","st","239"],["Saudi Arabia (  )","sa","966"],["Senegal (Sngal)","sn","221"],["Serbia ()","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea ()","kr","82"],["South Sudan ( )","ss","211"],["Spain (Espaa)","es","34"],["Sri Lanka ( )","lk","94"],["Sudan ()","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria ()","sy","963"],["Taiwan ()","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand ()","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia ()","tn","216"],["Turkey (Trkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine ()","ua","380"],["United Arab Emirates (  )","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Ozbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Vit Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara ( )","eh","212",1],["Yemen ()","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["land Islands","ax","358",1]],a=0;a<r.length;a++){var l=r[a];r[a]={name:l[0],iso2:l[1],dialCode:l[2],priority:l[3]||0,areaCodes:l[4]||null}}e.intlTelInputGlobals={getInstance:function(t){var i=t.getAttribute("data-intl-tel-input-id");return e.intlTelInputGlobals.instances[i]},instances:{}};var c=0,d={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},u=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];e.addEventListener("load",(function(){e.intlTelInputGlobals.windowLoaded=!0}));var h=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)e(i[n],t[i[n]])},p=function(t){h(e.intlTelInputGlobals.instances,(function(i){e.intlTelInputGlobals.instances[i][t]()}))},f=function(){function t(e,i){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.id=c++,this.a=e,this.b=null,this.c=null;var o=i||{};this.d={},h(d,(function(t,e){n.d[t]=o.hasOwnProperty(t)?o[t]:e})),this.e=Boolean(e.getAttribute("placeholder"))}return function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(t,[{key:"_init",value:function(){var t=this;if(this.d.nationalMode&&(this.d.autoHideDialCode=!1),this.d.separateDialCode&&(this.d.autoHideDialCode=this.d.nationalMode=!1),this.g=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.g&&(i.body.classList.add("iti-mobile"),this.d.dropdownContainer||(this.d.dropdownContainer=i.body)),"undefined"!=typeof Promise){var e=new Promise((function(e,i){t.h=e,t.i=i})),n=new Promise((function(e,i){t.i0=e,t.i1=i}));this.promise=Promise.all([e,n])}else this.h=this.i=function(){},this.i0=this.i1=function(){};this.s={},this._b(),this._f(),this._h(),this._i(),this._i3()}},{key:"_b",value:function(){this._d(),this._d2(),this._e(),this.d.localizedCountries&&this._d0(),(this.d.onlyCountries.length||this.d.localizedCountries)&&this.p.sort(this._d1)}},{key:"_c",value:function(t,e,i){this.q.hasOwnProperty(e)||(this.q[e]=[]);var n=i||0;this.q[e][n]=t}},{key:"_d",value:function(){if(this.d.onlyCountries.length){var t=this.d.onlyCountries.map((function(t){return t.toLowerCase()}));this.p=r.filter((function(e){return t.indexOf(e.iso2)>-1}))}else if(this.d.excludeCountries.length){var e=this.d.excludeCountries.map((function(t){return t.toLowerCase()}));this.p=r.filter((function(t){return-1===e.indexOf(t.iso2)}))}else this.p=r}},{key:"_d0",value:function(){for(var t=0;t<this.p.length;t++){var e=this.p[t].iso2.toLowerCase();this.d.localizedCountries.hasOwnProperty(e)&&(this.p[t].name=this.d.localizedCountries[e])}}},{key:"_d1",value:function(t,e){return t.name.localeCompare(e.name)}},{key:"_d2",value:function(){this.q={};for(var t=0;t<this.p.length;t++){var e=this.p[t];if(this._c(e.iso2,e.dialCode,e.priority),e.areaCodes)for(var i=0;i<e.areaCodes.length;i++)this._c(e.iso2,e.dialCode+e.areaCodes[i])}}},{key:"_e",value:function(){this.preferredCountries=[];for(var t=0;t<this.d.preferredCountries.length;t++){var e=this.d.preferredCountries[t].toLowerCase(),i=this._y(e,!1,!0);i&&this.preferredCountries.push(i)}}},{key:"_e2",value:function(t,e,n){var o=i.createElement(t);return e&&h(e,(function(t,e){return o.setAttribute(t,e)})),n&&n.appendChild(o),o}},{key:"_f",value:function(){this.a.setAttribute("autocomplete","off");var t="intl-tel-input";this.d.allowDropdown&&(t+=" allow-dropdown"),this.d.separateDialCode&&(t+=" separate-dial-code"),this.d.customContainer&&(t+=" ",t+=this.d.customContainer);var e=this._e2("div",{class:t});if(this.a.parentNode.insertBefore(e,this.a),this.k=this._e2("div",{class:"flag-container"},e),e.appendChild(this.a),this.selectedFlag=this._e2("div",{class:"selected-flag",role:"combobox","aria-owns":"country-listbox"},this.k),this.l=this._e2("div",{class:"iti-flag"},this.selectedFlag),this.d.separateDialCode&&(this.t=this._e2("div",{class:"selected-dial-code"},this.selectedFlag)),this.d.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.u=this._e2("div",{class:"iti-arrow"},this.selectedFlag),this.m=this._e2("ul",{class:"country-list hide",id:"country-listbox","aria-expanded":"false",role:"listbox"}),this.preferredCountries.length&&(this._g(this.preferredCountries,"preferred"),this._e2("li",{class:"divider",role:"separator","aria-disabled":"true"},this.m)),this._g(this.p,"standard"),this.d.dropdownContainer?(this.dropdown=this._e2("div",{class:"intl-tel-input iti-container"}),this.dropdown.appendChild(this.m)):this.k.appendChild(this.m)),this.d.hiddenInput){var i=this.d.hiddenInput,n=this.a.getAttribute("name");if(n){var o=n.lastIndexOf("[");-1!==o&&(i="".concat(n.substr(0,o),"[").concat(i,"]"))}this.hiddenInput=this._e2("input",{type:"hidden",name:i}),e.appendChild(this.hiddenInput)}}},{key:"_g",value:function(t,e){for(var i="",n=0;n<t.length;n++){var o=t[n];i+="<li class='country ".concat(e,"' id='iti-item-").concat(o.iso2,"' role='option' data-dial-code='").concat(o.dialCode,"' data-country-code='").concat(o.iso2,"'>"),i+="<div class='flag-box'><div class='iti-flag ".concat(o.iso2,"'></div></div>"),i+="<span class='country-name'>".concat(o.name,"</span>"),i+="<span class='dial-code'>+".concat(o.dialCode,"</span>"),i+="</li>"}this.m.insertAdjacentHTML("beforeend",i)}},{key:"_h",value:function(){var t=this.a.value,e=this._5(t),i=this._w(t),n=this.d,o=n.initialCountry,s=n.nationalMode,r=n.autoHideDialCode,a=n.separateDialCode;e&&!i?this._v(t):"auto"!==o&&(o?this._z(o.toLowerCase()):e&&i?this._z("us"):(this.j=this.preferredCountries.length?this.preferredCountries[0].iso2:this.p[0].iso2,t||this._z(this.j)),t||s||r||a||(this.a.value="+".concat(this.s.dialCode))),t&&this._u(t)}},{key:"_i",value:function(){this._j(),this.d.autoHideDialCode&&this._l(),this.d.allowDropdown&&this._i2(),this.hiddenInput&&this._i0()}},{key:"_i0",value:function(){var t=this;this._a14=function(){t.hiddenInput.value=t.getNumber()},this.a.form&&this.a.form.addEventListener("submit",this._a14)}},{key:"_i1",value:function(){for(var t=this.a;t&&"LABEL"!==t.tagName;)t=t.parentNode;return t}},{key:"_i2",value:function(){var t=this;this._a9=function(e){t.m.classList.contains("hide")?t.a.focus():e.preventDefault()};var e=this._i1();e&&e.addEventListener("click",this._a9),this._a10=function(){!t.m.classList.contains("hide")||t.a.disabled||t.a.readOnly||t._n()},this.selectedFlag.addEventListener("click",this._a10),this._a11=function(e){t.m.classList.contains("hide")&&-1!==["ArrowUp","ArrowDown"," ","Enter"].indexOf(e.key)&&(e.preventDefault(),e.stopPropagation(),t._n()),"Tab"===e.key&&t._2()},this.k.addEventListener("keydown",this._a11)}},{key:"_i3",value:function(){var t=this;this.d.utilsScript&&!e.intlTelInputUtils?e.intlTelInputGlobals.windowLoaded?e.intlTelInputGlobals.loadUtils(this.d.utilsScript):e.addEventListener("load",(function(){e.intlTelInputGlobals.loadUtils(t.d.utilsScript)})):this.i0(),"auto"===this.d.initialCountry?this._i4():this.h()}},{key:"_i4",value:function(){e.intlTelInputGlobals.autoCountry?this.handleAutoCountry():e.intlTelInputGlobals.startedLoadingAutoCountry||(e.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.d.geoIpLookup&&this.d.geoIpLookup((function(t){e.intlTelInputGlobals.autoCountry=t.toLowerCase(),setTimeout((function(){return p("handleAutoCountry")}))}),(function(){return p("rejectAutoCountryPromise")})))}},{key:"_j",value:function(){var t=this;this._a12=function(){t._v(t.a.value)&&t._8()},this.a.addEventListener("keyup",this._a12),this._a13=function(){setTimeout(t._a12)},this.a.addEventListener("cut",this._a13),this.a.addEventListener("paste",this._a13)}},{key:"_j2",value:function(t){var e=this.a.getAttribute("maxlength");return e&&t.length>e?t.substr(0,e):t}},{key:"_l",value:function(){var t=this;this._a8=function(){t._l2()},this.a.form&&this.a.form.addEventListener("submit",this._a8),this.a.addEventListener("blur",this._a8)}},{key:"_l2",value:function(){if("+"===this.a.value.charAt(0)){var t=this._m(this.a.value);t&&this.s.dialCode!==t||(this.a.value="")}}},{key:"_m",value:function(t){return t.replace(/\D/g,"")}},{key:"_m2",value:function(t){var e=i.createEvent("Event");e.initEvent(t,!0,!0),this.a.dispatchEvent(e)}},{key:"_n",value:function(){this.m.classList.remove("hide"),this.m.setAttribute("aria-expanded","true"),this._o(),this.b&&(this._x(this.b),this._3(this.b)),this._p(),this.u.classList.add("up"),this._m2("open:countrydropdown")}},{key:"_n2",value:function(t,e,i){i&&!t.classList.contains(e)?t.classList.add(e):!i&&t.classList.contains(e)&&t.classList.remove(e)}},{key:"_o",value:function(){var t=this;if(this.d.dropdownContainer&&this.d.dropdownContainer.appendChild(this.dropdown),!this.g){var n=this.a.getBoundingClientRect(),o=e.pageYOffset||i.documentElement.scrollTop,s=n.top+o,r=this.m.offsetHeight,a=s+this.a.offsetHeight+r<o+e.innerHeight,l=s-r>o;if(this._n2(this.m,"dropup",!a&&l),this.d.dropdownContainer){var c=!a&&l?0:this.a.offsetHeight;this.dropdown.style.top="".concat(s+c,"px"),this.dropdown.style.left="".concat(n.left+i.body.scrollLeft,"px"),this._a4=function(){return t._2()},e.addEventListener("scroll",this._a4)}}}},{key:"_o2",value:function(t){for(var e=t;e&&e!==this.m&&!e.classList.contains("country");)e=e.parentNode;return e===this.m?null:e}},{key:"_p",value:function(){var t=this;this._a0=function(e){var i=t._o2(e.target);i&&t._x(i)},this.m.addEventListener("mouseover",this._a0),this._a1=function(e){var i=t._o2(e.target);i&&t._1(i)},this.m.addEventListener("click",this._a1);var e=!0;this._a2=function(){e||t._2(),e=!1},i.documentElement.addEventListener("click",this._a2);var n="",o=null;this._a3=function(e){e.preventDefault(),"ArrowUp"===e.key||"ArrowDown"===e.key?t._q(e.key):"Enter"===e.key?t._r():"Escape"===e.key?t._2():/^[a-zA-Z- ]$/.test(e.key)&&(o&&clearTimeout(o),n+=e.key.toLowerCase(),t._s(n),o=setTimeout((function(){n=""}),1e3))},i.addEventListener("keydown",this._a3)}},{key:"_q",value:function(t){var e="ArrowUp"===t?this.c.previousElementSibling:this.c.nextElementSibling;e&&(e.classList.contains("divider")&&(e="ArrowUp"===t?e.previousElementSibling:e.nextElementSibling),this._x(e),this._3(e))}},{key:"_r",value:function(){this.c&&this._1(this.c)}},{key:"_s",value:function(t){for(var e=0;e<this.p.length;e++)if(this._t(this.p[e].name,t)){var i=this.m.querySelector("#iti-item-".concat(this.p[e].iso2));this._x(i),this._3(i,!0);break}}},{key:"_t",value:function(t,e){return t.substr(0,e.length).toLowerCase()===e}},{key:"_u",value:function(t){var i=t;if(this.d.formatOnDisplay&&e.intlTelInputUtils&&this.s){var n=!this.d.separateDialCode&&(this.d.nationalMode||"+"!==i.charAt(0)),o=intlTelInputUtils.numberFormat,s=o.NATIONAL,r=o.INTERNATIONAL,a=n?s:r;i=intlTelInputUtils.formatNumber(i,this.s.iso2,a)}i=this._7(i),this.a.value=i}},{key:"_v",value:function(t){var e=t,i="1"===this.s.dialCode;e&&this.d.nationalMode&&i&&"+"!==e.charAt(0)&&("1"!==e.charAt(0)&&(e="1".concat(e)),e="+".concat(e));var n=this._5(e),o=this._m(e),s=null;if(n){var r=this.q[this._m(n)],a=-1!==r.indexOf(this.s.iso2),l="+1"===n&&o.length>=4;if(("1"!==this.s.dialCode||!this._w(o))&&(!a||l))for(var c=0;c<r.length;c++)if(r[c]){s=r[c];break}}else"+"===e.charAt(0)&&o.length?s="":e&&"+"!==e||(s=this.j);return null!==s&&this._z(s)}},{key:"_w",value:function(t){var e=this._m(t);if("1"===e.charAt(0)){var i=e.substr(1,3);return-1!==u.indexOf(i)}return!1}},{key:"_x",value:function(t){var e=this.c;e&&e.classList.remove("highlight"),this.c=t,this.c.classList.add("highlight")}},{key:"_y",value:function(t,e,i){for(var n=e?r:this.p,o=0;o<n.length;o++)if(n[o].iso2===t)return n[o];if(i)return null;throw new Error("No country data for '".concat(t,"'"))}},{key:"_z",value:function(t){var e=this.s.iso2?this.s:{};this.s=t?this._y(t,!1,!1):{},this.s.iso2&&(this.j=this.s.iso2),this.l.setAttribute("class","iti-flag ".concat(t));var i=t?"".concat(this.s.name,": +").concat(this.s.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",i),this.d.separateDialCode){var n=this.s.dialCode?"+".concat(this.s.dialCode):"";this.t.innerHTML=n,this.a.style.paddingLeft="".concat(this.selectedFlag.offsetWidth+6,"px")}if(this._0(),this.d.allowDropdown){var o=this.b;if(o&&(o.classList.remove("active"),o.setAttribute("aria-selected","false")),t){var s=this.m.querySelector("#iti-item-".concat(t));s.setAttribute("aria-selected","true"),s.classList.add("active"),this.b=s,this.m.setAttribute("aria-activedescendant",s.getAttribute("id"))}}return e.iso2!==t}},{key:"_0",value:function(){var t="aggressive"===this.d.autoPlaceholder||!this.e&&"polite"===this.d.autoPlaceholder;if(e.intlTelInputUtils&&t){var i=intlTelInputUtils.numberType[this.d.placeholderNumberType],n=this.s.iso2?intlTelInputUtils.getExampleNumber(this.s.iso2,this.d.nationalMode,i):"";n=this._7(n),"function"==typeof this.d.customPlaceholder&&(n=this.d.customPlaceholder(n,this.s)),this.a.setAttribute("placeholder",n)}}},{key:"_1",value:function(t){var e=this._z(t.getAttribute("data-country-code"));this._2(),this._4(t.getAttribute("data-dial-code"),!0),this.a.focus();var i=this.a.value.length;this.a.setSelectionRange(i,i),e&&this._8()}},{key:"_2",value:function(){this.m.classList.add("hide"),this.m.setAttribute("aria-expanded","false"),this.u.classList.remove("up"),i.removeEventListener("keydown",this._a3),i.documentElement.removeEventListener("click",this._a2),this.m.removeEventListener("mouseover",this._a0),this.m.removeEventListener("click",this._a1),this.d.dropdownContainer&&(this.g||e.removeEventListener("scroll",this._a4),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._m2("close:countrydropdown")}},{key:"_3",value:function(t,n){var o=this.m,s=e.pageYOffset||i.documentElement.scrollTop,r=o.offsetHeight,a=o.getBoundingClientRect().top+s,l=a+r,c=t.offsetHeight,d=t.getBoundingClientRect().top+s,u=d+c,h=d-a+o.scrollTop,p=r/2-c/2;if(d<a)n&&(h-=p),o.scrollTop=h;else if(u>l){n&&(h+=p);var f=r-c;o.scrollTop=h-f}}},{key:"_4",value:function(t,e){var i,n=this.a.value,o="+".concat(t);if("+"===n.charAt(0)){var s=this._5(n);i=s?n.replace(s,o):o}else{if(this.d.nationalMode||this.d.separateDialCode)return;if(n)i=o+n;else{if(!e&&this.d.autoHideDialCode)return;i=o}}this.a.value=i}},{key:"_5",value:function(t){var e="";if("+"===t.charAt(0))for(var i="",n=0;n<t.length;n++){var o=t.charAt(n);if(!isNaN(parseInt(o,10))&&(i+=o,this.q[i]&&(e=t.substr(0,n+1)),4===i.length))break}return e}},{key:"_6",value:function(){var t=this.a.value.trim(),e=this.s.dialCode,i=this._m(t),n="1"===i.charAt(0)?i:"1".concat(i);return(this.d.separateDialCode&&"+"!==t.charAt(0)?"+".concat(e):t&&"+"!==t.charAt(0)&&"1"!==t.charAt(0)&&e&&"1"===e.charAt(0)&&4===e.length&&e!==n.substr(0,4)?e.substr(1):"")+t}},{key:"_7",value:function(t){var e=t;if(this.d.separateDialCode){var i=this._5(e);if(i){null!==this.s.areaCodes&&(i="+".concat(this.s.dialCode));var n=" "===e[i.length]||"-"===e[i.length]?i.length+1:i.length;e=e.substr(n)}}return this._j2(e)}},{key:"_8",value:function(){this._m2("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.d.initialCountry&&(this.j=e.intlTelInputGlobals.autoCountry,this.a.value||this.setCountry(this.j),this.h())}},{key:"handleUtils",value:function(){e.intlTelInputUtils&&(this.a.value&&this._u(this.a.value),this._0()),this.i0()}},{key:"destroy",value:function(){var t=this.a.form;if(this.d.allowDropdown){this._2(),this.selectedFlag.removeEventListener("click",this._a10),this.k.removeEventListener("keydown",this._a11);var i=this._i1();i&&i.removeEventListener("click",this._a9)}this.hiddenInput&&t&&t.removeEventListener("submit",this._a14),this.d.autoHideDialCode&&(t&&t.removeEventListener("submit",this._a8),this.a.removeEventListener("blur",this._a8)),this.a.removeEventListener("keyup",this._a12),this.a.removeEventListener("cut",this._a13),this.a.removeEventListener("paste",this._a13),this.a.removeAttribute("data-intl-tel-input-id");var n=this.a.parentNode;n.parentNode.insertBefore(this.a,n),n.parentNode.removeChild(n),delete e.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getExtension(this._6(),this.s.iso2):""}},{key:"getNumber",value:function(t){if(e.intlTelInputUtils){var i=this.s.iso2;return intlTelInputUtils.formatNumber(this._6(),i,t)}return""}},{key:"getNumberType",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getNumberType(this._6(),this.s.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.s}},{key:"getValidationError",value:function(){if(e.intlTelInputUtils){var t=this.s.iso2;return intlTelInputUtils.getValidationError(this._6(),t)}return-99}},{key:"isValidNumber",value:function(){var t=this._6().trim(),i=this.d.nationalMode?this.s.iso2:"";return e.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,i):null}},{key:"setCountry",value:function(t){var e=t.toLowerCase();this.l.classList.contains(e)||(this._z(e),this._4(this.s.dialCode,!1),this._8())}},{key:"setNumber",value:function(t){var e=this._v(t);this._u(t),e&&this._8()}},{key:"setPlaceholderNumberType",value:function(t){this.d.placeholderNumberType=t,this._0()}}]),t}();e.intlTelInputGlobals.getCountryData=function(){return r};var m=function(t,e,n){var o=i.createElement("script");o.onload=function(){p("handleUtils"),e&&e()},o.onerror=function(){p("rejectUtilsScriptPromise"),n&&n()},o.className="iti-load-utils",o.async=!0,o.src=t,i.body.appendChild(o)};e.intlTelInputGlobals.loadUtils=function(t){if(!e.intlTelInputUtils&&!e.intlTelInputGlobals.startedLoadingUtilsScript){if(e.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise((function(e,i){return m(t,e,i)}));m(t)}return null},e.intlTelInputGlobals.defaults=d,e.intlTelInputGlobals.version="15.0.2",t.fn.intlTelInput=function(i){var s,r=arguments;return i===o||"object"==n(i)?this.each((function(){if(!t.data(this,"plugin_intlTelInput")){var n=new f(this,i);n._init(),e.intlTelInputGlobals.instances[n.id]=n,t.data(this,"plugin_intlTelInput",n)}})):"string"==typeof i&&"_"!==i[0]?(this.each((function(){var e=t.data(this,"plugin_intlTelInput");e instanceof f&&"function"==typeof e[i]&&(s=e[i].apply(e,Array.prototype.slice.call(r,1))),"destroy"===i&&t.data(this,"plugin_intlTelInput",null)})),s!==o?s:this):void 0}},"object"==n(t)&&t.exports?t.exports=e(i(19755),window,document):"function"==typeof define&&i.amdO?define(["jquery"],(function(t){e(t,window,document)})):e(jQuery,window,document)}.call(window)},68116:(t,e,i)=>{"use strict";i.r(e);i(19755);(function(){i(82772),i(47042),i(40561),i(41539),i(74916),i(39714),i(15306);var t,e,n=i(50008);t=this,e=function(t){function e(t){this._targetElement=t,this._introItems=[],this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",hidePrev:!1,hideNext:!1,tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,hintPosition:"top-middle",hintButtonLabel:"Got it",hintAnimation:!0}}function i(t){var e,i=[],n=this;if(this._options.steps){var l=0;for(e=this._options.steps.length;l<e;l++){var c=o(this._options.steps[l]);if(c.step=i.length+1,"string"==typeof c.element&&(c.element=document.querySelector(c.element)),void 0===c.element||null==c.element){var d=document.querySelector(".introjsFloatingElement");null==d&&((d=document.createElement("div")).className="introjsFloatingElement",document.body.appendChild(d)),c.element=d,c.position="floating"}c.scrollTo=c.scrollTo||this._options.scrollTo,void 0===c.disableInteraction&&(c.disableInteraction=this._options.disableInteraction),null!=c.element&&i.push(c)}}else{if(1>(d=t.querySelectorAll("*[data-intro]")).length)return!1;l=0;for(var u=d.length;l<u;l++)if("none"!=(c=d[l]).style.display){var h=parseInt(c.getAttribute("data-step"),10);e=this._options.disableInteraction,void 0!==c.getAttribute("data-disable-interaction")&&(e=!!c.getAttribute("data-disable-interaction")),0<h&&(i[h-1]={element:c,intro:c.getAttribute("data-intro"),step:parseInt(c.getAttribute("data-step"),10),tooltipClass:c.getAttribute("data-tooltipClass"),highlightClass:c.getAttribute("data-highlightClass"),position:c.getAttribute("data-position")||this._options.tooltipPosition,scrollTo:c.getAttribute("data-scrollTo")||this._options.scrollTo,disableInteraction:e})}for(l=h=0,u=d.length;l<u;l++)if(null==(c=d[l]).getAttribute("data-step")){for(;void 0!==i[h];)h++;e=this._options.disableInteraction,void 0!==c.getAttribute("data-disable-interaction")&&(e=!!c.getAttribute("data-disable-interaction")),i[h]={element:c,intro:c.getAttribute("data-intro"),step:h+1,tooltipClass:c.getAttribute("data-tooltipClass"),highlightClass:c.getAttribute("data-highlightClass"),position:c.getAttribute("data-position")||this._options.tooltipPosition,scrollTo:c.getAttribute("data-scrollTo")||this._options.scrollTo,disableInteraction:e}}}for(l=[],e=0;e<i.length;e++)i[e]&&l.push(i[e]);return(i=l).sort((function(t,e){return t.step-e.step})),n._introItems=i,_.call(n,t)&&(s.call(n),t.querySelector(".introjs-skipbutton"),t.querySelector(".introjs-nextbutton"),n._onKeyDown=function(e){if(27===e.keyCode&&1==n._options.exitOnEsc)a.call(n,t);else if(37===e.keyCode)r.call(n);else if(39===e.keyCode)s.call(n);else if(13===e.keyCode){var i=e.target||e.srcElement;i&&0<i.className.indexOf("introjs-prevbutton")?r.call(n):i&&0<i.className.indexOf("introjs-skipbutton")?(n._introItems.length-1==n._currentStep&&"function"==typeof n._introCompleteCallback&&n._introCompleteCallback.call(n),a.call(n,t)):s.call(n),e.preventDefault?e.preventDefault():e.returnValue=!1}},n._onResize=function(t){n.refresh.call(n)},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener("keydown",n._onKeyDown,!0),window.addEventListener("resize",n._onResize,!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent("onkeydown",n._onKeyDown),document.attachEvent("onresize",n._onResize))),!1}function o(t){if(null==t||"object"!=n(t)||void 0!==t.nodeType)return t;var e,i={};for(e in t)i[e]="undefined"!=typeof jQuery&&t[e]instanceof jQuery?t[e]:o(t[e]);return i}function s(){if(this._direction="forward",void 0!==this._currentStepNumber)for(var t=0,e=this._introItems.length;t<e;t++)this._introItems[t].step===this._currentStepNumber&&(this._currentStep=t-1,this._currentStepNumber=void 0);void 0===this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),a.call(this,this._targetElement)):(t=this._introItems[this._currentStep],void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,t.element),g.call(this,t))}function r(){if(this._direction="backward",0===this._currentStep)return!1;var t=this._introItems[--this._currentStep];void 0!==this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,t.element),g.call(this,t)}function a(t,e){var i=!0;if(null!=this._introBeforeExitCallback&&(i=this._introBeforeExitCallback.call(self)),e||!1!==i){if((i=t.querySelectorAll(".introjs-overlay"))&&0<i.length)for(e=i.length-1;0<=e;e--){var n=i[e];n.style.opacity=0,setTimeout(function(){this.parentNode&&this.parentNode.removeChild(this)}.bind(n),500)}if((e=t.querySelector(".introjs-helperLayer"))&&e.parentNode.removeChild(e),(e=t.querySelector(".introjs-tooltipReferenceLayer"))&&e.parentNode.removeChild(e),(t=t.querySelector(".introjs-disableInteraction"))&&t.parentNode.removeChild(t),(t=document.querySelector(".introjsFloatingElement"))&&t.parentNode.removeChild(t),b(),(t=document.querySelectorAll(".introjs-fixParent"))&&0<t.length)for(e=t.length-1;0<=e;e--)t[e].className=t[e].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),null!=this._introExitCallback&&this._introExitCallback.call(self),this._currentStep=void 0}}function l(t,e,i,n,o){if(o=o||!1,e.style.top=null,e.style.right=null,e.style.bottom=null,e.style.left=null,e.style.marginLeft=null,e.style.marginTop=null,i.style.display="inherit",void 0!==n&&null!=n&&(n.style.top=null,n.style.left=null),this._introItems[this._currentStep]){var s=this._introItems[this._currentStep];s="string"==typeof s.tooltipClass?s.tooltipClass:this._options.tooltipClass,e.className=("introjs-tooltip "+s).replace(/^\s+|\s+$/g,"");var r=this._introItems[this._currentStep].position;"floating"!=r&&(r="auto"===r?u.call(this,t,e):u.call(this,t,e,r)),s=I(t),t=I(e);var a=E();switch(r){case"top":i.className="introjs-arrow bottom",c(s,o?0:15,t,a,e),e.style.bottom=s.height+20+"px";break;case"right":e.style.left=s.width+20+"px",s.top+t.height>a.height?(i.className="introjs-arrow left-bottom",e.style.top="-"+(t.height-s.height-20)+"px"):i.className="introjs-arrow left";break;case"left":o||1!=this._options.showStepNumbers||(e.style.top="15px"),s.top+t.height>a.height?(e.style.top="-"+(t.height-s.height-20)+"px",i.className="introjs-arrow right-bottom"):i.className="introjs-arrow right",e.style.right=s.width+20+"px";break;case"floating":i.style.display="none",e.style.left="50%",e.style.top="50%",e.style.marginLeft="-"+t.width/2+"px",e.style.marginTop="-"+t.height/2+"px",void 0!==n&&null!=n&&(n.style.left="-"+(t.width/2+18)+"px",n.style.top="-"+(t.height/2+18)+"px");break;case"bottom-right-aligned":i.className="introjs-arrow top-right",d(s,0,t,e),e.style.top=s.height+20+"px";break;case"bottom-middle-aligned":i.className="introjs-arrow top-middle",i=s.width/2-t.width/2,o&&(i+=5),d(s,i,t,e)&&(e.style.right=null,c(s,i,t,a,e)),e.style.top=s.height+20+"px";break;default:i.className="introjs-arrow top",c(s,0,t,a,e),e.style.top=s.height+20+"px"}}}function c(t,e,i,n,o){return t.left+e+i.width>n.width?(o.style.left=n.width-i.width-t.left+"px",!1):(o.style.left=e+"px",!0)}function d(t,e,i,n){return 0>t.left+t.width-e-i.width?(n.style.left=-t.left+"px",!1):(n.style.right=e+"px",!0)}function u(t,e,i){var n=this._options.positionPrecedence.slice(),o=E(),s=I(e).height+10;e=I(e).width+20;var r="floating";return(t=I(t)).left+e>o.width||0>t.left+t.width/2-e?(h(n,"bottom"),h(n,"top")):(t.height+t.top+s>o.height&&h(n,"bottom"),0>t.top-s&&h(n,"top")),t.width+t.left+e>o.width&&h(n,"right"),0>t.left-e&&h(n,"left"),0<n.length&&(r=n[0]),i&&"auto"!=i&&-1<n.indexOf(i)&&(r=i),r}function h(t,e){-1<t.indexOf(e)&&t.splice(t.indexOf(e),1)}function p(t){if(t&&this._introItems[this._currentStep]){var e=this._introItems[this._currentStep],i=I(e.element),n=10;x(e.element)?t.className+=" introjs-fixedTooltip":t.className=t.className.replace(" introjs-fixedTooltip",""),"floating"==e.position&&(n=0),t.setAttribute("style","width: "+(i.width+n)+"px; height:"+(i.height+n)+"px; top:"+(i.top-5)+"px;left: "+(i.left-5)+"px;")}}function f(){var t=document.querySelector(".introjs-disableInteraction");null===t&&((t=document.createElement("div")).className="introjs-disableInteraction",this._targetElement.appendChild(t)),p.call(this,t)}function m(t){t.setAttribute("role","button"),t.tabIndex=0}function g(t){void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,t.element);var e=this,i=document.querySelector(".introjs-helperLayer"),n=document.querySelector(".introjs-tooltipReferenceLayer"),o="introjs-helperLayer";if(I(t.element),"string"==typeof t.highlightClass&&(o+=" "+t.highlightClass),"string"==typeof this._options.highlightClass&&(o+=" "+this._options.highlightClass),null!=i){var c=n.querySelector(".introjs-helperNumberLayer"),d=n.querySelector(".introjs-tooltiptext"),u=n.querySelector(".introjs-arrow"),h=n.querySelector(".introjs-tooltip"),g=n.querySelector(".introjs-skipbutton"),w=n.querySelector(".introjs-prevbutton"),C=n.querySelector(".introjs-nextbutton");if(i.className=o,h.style.opacity=0,h.style.display="none",null!=c){var x=this._introItems[0<=t.step-2?t.step-2:0];(null!=x&&"forward"==this._direction&&"floating"==x.position||"backward"==this._direction&&"floating"==t.position)&&(c.style.opacity=0)}if(p.call(e,i),p.call(e,n),(x=document.querySelectorAll(".introjs-fixParent"))&&0<x.length)for(o=x.length-1;0<=o;o--)x[o].className=x[o].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");b(),e._lastShowElementTimer&&clearTimeout(e._lastShowElementTimer),e._lastShowElementTimer=setTimeout((function(){null!=c&&(c.innerHTML=t.step),d.innerHTML=t.intro,h.style.display="block",l.call(e,t.element,h,u,c),e._options.showBullets&&(n.querySelector(".introjs-bullets li > a.active").className="",n.querySelector('.introjs-bullets li > a[data-stepnumber="'+t.step+'"]').className="active"),n.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+P.call(e)+"%;"),h.style.opacity=1,c&&(c.style.opacity=1),void 0!==g&&null!=g&&/introjs-donebutton/gi.test(g.className)?g.focus():void 0!==C&&null!=C&&C.focus(),v.call(e,t.scrollTo,t,d)}),350)}else{var E=document.createElement("div");w=document.createElement("div"),i=document.createElement("div");var _=document.createElement("div"),k=document.createElement("div"),T=document.createElement("div"),S=document.createElement("div"),A=document.createElement("div");E.className=o,w.className="introjs-tooltipReferenceLayer",p.call(e,E),p.call(e,w),this._targetElement.appendChild(E),this._targetElement.appendChild(w),i.className="introjs-arrow",k.className="introjs-tooltiptext",k.innerHTML=t.intro,T.className="introjs-bullets",!1===this._options.showBullets&&(T.style.display="none"),E=document.createElement("ul"),o=0;for(var L=this._introItems.length;o<L;o++){var N=document.createElement("li"),$=document.createElement("a");$.onclick=function(){e.goToStep(this.getAttribute("data-stepnumber"))},o===t.step-1&&($.className="active"),m($),$.innerHTML="&nbsp;",$.setAttribute("data-stepnumber",this._introItems[o].step),N.appendChild($),E.appendChild(N)}T.appendChild(E),S.className="introjs-progress",!1===this._options.showProgress&&(S.style.display="none"),(o=document.createElement("div")).className="introjs-progressbar",o.setAttribute("style","width:"+P.call(this)+"%;"),S.appendChild(o),A.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(A.style.display="none"),_.className="introjs-tooltip",_.appendChild(k),_.appendChild(T),_.appendChild(S),1==this._options.showStepNumbers&&((x=document.createElement("span")).className="introjs-helperNumberLayer",x.innerHTML=t.step,w.appendChild(x)),_.appendChild(i),w.appendChild(_),(C=document.createElement("a")).onclick=function(){e._introItems.length-1!=e._currentStep&&s.call(e)},m(C),C.innerHTML=this._options.nextLabel,(w=document.createElement("a")).onclick=function(){0!=e._currentStep&&r.call(e)},m(w),w.innerHTML=this._options.prevLabel,(g=document.createElement("a")).className="introjs-button introjs-skipbutton",m(g),g.innerHTML=this._options.skipLabel,g.onclick=function(){e._introItems.length-1==e._currentStep&&"function"==typeof e._introCompleteCallback&&e._introCompleteCallback.call(e),a.call(e,e._targetElement)},A.appendChild(g),1<this._introItems.length&&(A.appendChild(w),A.appendChild(C)),_.appendChild(A),l.call(e,t.element,_,i,x),v.call(this,t.scrollTo,t,_)}(x=e._targetElement.querySelector(".introjs-disableInteraction"))&&x.parentNode.removeChild(x),t.disableInteraction&&f.call(e),void 0!==C&&null!=C&&C.removeAttribute("tabIndex"),void 0!==w&&null!=w&&w.removeAttribute("tabIndex"),0==this._currentStep&&1<this._introItems.length?(void 0!==g&&null!=g&&(g.className="introjs-button introjs-skipbutton"),void 0!==C&&null!=C&&(C.className="introjs-button introjs-nextbutton"),1==this._options.hidePrev?(void 0!==w&&null!=w&&(w.className="introjs-button introjs-prevbutton introjs-hidden"),void 0!==C&&null!=C&&(C.className+=" introjs-fullbutton")):void 0!==w&&null!=w&&(w.className="introjs-button introjs-prevbutton introjs-disabled"),void 0!==w&&null!=w&&(w.tabIndex="-1"),void 0!==g&&null!=g&&(g.innerHTML=this._options.skipLabel)):this._introItems.length-1==this._currentStep||1==this._introItems.length?(void 0!==g&&null!=g&&(g.innerHTML=this._options.doneLabel,g.className+=" introjs-donebutton"),void 0!==w&&null!=w&&(w.className="introjs-button introjs-prevbutton"),1==this._options.hideNext?(void 0!==C&&null!=C&&(C.className="introjs-button introjs-nextbutton introjs-hidden"),void 0!==w&&null!=w&&(w.className+=" introjs-fullbutton")):void 0!==C&&null!=C&&(C.className="introjs-button introjs-nextbutton introjs-disabled"),void 0!==C&&null!=C&&(C.tabIndex="-1")):(void 0!==g&&null!=g&&(g.className="introjs-button introjs-skipbutton"),void 0!==w&&null!=w&&(w.className="introjs-button introjs-prevbutton"),void 0!==C&&null!=C&&(C.className="introjs-button introjs-nextbutton"),void 0!==g&&null!=g&&(g.innerHTML=this._options.skipLabel)),void 0!==C&&null!=C&&C.focus(),y(t),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,t.element)}function v(t,e,i){this._options.scrollToElement&&(t="tooltip"===t?i.getBoundingClientRect():e.element.getBoundingClientRect(),0<=(i=e.element.getBoundingClientRect()).top&&0<=i.left&&i.bottom+80<=window.innerHeight&&i.right<=window.innerWidth||(i=E().height,0>t.bottom-(t.bottom-t.top)||e.element.clientHeight>i?window.scrollBy(0,t.top-(i/2-t.height/2)-this._options.scrollPadding):window.scrollBy(0,t.top-(i/2-t.height/2)+this._options.scrollPadding)))}function b(){for(var t=document.querySelectorAll(".introjs-showElement"),e=0,i=t.length;e<i;e++){var n=t[e],o=/introjs-[a-zA-Z]+/g;if(n instanceof SVGElement){var s=n.getAttribute("class")||"";n.setAttribute("class",s.replace(o,"").replace(/^\s+|\s+$/g,""))}else n.className=n.className.replace(o,"").replace(/^\s+|\s+$/g,"")}}function y(t){var e;if(t.element instanceof SVGElement)for(e=t.element.parentNode;null!=t.element.parentNode&&e.tagName&&"body"!==e.tagName.toLowerCase();)"svg"===e.tagName.toLowerCase()&&w(e,"introjs-showElement introjs-relativePosition"),e=e.parentNode;for(w(t.element,"introjs-showElement"),"absolute"!==(e=C(t.element,"position"))&&"relative"!==e&&"fixed"!==e&&w(t.element,"introjs-relativePosition"),e=t.element.parentNode;null!=e&&e.tagName&&"body"!==e.tagName.toLowerCase();){t=C(e,"z-index");var i=parseFloat(C(e,"opacity")),n=C(e,"transform")||C(e,"-webkit-transform")||C(e,"-moz-transform")||C(e,"-ms-transform")||C(e,"-o-transform");(/[0-9]+/.test(t)||1>i||"none"!==n&&void 0!==n)&&(e.className+=" introjs-fixParent"),e=e.parentNode}}function w(t,e){if(t instanceof SVGElement){var i=t.getAttribute("class")||"";t.setAttribute("class",i+" "+e)}else t.className+=" "+e}function C(t,e){var i="";return t.currentStyle?i=t.currentStyle[e]:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),i&&i.toLowerCase?i.toLowerCase():i}function x(t){var e=t.parentNode;return!(!e||"HTML"===e.nodeName)&&("fixed"==C(t,"position")||x(e))}function E(){if(null!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}function _(t){var e=document.createElement("div"),i="",n=this;if(e.className="introjs-overlay",t.tagName&&"body"!==t.tagName.toLowerCase()){var o=I(t);o&&(i+="width: "+o.width+"px; height:"+o.height+"px; top:"+o.top+"px;left: "+o.left+"px;",e.setAttribute("style",i))}else i+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",e.setAttribute("style",i);return t.appendChild(e),e.onclick=function(){1==n._options.exitOnOverlayClick&&a.call(n,t)},setTimeout((function(){i+="opacity: "+n._options.overlayOpacity.toString()+";",e.setAttribute("style",i)}),10),!0}function k(){var t=this._targetElement.querySelector(".introjs-hintReference");if(t){var e=t.getAttribute("data-step");return t.parentNode.removeChild(t),e}}function T(t){if(this._introItems=[],this._options.hints){t=0;for(var e=this._options.hints.length;t<e;t++){var i=o(this._options.hints[t]);"string"==typeof i.element&&(i.element=document.querySelector(i.element)),i.hintPosition=i.hintPosition||this._options.hintPosition,i.hintAnimation=i.hintAnimation||this._options.hintAnimation,null!=i.element&&this._introItems.push(i)}}else{if(1>(i=t.querySelectorAll("*[data-hint]")).length)return!1;for(t=0,e=i.length;t<e;t++){var n=i[t],s=(s=n.getAttribute("data-hintAnimation"))?"true"==s:this._options.hintAnimation;this._introItems.push({element:n,hint:n.getAttribute("data-hint"),hintPosition:n.getAttribute("data-hintPosition")||this._options.hintPosition,hintAnimation:s,tooltipClass:n.getAttribute("data-tooltipClass"),position:n.getAttribute("data-position")||this._options.tooltipPosition})}}$.call(this),document.addEventListener?(document.addEventListener("click",k.bind(this),!1),window.addEventListener("resize",S.bind(this),!0)):document.attachEvent&&(document.attachEvent("onclick",k.bind(this)),document.attachEvent("onresize",S.bind(this)))}function S(){for(var t=0,e=this._introItems.length;t<e;t++){var i=this._introItems[t];void 0!==i.targetElement&&D.call(this,i.hintPosition,i.element,i.targetElement)}}function A(t){k.call(this);var e=this._targetElement.querySelector('.introjs-hint[data-step="'+t+'"]');e&&(e.className+=" introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,t)}function L(t){(t=this._targetElement.querySelector('.introjs-hint[data-step="'+t+'"]'))&&(t.className=t.className.replace(/introjs\-hidehint/g,""))}function N(t){(t=this._targetElement.querySelector('.introjs-hint[data-step="'+t+'"]'))&&t.parentNode.removeChild(t)}function $(){var t=this,e=document.querySelector(".introjs-hints");null==e&&((e=document.createElement("div")).className="introjs-hints");for(var i=0,n=this._introItems.length;i<n;i++){var o=this._introItems[i];if(!document.querySelector('.introjs-hint[data-step="'+i+'"]')){var s=document.createElement("a");m(s),function(e,i,n){e.onclick=function(e){(e=e||window.event).stopPropagation&&e.stopPropagation(),null!=e.cancelBubble&&(e.cancelBubble=!0),B.call(t,n)}}(s,0,i),s.className="introjs-hint",o.hintAnimation||(s.className+=" introjs-hint-no-anim"),x(o.element)&&(s.className+=" introjs-fixedhint");var r=document.createElement("div");r.className="introjs-hint-dot";var a=document.createElement("div");a.className="introjs-hint-pulse",s.appendChild(r),s.appendChild(a),s.setAttribute("data-step",i),o.targetElement=o.element,o.element=s,D.call(this,o.hintPosition,s,o.targetElement),e.appendChild(s)}}document.body.appendChild(e),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function D(t,e,i){switch(i=I.call(this,i),t){default:case"top-left":e.style.left=i.left+"px",e.style.top=i.top+"px";break;case"top-right":e.style.left=i.left+i.width-20+"px",e.style.top=i.top+"px";break;case"bottom-left":e.style.left=i.left+"px",e.style.top=i.top+i.height-20+"px";break;case"bottom-right":e.style.left=i.left+i.width-20+"px",e.style.top=i.top+i.height-20+"px";break;case"middle-left":e.style.left=i.left+"px",e.style.top=i.top+(i.height-20)/2+"px";break;case"middle-right":e.style.left=i.left+i.width-20+"px",e.style.top=i.top+(i.height-20)/2+"px";break;case"middle-middle":e.style.left=i.left+(i.width-20)/2+"px",e.style.top=i.top+(i.height-20)/2+"px";break;case"bottom-middle":e.style.left=i.left+(i.width-20)/2+"px",e.style.top=i.top+i.height-20+"px";break;case"top-middle":e.style.left=i.left+(i.width-20)/2+"px",e.style.top=i.top+"px"}}function B(t){var e=document.querySelector('.introjs-hint[data-step="'+t+'"]'),i=this._introItems[t];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,e,i,t);var n=k.call(this);if(parseInt(n,10)!=t){n=document.createElement("div");var o=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div");n.className="introjs-tooltip",n.onclick=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},o.className="introjs-tooltiptext";var a=document.createElement("p");a.innerHTML=i.hint,(i=document.createElement("a")).className="introjs-button",i.innerHTML=this._options.hintButtonLabel,i.onclick=A.bind(this,t),o.appendChild(a),o.appendChild(i),s.className="introjs-arrow",n.appendChild(s),n.appendChild(o),this._currentStep=e.getAttribute("data-step"),r.className="introjs-tooltipReferenceLayer introjs-hintReference",r.setAttribute("data-step",e.getAttribute("data-step")),p.call(this,r),r.appendChild(n),document.body.appendChild(r),l.call(this,e,n,s,null,!0)}}function I(t){var e={},i=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||i.scrollTop;if(i=window.pageXOffset||n.scrollLeft||i.scrollLeft,t instanceof SVGElement)t=t.getBoundingClientRect(),e.top=t.top+o,e.width=t.width,e.height=t.height,e.left=t.left+i;else{for(e.width=t.offsetWidth,e.height=t.offsetHeight,i=o=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)o+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;e.top=i,e.left=o}return e}function P(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}var M=function(t){if("object"===n(t))return new e(t);if("string"==typeof t){if(t=document.querySelector(t))return new e(t);throw Error("There is no element with given selector.")}return new e(document.body)};return M.version="2.7.0",M.fn=e.prototype={clone:function(){return new e(this)},setOption:function(t,e){return this._options[t]=e,this},setOptions:function(t){var e,i=this._options,n={};for(e in i)n[e]=i[e];for(e in t)n[e]=t[e];return this._options=n,this},start:function(){return i.call(this,this._targetElement),this},goToStep:function(t){return this._currentStep=t-2,void 0!==this._introItems&&s.call(this),this},addStep:function(t){return this._options.steps||(this._options.steps=[]),this._options.steps.push(t),this},addSteps:function(t){if(t.length){for(var e=0;e<t.length;e++)this.addStep(t[e]);return this}},goToStepNumber:function(t){return this._currentStepNumber=t,void 0!==this._introItems&&s.call(this),this},nextStep:function(){return s.call(this),this},previousStep:function(){return r.call(this),this},exit:function(t){return a.call(this,this._targetElement,t),this},refresh:function(){if(p.call(this,document.querySelector(".introjs-helperLayer")),p.call(this,document.querySelector(".introjs-tooltipReferenceLayer")),void 0!==this._currentStep&&null!==this._currentStep){var t=document.querySelector(".introjs-helperNumberLayer"),e=document.querySelector(".introjs-arrow"),i=document.querySelector(".introjs-tooltip");l.call(this,this._introItems[this._currentStep].element,i,e,t)}return S.call(this),this},onbeforechange:function(t){if("function"!=typeof t)throw Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=t,this},onchange:function(t){if("function"!=typeof t)throw Error("Provided callback for onchange was not a function.");return this._introChangeCallback=t,this},onafterchange:function(t){if("function"!=typeof t)throw Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=t,this},oncomplete:function(t){if("function"!=typeof t)throw Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=t,this},onhintsadded:function(t){if("function"!=typeof t)throw Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=t,this},onhintclick:function(t){if("function"!=typeof t)throw Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=t,this},onhintclose:function(t){if("function"!=typeof t)throw Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=t,this},onexit:function(t){if("function"!=typeof t)throw Error("Provided callback for onexit was not a function.");return this._introExitCallback=t,this},onbeforeexit:function(t){if("function"!=typeof t)throw Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=t,this},addHints:function(){return T.call(this,this._targetElement),this},hideHint:function(t){return A.call(this,t),this},hideHints:function(){var t=this._targetElement.querySelectorAll(".introjs-hint");if(t&&0<t.length)for(var e=0;e<t.length;e++)A.call(this,t[e].getAttribute("data-step"));return this},showHint:function(t){return L.call(this,t),this},showHints:function(){var t=this._targetElement.querySelectorAll(".introjs-hint");if(t&&0<t.length)for(var e=0;e<t.length;e++)L.call(this,t[e].getAttribute("data-step"));else T.call(this,this._targetElement);return this},removeHints:function(){var t=this._targetElement.querySelectorAll(".introjs-hint");if(t&&0<t.length)for(var e=0;e<t.length;e++)N.call(this,t[e].getAttribute("data-step"));return this},removeHint:function(t){return N.call(this,t),this},showHintDialog:function(t){return B.call(this,t),this}},t.introJs=M},"object"===("undefined"==typeof exports?"undefined":n(exports))?e(exports):"function"==typeof define&&i.amdO?define(["exports"],e):e(t)}).call(window)},20670:(t,e,i)=>{"use strict";i.r(e);var n=i(19755),o=i.n(n);t=i.hmd(t),function(){i(92222),i(57327),i(69826),i(82772),i(69600),i(21249),i(47042),i(40561),i(68309),i(41539),i(74916),i(39714),i(4723),i(15306),i(23123),i(73210);var e,n=i(50008);e=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var i,s,r,a,l,c,d,u,h,p,f,m,g,v,b;function y(t,e){return g.call(t,e)}function w(t,e){var i,n,o,s,r,a,l,c,d,u,h,p=e&&e.split("/"),m=f.map,g=m&&m["*"]||{};if(t){for(r=(t=t.split("/")).length-1,f.nodeIdCompat&&b.test(t[r])&&(t[r]=t[r].replace(b,"")),"."===t[0].charAt(0)&&p&&(t=p.slice(0,p.length-1).concat(t)),d=0;d<t.length;d++)if("."===(h=t[d]))t.splice(d,1),d-=1;else if(".."===h){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;0<d&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((p||g)&&m){for(d=(i=t.split("/")).length;0<d;d-=1){if(n=i.slice(0,d).join("/"),p)for(u=p.length;0<u;u-=1)if(o=(o=m[p.slice(0,u).join("/")])&&o[n]){s=o,a=d;break}if(s)break;!l&&g&&g[n]&&(l=g[n],c=d)}!s&&l&&(s=l,a=c),s&&(i.splice(0,a,s),t=i.join("/"))}return t}function C(t,e){return function(){var i=v.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),c.apply(a,i.concat([t,e]))}}function x(t){return function(e){h[t]=e}}function E(t){if(y(p,t)){var e=p[t];delete p[t],m[t]=!0,l.apply(a,e)}if(!y(h,t)&&!y(m,t))throw new Error("No "+t);return h[t]}function _(t){var e,i=t?t.indexOf("!"):-1;return-1<i&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function k(t){return t?_(t):[]}return e&&e.requirejs||(e?s=e:e={},h={},p={},f={},m={},g=Object.prototype.hasOwnProperty,v=[].slice,b=/\.js$/,d=function(t,e){var i,n=_(t),o=n[0],s=e[1];return t=n[1],o&&(i=E(o=w(o,s))),o?t=i&&i.normalize?i.normalize(t,function(t){return function(e){return w(e,t)}}(s)):w(t,s):(o=(n=_(t=w(t,s)))[0],t=n[1],o&&(i=E(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},u={require:function(t){return C(t)},exports:function(t){var e=h[t];return void 0!==e?e:h[t]={}},module:function(t){return{id:t,uri:"",exports:h[t],config:function(t){return function(){return f&&f.config&&f.config[t]||{}}}(t)}}},l=function(t,e,i,o){var s,r,l,c,f,g,v,b=[],w=n(i);if(g=k(o=o||t),"undefined"==w||"function"==w){for(e=!e.length&&i.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if("require"===(r=(c=d(e[f],g)).f))b[f]=u.require(t);else if("exports"===r)b[f]=u.exports(t),v=!0;else if("module"===r)s=b[f]=u.module(t);else if(y(h,r)||y(p,r)||y(m,r))b[f]=E(r);else{if(!c.p)throw new Error(t+" missing "+r);c.p.load(c.n,C(o,!0),x(r),{}),b[f]=h[r]}l=i?i.apply(h[t],b):void 0,t&&(s&&s.exports!==a&&s.exports!==h[t]?h[t]=s.exports:l===a&&v||(h[t]=l))}else t&&(h[t]=i)},i=s=c=function(t,e,i,n,o){if("string"==typeof t)return u[t]?u[t](e):E(d(t,k(e)).f);if(!t.splice){if((f=t).deps&&c(f.deps,f.callback),!e)return;e.splice?(t=e,e=i,i=null):t=a}return e=e||function(){},"function"==typeof i&&(i=n,n=o),n?l(a,t,e,i):setTimeout((function(){l(a,t,e,i)}),4),c},c.config=function(t){return c(t)},i._defined=h,(r=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),y(h,t)||y(p,t)||(p[t]=[t,e,i])}).amd={jQuery:!0},e.requirejs=i,e.require=s,e.define=r),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||o();return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function i(t){var e=t.prototype,i=[];for(var n in e)"function"==typeof e[n]&&"constructor"!==n&&i.push(n);return i}function n(){this.listeners={}}e.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},e.Decorate=function(t,e){var n=i(e),o=i(t);function s(){var i=Array.prototype.unshift,n=e.prototype.constructor.length,o=t.prototype.constructor;0<n&&(i.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}e.displayName=t.displayName,s.prototype=new function(){this.constructor=s};for(var r=0;r<o.length;r++){var a=o[r];s.prototype[a]=t.prototype[a]}function l(t){var i=function(){};t in s.prototype&&(i=s.prototype[t]);var n=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,i),n.apply(this,arguments)}}for(var c=0;c<n.length;c++){var d=n[c];s.prototype[d]=l(d)}return s},n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),(i[0]._type=t)in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},e.Observable=n,e.generateChars=function(t){for(var e="",i=0;i<t;i++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var s=i[o];(s=s.substring(0,1).toLowerCase()+s.substring(1))in n||(n[s]={}),o==i.length-1&&(n[s]=t[e]),n=n[s]}delete t[e]}}return t},e.hasScroll=function(e,i){var n=t(i),o=i.style.overflowX,s=i.style.overflowY;return(o!==s||"hidden"!==s&&"visible"!==s)&&("scroll"===o||"scroll"===s||n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,(function(t){n=n.add(t)})),i=n}e.append(i)},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");return null==e&&(t.id?(e=t.id,t.setAttribute("data-select2-id",e)):(t.setAttribute("data-select2-id",++o),e=o.toString())),e},e.StoreData=function(t,i,n){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][i]=n},e.GetData=function(i,n){var o=e.GetUniqueElementId(i);return n?e.__cache[o]&&null!=e.__cache[o][n]?e.__cache[o][n]:t(i).data(n):e.__cache[o]},e.RemoveData=function(t){var i=e.GetUniqueElementId(t);null!=e.__cache[i]&&delete e.__cache[i],t.removeAttribute("data-select2-id")},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);n.append(i(o(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");0<e.length?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var o=t.map(n,(function(t){return t.id.toString()}));i.$results.find(".select2-results__option[aria-selected]").each((function(){var i=t(this),n=e.GetData(this,"data"),s=""+n.id;null!=n.element&&n.element.selected||null==n.element&&-1<t.inArray(s,o)?i.attr("aria-selected","true"):i.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.className="select2-results__option";var o={role:"option","aria-selected":"false"},s=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=i.element&&s.call(i.element,":disabled")||null==i.element&&i.disabled)&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==i.id&&delete o["aria-selected"],null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(o.role="group",o["aria-label"]=i.text,delete o["aria-selected"]),o){var a=o[r];n.setAttribute(r,a)}if(i.children){var l=t(n),c=document.createElement("strong");c.className="select2-results__group",t(c),this.template(i,c);for(var d=[],u=0;u<i.children.length;u++){var h=i.children[u],p=this.option(h);d.push(p)}var f=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});f.append(d),l.append(c),l.append(f)}else this.template(i,n);return e.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var o=this,s=i.id+"-results";this.$results.attr("id",s),i.on("results:all",(function(t){o.clear(),o.append(t.data),i.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),i.on("results:append",(function(t){o.append(t.data),i.isOpen()&&o.setClasses()})),i.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),i.on("select",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("unselect",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),i.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),i.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),i.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var i=e.GetData(t[0],"data");"true"==t.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:i})}})),i.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t);if(!(i<=0)){var n=i-1;0===t.length&&(n=0);var s=e.eq(n);s.trigger("mouseenter");var r=o.$results.offset().top,a=s.offset().top,l=o.$results.scrollTop()+(a-r);0===n?o.$results.scrollTop(0):a-r<0&&o.$results.scrollTop(l)}})),i.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var n=e.eq(i);n.trigger("mouseenter");var s=o.$results.offset().top+o.$results.outerHeight(!1),r=n.offset().top+n.outerHeight(!1),a=o.$results.scrollTop()+r-s;0===i?o.$results.scrollTop(0):s<r&&o.$results.scrollTop(a)}})),i.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),i.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),i=o.$results.get(0).scrollHeight-e+t.deltaY,n=0<t.deltaY&&e-t.deltaY<=0,s=t.deltaY<0&&i<=o.$results.height();n?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):s&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(i){var n=t(this),s=e.GetData(this,"data");"true"!==n.attr("aria-selected")?o.trigger("select",{originalEvent:i,data:s}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:i,data:s}):o.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(i){var n=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:n,element:t(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,o=this.$results.scrollTop()+(n-i),s=n-i;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(s>this.$results.outerHeight()||s<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),s=n(e,i);null==s?i.style.display="none":"string"==typeof s?i.innerHTML=o(s):t(i).append(s)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var i=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i},n.prototype.bind=function(t,e){var n=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){n.trigger("focus",t)})),this.$selection.on("blur",(function(t){n._handleBlur(t)})),this.$selection.on("keydown",(function(t){n.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){n.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){n.update(t.data)})),t.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",o),n._attachCloseHandler(t)})),t.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(t)})),t.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},n.prototype._handleBlur=function(e){var i=this;window.setTimeout((function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)}),1)},n.prototype._attachCloseHandler=function(i){t(document.body).on("mousedown.select2."+i.id,(function(i){var n=t(i.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=n[0]&&e.GetData(this,"element").select2("close")}))}))},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,i,n){function o(){o.__super__.constructor.apply(this,arguments)}return i.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var i=this;o.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",(function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||i.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n);var o=e.title||e.text;o?i.attr("title",o):i.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,i){function n(t,e){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(e,o){var s=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){s.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!s.isDisabled()){var n=t(this).parent(),o=i.GetData(n[0],"data");s.trigger("unselect",{originalEvent:e,data:o})}}))},n.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var o=t[n],s=this.selectionContainer(),r=this.display(o,s);s.append(r);var a=o.title||o.text;a&&s.attr("title",a),i.StoreData(s[0],"data",o),e.push(s)}var l=this.$selection.find(".select2-selection__rendered");i.appendMany(l,e)}},n})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(1<e.length||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,i){function n(){}return n.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){n._handleClear(t)})),e.on("keypress",(function(t){n._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();var o=i.GetData(n[0],"data"),s=this.$element.val();this.$element.val(this.placeholder.id);var r={data:o};if(this.trigger("clear",r),r.prevented)this.$element.val(s);else{for(var a=0;a<o.length;a++)if(r={data:o[a]},this.trigger("unselect",r),r.prevented)return void this.$element.val(s);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||i.which!=e.DELETE&&i.which!=e.BACKSPACE||this._handleClear(i)},n.prototype.update=function(e,n){if(e.call(this,n),!(0<this.$selection.find(".select2-selection__placeholder").length||0===n.length)){var o=this.options.get("translations").get("removeAllItems"),s=t('<span class="select2-selection__clear" title="'+o()+'">&times;</span>');i.StoreData(s[0],"data",n),this.$selection.find(".select2-selection__rendered").prepend(s)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,n,o){var s=this,r=n.id+"-results";t.call(this,n,o),n.on("open",(function(){s.$search.attr("aria-controls",r),s.$search.trigger("focus")})),n.on("close",(function(){s.$search.val(""),s.$search.removeAttr("aria-controls"),s.$search.removeAttr("aria-activedescendant"),s.$search.trigger("focus")})),n.on("enable",(function(){s.$search.prop("disabled",!1),s._transferTabIndex()})),n.on("disable",(function(){s.$search.prop("disabled",!0)})),n.on("focus",(function(t){s.$search.trigger("focus")})),n.on("results:focus",(function(t){t.data._resultId?s.$search.attr("aria-activedescendant",t.data._resultId):s.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){s.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){s._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),s.trigger("keypress",t),s._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===s.$search.val()){var n=s.$searchContainer.prev(".select2-selection__choice");if(0<n.length){var o=e.GetData(n[0],"data");s.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){s.$search.val()&&t.stopPropagation()}));var a=document.documentMode,l=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?s.$selection.off("input.search input.searchcheck"):s.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)s.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&s.handleSearch(t)}}))},n.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},n})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,i,n){var o=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];e.call(this,i,n),i.on("*",(function(e,i){if(-1!==t.inArray(e,s)){i=i||{};var n=t.Event("select2:"+e,{params:i});o.$element.trigger(n),-1!==t.inArray(e,r)&&(i.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i})),e.define("select2/diacritics",[],(function(){return{"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY","":"B",:"B",:"B",:"B",:"B",:"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F",:"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J",:"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M",:"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OE",:"OI",:"OO",:"OU","":"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P","":"Q",:"Q",:"Q",:"Q",:"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"V",:"V",:"V",:"V",:"V",:"V",:"V",:"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"f",:"f",:"f",:"f",:"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j",:"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oe",:"oi",:"ou",:"oo","":"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p","":"q",:"q",:"q",:"q",:"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,i){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+t.generateChars(4),n},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each((function(){var t=i(this),o=n.item(t);e.push(o)})),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var o=[];(t=[t]).push.apply(t,n);for(var s=0;s<t.length;s++){var r=t[s].id;-1===i.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,i(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var o=[],s=0;s<n.length;s++){var r=n[s].id;r!==t.id&&-1===i.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("input").trigger("change")}))}},n.prototype.bind=function(t,e){var i=this;(this.container=t).on("select",(function(t){i.select(t.data)})),t.on("unselect",(function(t){i.unselect(t.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},n.prototype.query=function(t,e){var n=[],o=this;this.$element.children().each((function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var s=o.item(e),r=o.matches(t,s);null!==r&&n.push(r)}})),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var n;t.children?(n=document.createElement("optgroup")).label=t.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=t.text:n.innerText=t.text,void 0!==t.id&&(n.value=t.id),t.disabled&&(n.disabled=!0),t.selected&&(n.selected=!0),t.title&&(n.title=t.title);var o=i(n),s=this._normalizeItem(t);return s.element=n,e.StoreData(n,"data",s),o},n.prototype.item=function(t){var n={};if(null!=(n=e.GetData(t[0],"data")))return n;if(t.is("option"))n={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){n={text:t.prop("label"),children:[],title:t.prop("title")};for(var o=t.children("option"),s=[],r=0;r<o.length;r++){var a=i(o[r]),l=this.item(a);s.push(l)}n.children=s}return(n=this._normalizeItem(n)).element=t[0],e.StoreData(t[0],"data",n),n},n.prototype._normalizeItem=function(t){return t!==Object(t)&&(t={id:t,text:t}),null!=(t=i.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},{selected:!1,disabled:!1},t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,i){function n(t,e){this._dataToConvert=e.get("data")||[],n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,i){return i.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){var n=this,o=this.$element.find("option"),s=o.map((function(){return n.item(i(this)).id})).get(),r=[];function a(t){return function(){return i(this).val()==t.id}}for(var l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(0<=i.inArray(c.id,s)){var d=o.filter(a(c)),u=this.item(d),h=i.extend(!0,{},c,u),p=this.option(h);d.replaceWith(p)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}r.push(f)}}return r},n})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var o=i.ajax(t);return o.then(e),o.fail(n),o}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){var n=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);function s(){var s=o.transport(o,(function(o){var s=n.processResults(o,t);n.options.get("debug")&&window.console&&console.error&&(s&&s.results&&i.isArray(s.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(s)}),(function(){"status"in s&&(0===s.status||"0"===s.status)||n.trigger("results:message",{message:"errorLoading"})}));n._request=s}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(s,this.ajaxOptions.delay)):s()},n})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,i,n){var o=n.get("tags"),s=n.get("createTag");void 0!==s&&(this.createTag=s);var r=n.get("insertTag");if(void 0!==r&&(this.insertTag=r),e.call(this,i,n),t.isArray(o))for(var a=0;a<o.length;a++){var l=o[a],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return e.prototype.query=function(t,e,i){var n=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(o,s){for(var r=o.results,a=0;a<r.length;a++){var l=r[a],c=null!=l.children&&!t({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||c)return!s&&(o.data=r,void i(o))}if(s)return!0;var d=n.createTag(e);if(null!=d){var u=n.option(d);u.attr("data-select2-tag",!0),n.addOptions([u]),n.insertTag(r,d)}o.results=r,i(o)})):t.call(this,e,i)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,i,n){var o=this;i.term=i.term||"";var s=this.tokenizer(i,this.options,(function(e){var i=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===i.id})).length){var n=o.option(i);n.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([n])}!function(t){o.trigger("select",{data:t})}(i)}));s.term!==i.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.trigger("focus")),i.term=s.term),e.call(this,i,n)},e.prototype.tokenizer=function(e,i,n,o){for(var s=n.get("tokenSeparators")||[],r=i.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<r.length;){var c=r[a];if(-1!==t.inArray(c,s)){var d=r.substr(0,a),u=l(t.extend({},i,{term:d}));null!=u?(o(u),r=r.substr(a+1)||"",a=0):a++}else a++}return{term:r}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",0<this.maximumInputLength&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(){n._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected((function(){t.call(n,e,i)}))},t.prototype._checkIfMaximumSelected=function(t,e){var i=this;this.current((function(t){var n=null!=t?t.length:0;0<i.maximumSelectionLength&&n>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function i(){}return i.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(e,i,n){var o=this,s=i.id+"-results";e.call(this,i,n),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),i.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",s),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),i.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),i.on("focus",(function(){i.isOpen()||o.$search.trigger("focus")})),i.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})),i.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},i.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.showSearch=function(t,e){return!0},i})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;0<=n;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",(function(t){n.lastParams=t,n.loading=!0})),e.on("query:append",(function(t){n.lastParams=t,n.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var i=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=i+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function i(e,i,n){this.$dropdownParent=t(n.get("dropdownParent")||document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("open",(function(){n._showDropdown(),n._attachPositioningHandler(e),n._bindContainerResultHandlers(e)})),e.on("close",(function(){n._hideDropdown(),n._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i},i.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var i=this;e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:message",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("select",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("unselect",(function(){i._positionDropdown(),i._resizeDropdown()})),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var o=this,s="scroll.select2."+n.id,r="resize.select2."+n.id,a="orientationchange.select2."+n.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(s,(function(i){var n=e.GetData(this,"select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(s+" "+r+" "+a,(function(t){o._positionDropdown(),o._resizeDropdown()}))},i.prototype._detachPositioningHandler=function(i,n){var o="scroll.select2."+n.id,s="resize.select2."+n.id,r="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+s+" "+r)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),o=null,s=this.$container.offset();s.bottom=s.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=s.top,r.bottom=s.top+r.height;var a=this.$dropdown.outerHeight(!1),l=e.scrollTop(),c=e.scrollTop()+e.height(),d=l<s.top-a,u=c>s.bottom+a,h={left:s.left,top:r.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f={top:0,left:0};(t.contains(document.body,p[0])||p[0].isConnected)&&(f=p.offset()),h.top-=f.top,h.left-=f.left,i||n||(o="below"),u||!d||i?!d&&u&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(h.top=r.top-f.top-a),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(h)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return t.prototype.showSearch=function(t,e){return!(function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}(e.data.results)<this.minimumResultsForSearch)&&t.call(this,e)},t})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",(function(t){n._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var s=t.GetData(o[0],"data");null!=s.element&&s.element.selected||null==s.element&&s.selected||this.trigger("select",{data:s})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(t){n._selectTriggered(t)})),e.on("unselect",(function(t){n._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,i,n,o,s,r,a,l,c,d,u,h,p,f,m,g,v,b,y,w,C,x,E,_,k,T,S,A){function L(){this.reset()}return L.prototype.apply=function(d){if(null==(d=t.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=p:d.dataAdapter=h,0<d.minimumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),0<d.maximumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),0<d.maximumSelectionLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null!=d.query){var u=e(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,u)}if(null!=d.initSelection){var A=e(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,A)}}if(null==d.resultsAdapter&&(d.resultsAdapter=i,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,E)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,x)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,T))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=w;else{var L=c.Decorate(w,C);d.dropdownAdapter=L}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,S)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var N=e(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,N)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,_)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=o:d.selectionAdapter=n,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var $=e(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,$)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}d.language=this._resolveLanguage(d.language),d.language.push("en");for(var D=[],B=0;B<d.language.length;B++){var I=d.language[B];-1===D.indexOf(I)&&D.push(I)}return d.language=D,d.translations=this._processTranslations(d.language,d.debug),d},L.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return u[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function i(n,o){if(""===t.trim(n.term))return o;if(o.children&&0<o.children.length){for(var s=t.extend(!0,{},o),r=o.children.length-1;0<=r;r--)null==i(n,o.children[r])&&s.children.splice(r,1);return 0<s.children.length?s:i(n,s)}var a=e(o.text).toUpperCase(),l=e(n.term).toUpperCase();return-1<a.indexOf(l)?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},L.prototype.applyFromElement=function(t,e){var i=t.language,n=this.defaults.language,o=e.prop("lang"),s=e.closest("[lang]").prop("lang"),r=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(s));return t.language=r,t},L.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var i;i=t.isArray(e)?e:[e];for(var n=[],o=0;o<i.length;o++)if(n.push(i[o]),"string"==typeof i[o]&&0<i[o].indexOf("-")){var s=i[o].split("-")[0];n.push(s)}return n},L.prototype._processTranslations=function(e,i){for(var n=new d,o=0;o<e.length;o++){var s=new d,r=e[o];if("string"==typeof r)try{s=d.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,s=d.loadPath(r)}catch(e){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else s=t.isPlainObject(r)?new d(r):r;n.extend(s)}return n},L.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var o=c._convertData(n);t.extend(!0,this.defaults,o)},new L})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,i,n){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),null!=o&&(this.options=i.applyFromElement(this.options,o)),this.options=i.apply(this.options),o&&o.is("input")){var s=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,s)}}return o.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var o={};function s(t,e){return e.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var a=t[0].attributes[r].name,l="data-";if(a.substr(0,l.length)==l){var c=a.substring(l.length),d=n.GetData(t[0],c);o[c.replace(/-([a-z])/g,s)]=d}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var u=e.extend(!0,{},n.GetData(t[0]),o);for(var h in u=n._convertData(u))-1<e.inArray(h,i)||(e.isPlainObject(this.options[h])?e.extend(this.options[h],u[h]):this.options[h]=u[h]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,i,n){var o=function t(n,o){null!=i.GetData(n[0],"select2")&&i.GetData(n[0],"select2").destroy(),this.$element=n,this.id=this._generateId(n),o=o||{},this.options=new e(o,n),t.__super__.constructor.call(this);var s=n.attr("tabindex")||0;i.StoreData(n[0],"old-tabindex",s),n.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(n,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(n,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var c=this.options.get("dropdownAdapter");this.dropdown=new c(n,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var d=this.options.get("resultsAdapter");this.results=new d(n,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){u.trigger("selection:update",{data:t})})),n.addClass("select2-hidden-accessible"),n.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(n[0],"select2",this),n.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"!=e)return"computedstyle"!=e?e:window.getComputedStyle(t[0]).width;var s=t.attr("style");if("string"!=typeof s)return null;for(var r=s.split(";"),a=0,l=r.length;a<l;a+=1){var c=r[a].replace(/\s/g,"").match(i);if(null!==c&&1<=c.length)return c[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e((function(e){t._syncA(),t._syncS(null,e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,o){-1===t.inArray(n,i)&&e.trigger(n,o)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(i){t.trigger("results:all",{data:i,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(i){t.trigger("results:append",{data:i,query:e})}))})),this.on("keypress",(function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(e),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e,i){var n=!1,o=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(i)if(i.addedNodes&&0<i.addedNodes.length)for(var s=0;s<i.addedNodes.length;s++)i.addedNodes[s].selected&&(n=!0);else i.removedNodes&&0<i.removedNodes.length?n=!0:t.isArray(i)&&t.each(i,(function(t,e){if(o._isChangeMutation(t,e))return!(n=!0)}));else n=!0;return n}},o.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e),n=this;i&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},o.prototype.trigger=function(t,e){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in n){var s=n[t],r={prevented:!1,name:t,args:e};if(i.call(this,s,r),r.prevented)return void(e.prevented=!0)}i.call(this,t,e)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,(function(t){return t.toString()}))),this.$element.val(i).trigger("input").trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,i,o,s){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==n(e=e||{}))return this.each((function(){var n=t.extend(!0,{},e);new i(t(this),n)})),this;if("string"!=typeof e)throw new Error("Invalid arguments for Select2: "+e);var o,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=s.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),o=t[e].apply(t,a)})),-1<t.inArray(e,r)?this:o}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=o),i})),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i},"function"==typeof define&&i.amdO?define(["jquery"],e):"object"==n(t)&&t.exports?t.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?i(19755):i(19755)(t)),e(n),n}:e(jQuery)}.call(window)},52761:(t,e,i)=>{"use strict";i.r(e);var n,o;i(19755);(function(){i(57327),i(69826),i(82772),i(21249),i(47042),i(68309),i(41539),i(24603),i(74916),i(39714),i(4723),i(15306),i(23123),i(73210),i(50915),i(42125),i(78830),i(29254),i(7397),i(60086),i(80623);var t=i(50008);void 0===n&&(n={}),n.en=o={bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",link:"Link",img:"Insert image",sup:"Superscript",sub:"Subscript",justifyleft:"Align left",justifycenter:"Align center",justifyright:"Align right",table:"Insert table",bullist:" Unordered list",numlist:"1. Ordered list",quote:"Quote",offtop:"Offtop",code:"Code",spoiler:"Spoiler",fontcolor:"Font color",fontsize:"Font size",fontfamily:"Font family",fs_verysmall:"Very small",fs_small:"Small",fs_normal:"Normal",fs_big:"Big",fs_verybig:"Very big",smilebox:"Insert emoticon",video:"Insert YouTube",removeFormat:"Remove Format",modal_link_title:"Insert link",modal_link_text:"Display text",modal_link_url:"URL",modal_email_text:"Display email",modal_email_url:"Email",modal_link_tab1:"Insert URL",modal_img_title:"Insert image",modal_img_tab1:"Insert URL",modal_img_tab2:"Upload image",modal_imgsrc_text:"Enter image URL",modal_img_btn:"Choose file",add_attach:"Add Attachment",modal_video_text:"Enter the URL of the video",close:"Close",save:"Save",cancel:"Cancel",remove:"Delete",validation_err:"The entered data is invalid",error_onupload:"Error during file upload",fileupload_text1:"Drop file here",fileupload_text2:"or",loading:"Loading",auto:"Auto",views:"Views",downloads:"Downloads",sm1:"Smile",sm2:"Laughter",sm3:"Wink",sm4:"Thank you",sm5:"Scold",sm6:"Shock",sm7:"Angry",sm8:"Pain",sm9:"Sick"},!1,function(e){e.wysibb=function(t,i){e(t).data("wbb",this),i&&i.deflang&&void 0!==n[i.deflang]&&(o=n[i.deflang]),i&&i.lang&&void 0!==n[i.lang]&&(o=n[i.lang]),this.txtArea=t,this.$txtArea=e(t);this.$txtArea.attr("id")||this.setUID(this.txtArea);this.options={bbmode:!1,onlyBBmode:!1,themeName:"default",bodyClass:"",lang:"ru",tabInsert:!0,imgupload:!1,img_uploadurl:"/iupload.php",img_maxwidth:800,img_maxheight:800,hotkeys:!0,showHotkeys:!0,autoresize:!0,resize_maxheight:800,loadPageStyles:!0,traceTextarea:!0,smileConversion:!0,buttons:"bold,italic,underline,strike,sup,sub,|,img,video,link,|,bullist,numlist,|,fontcolor,fontsize,fontfamily,|,justifyleft,justifycenter,justifyright,|,quote,code,table,removeFormat",allButtons:{bold:{title:o.bold,buttonHTML:'<span class="fonticon ve-tlb-bold1"></span>',excmd:"bold",hotkey:"ctrl+b",transform:{"<b>{SELTEXT}</b>":"[b]{SELTEXT}[/b]","<strong>{SELTEXT}</strong>":"[b]{SELTEXT}[/b]"}},italic:{title:o.italic,buttonHTML:'<span class="fonticon ve-tlb-italic1"></span>',excmd:"italic",hotkey:"ctrl+i",transform:{"<i>{SELTEXT}</i>":"[i]{SELTEXT}[/i]","<em>{SELTEXT}</em>":"[i]{SELTEXT}[/i]"}},underline:{title:o.underline,buttonHTML:'<span class="fonticon ve-tlb-underline1"></span>',excmd:"underline",hotkey:"ctrl+u",transform:{"<u>{SELTEXT}</u>":"[u]{SELTEXT}[/u]"}},strike:{title:o.strike,buttonHTML:'<span class="fonticon fi-stroke1 ve-tlb-strike1"></span>',excmd:"strikeThrough",transform:{"<strike>{SELTEXT}</strike>":"[s]{SELTEXT}[/s]","<s>{SELTEXT}</s>":"[s]{SELTEXT}[/s]"}},sup:{title:o.sup,buttonHTML:'<span class="fonticon ve-tlb-sup1"></span>',excmd:"superscript",transform:{"<sup>{SELTEXT}</sup>":"[sup]{SELTEXT}[/sup]"}},sub:{title:o.sub,buttonHTML:'<span class="fonticon ve-tlb-sub1"></span>',excmd:"subscript",transform:{"<sub>{SELTEXT}</sub>":"[sub]{SELTEXT}[/sub]"}},link:{title:o.link,buttonHTML:'<span class="fonticon ve-tlb-link1"></span>',hotkey:"ctrl+shift+2",modal:{title:o.modal_link_title,width:"500px",tabs:[{input:[{param:"SELTEXT",title:o.modal_link_text,type:"div"},{param:"URL",title:o.modal_link_url,validation:"^http(s)?://"}]}]},transform:{'<a href="{URL}">{SELTEXT}</a>':"[url={URL}]{SELTEXT}[/url]",'<a href="{URL}">{URL}</a>':"[url]{URL}[/url]"}},img:{title:o.img,buttonHTML:'<span class="fonticon ve-tlb-img1"></span>',hotkey:"ctrl+shift+1",addWrap:!0,modal:{title:o.modal_img_title,width:"600px",tabs:[{title:o.modal_img_tab1,input:[{param:"SRC",title:o.modal_imgsrc_text,validation:"^http(s)?://.*?.(jpg|png|gif|jpeg)$"}]}],onLoad:this.imgLoadModal},transform:{'<img src="{SRC}" />':"[img]{SRC}[/img]",'<img src="{SRC}" width="{WIDTH}" height="{HEIGHT}"/>':"[img width={WIDTH},height={HEIGHT}]{SRC}[/img]"}},bullist:{title:o.bullist,buttonHTML:'<span class="fonticon ve-tlb-list1"></span>',excmd:"insertUnorderedList",transform:{"<ul>{SELTEXT}</ul>":"[list]{SELTEXT}[/list]","<li>{SELTEXT}</li>":"[*]{SELTEXT}[/*]"}},numlist:{title:o.numlist,buttonHTML:'<span class="fonticon ve-tlb-numlist1"></span>',excmd:"insertOrderedList",transform:{"<ol>{SELTEXT}</ol>":"[list=1]{SELTEXT}[/list]","<li>{SELTEXT}</li>":"[*]{SELTEXT}[/*]"}},quote:{title:o.quote,buttonHTML:'<span class="fonticon ve-tlb-quote1"></span>',hotkey:"ctrl+shift+3",transform:{"<blockquote>{SELTEXT}</blockquote>":"[quote]{SELTEXT}[/quote]"}},code:{title:o.code,buttonText:"[code]",hotkey:"ctrl+shift+4",onlyClearText:!0,transform:{"<code>{SELTEXT}</code>":"[code]{SELTEXT}[/code]"}},offtop:{title:o.offtop,buttonText:"offtop",transform:{'<span style="font-size:10px;color:#ccc">{SELTEXT}</span>':"[offtop]{SELTEXT}[/offtop]"}},fontcolor:{type:"colorpicker",title:o.fontcolor,excmd:"foreColor",valueBBname:"color",subInsert:!0,colors:"#000000,#444444,#666666,#999999,#b6b6b6,#cccccc,#d8d8d8,#efefef,#f4f4f4,#ffffff,-, \t\t\t\t\t\t\t #ff0000,#980000,#ff7700,#ffff00,#00ff00,#00ffff,#1e84cc,#0000ff,#9900ff,#ff00ff,-, \t\t\t\t\t\t\t #f4cccc,#dbb0a7,#fce5cd,#fff2cc,#d9ead3,#d0e0e3,#c9daf8,#cfe2f3,#d9d2e9,#ead1dc, \t\t\t\t\t\t\t #ea9999,#dd7e6b,#f9cb9c,#ffe599,#b6d7a8,#a2c4c9,#a4c2f4,#9fc5e8,#b4a7d6,#d5a6bd, \t\t\t\t\t\t\t #e06666,#cc4125,#f6b26b,#ffd966,#93c47d,#76a5af,#6d9eeb,#6fa8dc,#8e7cc3,#c27ba0, \t\t\t\t\t\t\t #cc0000,#a61c00,#e69138,#f1c232,#6aa84f,#45818e,#3c78d8,#3d85c6,#674ea7,#a64d79, \t\t\t\t\t\t\t #900000,#85200C,#B45F06,#BF9000,#38761D,#134F5C,#1155Cc,#0B5394,#351C75,#741B47, \t\t\t\t\t\t\t #660000,#5B0F00,#783F04,#7F6000,#274E13,#0C343D,#1C4587,#073763,#20124D,#4C1130",transform:{'<font color="{COLOR}">{SELTEXT}</font>':"[color={COLOR}]{SELTEXT}[/color]"}},table:{type:"table",title:o.table,cols:10,rows:10,cellwidth:20,transform:{"<td>{SELTEXT}</td>":"[td]{SELTEXT}[/td]","<tr>{SELTEXT}</tr>":"[tr]{SELTEXT}[/tr]",'<table class="wbb-table">{SELTEXT}</table>':"[table]{SELTEXT}[/table]"},skipRules:!0},fontsize:{type:"select",title:o.fontsize,options:"fs_verysmall,fs_small,fs_normal,fs_big,fs_verybig"},fontfamily:{type:"select",title:o.fontfamily,excmd:"fontName",valueBBname:"font",options:[{title:"Arial",exvalue:"Arial"},{title:"Comic Sans MS",exvalue:"Comic Sans MS"},{title:"Courier New",exvalue:"Courier New"},{title:"Georgia",exvalue:"Georgia"},{title:"Lucida Sans Unicode",exvalue:"Lucida Sans Unicode"},{title:"Tahoma",exvalue:"Tahoma"},{title:"Times New Roman",exvalue:"Times New Roman"},{title:"Trebuchet MS",exvalue:"Trebuchet MS"},{title:"Verdana",exvalue:"Verdana"}],transform:{'<font face="{FONT}">{SELTEXT}</font>':"[font={FONT}]{SELTEXT}[/font]"}},smilebox:{type:"smilebox",title:o.smilebox,buttonHTML:'<span class="fonticon ve-tlb-smilebox1"></span>'},justifyleft:{title:o.justifyleft,buttonHTML:'<span class="fonticon ve-tlb-textleft1"></span>',groupkey:"align",transform:{'<p style="text-align:left">{SELTEXT}</p>':"[left]{SELTEXT}[/left]"}},justifyright:{title:o.justifyright,buttonHTML:'<span class="fonticon ve-tlb-textright1"></span>',groupkey:"align",transform:{'<p style="text-align:right">{SELTEXT}</p>':"[right]{SELTEXT}[/right]"}},justifycenter:{title:o.justifycenter,buttonHTML:'<span class="fonticon ve-tlb-textcenter1"></span>',groupkey:"align",transform:{'<p style="text-align:center">{SELTEXT}</p>':"[center]{SELTEXT}[/center]"}},video:{title:o.video,buttonHTML:'<span class="fonticon ve-tlb-video1"></span>',modal:{title:o.video,width:"600px",tabs:[{title:o.video,input:[{param:"SRC",title:o.modal_video_text}]}],onSubmit:function(t,e,i){var n,o=this.$modal.find('input[name="SRC"]').val();if(o&&(o=o.replace(/^\s+/,"").replace(/\s+$/,"")),(n=-1!=o.indexOf("youtu.be")?o.match(/^http[s]*:\/\/youtu\.be\/([a-z0-9_-]+)/i):o.match(/^http[s]*:\/\/www\.youtube\.com\/watch\?.*?v=([a-z0-9_-]+)/i))&&2==n.length){var s=n[1];this.insertAtCursor(this.getCodeByCommand(t,{src:s}))}return this.closeModal(),this.updateUI(),!1}},transform:{'<iframe src="http://www.youtube.com/embed/{SRC}" width="640" height="480" frameborder="0"></iframe>':"[video]{SRC}[/video]"}},fs_verysmall:{title:o.fs_verysmall,buttonText:"fs1",excmd:"fontSize",exvalue:"1",transform:{'<font size="1">{SELTEXT}</font>':"[size=50]{SELTEXT}[/size]"}},fs_small:{title:o.fs_small,buttonText:"fs2",excmd:"fontSize",exvalue:"2",transform:{'<font size="2">{SELTEXT}</font>':"[size=85]{SELTEXT}[/size]"}},fs_normal:{title:o.fs_normal,buttonText:"fs3",excmd:"fontSize",exvalue:"3",transform:{'<font size="3">{SELTEXT}</font>':"[size=100]{SELTEXT}[/size]"}},fs_big:{title:o.fs_big,buttonText:"fs4",excmd:"fontSize",exvalue:"4",transform:{'<font size="4">{SELTEXT}</font>':"[size=150]{SELTEXT}[/size]"}},fs_verybig:{title:o.fs_verybig,buttonText:"fs5",excmd:"fontSize",exvalue:"6",transform:{'<font size="6">{SELTEXT}</font>':"[size=200]{SELTEXT}[/size]"}},removeformat:{title:o.removeFormat,buttonHTML:'<span class="fonticon ve-tlb-removeformat1"></span>',excmd:"removeFormat"}},systr:{"<br/>":"\n",'<span class="wbbtab">{SELTEXT}</span>':"   {SELTEXT}"},customRules:{td:[["[td]{SELTEXT}[/td]",{seltext:{rgx:!1,attr:!1,sel:!1}}]],tr:[["[tr]{SELTEXT}[/tr]",{seltext:{rgx:!1,attr:!1,sel:!1}}]],table:[["[table]{SELTEXT}[/table]",{seltext:{rgx:!1,attr:!1,sel:!1}}]]},smileList:[],attrWrap:["src","color","href"]},this.inited=this.options.onlyBBmode,this.options.themePrefix||e("link").each(e.proxy((function(t,i){var n=e(i).get(0).href.match(/(.*\/)(.*)\/wbbtheme\.css.*$/);null!==n&&(this.options.themeName=n[2],this.options.themePrefix=n[1])}),this)),"undefined"!=typeof WBBPRESET&&(WBBPRESET.allButtons&&e.each(WBBPRESET.allButtons,e.proxy((function(t,e){e.transform&&this.options.allButtons[t]&&delete this.options.allButtons[t].transform}),this)),e.extend(!0,this.options,WBBPRESET)),i&&i.allButtons&&e.each(i.allButtons,e.proxy((function(t,e){e.transform&&this.options.allButtons[t]&&delete this.options.allButtons[t].transform}),this)),e.extend(!0,this.options,i),this.init()},e.wysibb.prototype={lastid:1,init:function(){var t;e.log("Init",this),this.isMobile=(t=navigator.userAgent||navigator.vendor||window.opera,void/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)),!0===this.options.onlyBBmode&&(this.options.bbmode=!0),this.controllers=[],this.options.buttons=this.options.buttons.toLowerCase(),this.options.buttons=this.options.buttons.split(","),this.options.allButtons._systr={},this.options.allButtons._systr.transform=this.options.systr,this.smileFind(),this.initTransforms(),this.build(),this.initModal(),!0!==this.options.hotkeys||this.isMobile||this.initHotkeys(),this.options.smileList&&this.options.smileList.length>0&&this.options.smileList.sort((function(t,e){return e.bbcode.length-t.bbcode.length})),this.$txtArea.parents("form").bind("submit",e.proxy((function(){return this.sync(),!0}),this)),this.$txtArea.parents("form").find("input[id*='preview'],input[id*='submit'],input[class*='preview'],input[class*='submit'],input[name*='preview'],input[name*='submit']").bind("mousedown",e.proxy((function(){this.sync(),setTimeout(e.proxy((function(){!1===this.options.bbmode&&this.$txtArea.removeAttr("wbbsync").val("")}),this),1e3)}),this)),this.options.initCallback&&this.options.initCallback.call(this),e.log(this)},initTransforms:function(){e.log("Create rules for transform HTML=>BB");var t=this.options;t.rules||(t.rules={}),t.groups||(t.groups={});var i=t.buttons.slice();i.push("_systr");for(var n=0;n<i.length;n++){var o=t.allButtons[i[n]];if(o){if(o.en=!0,o.simplebbcode&&e.isArray(o.simplebbcode)&&2==o.simplebbcode.length&&(o.bbcode=o.html=o.simplebbcode[0]+"{SELTEXT}"+o.simplebbcode[1],o.transform&&delete o.transform,o.modal&&delete o.modal),"select"==o.type&&"string"==typeof o.options){var s=o.options.split(",");e.each(s,(function(t,n){-1==e.inArray(n,i)&&i.push(n)}))}if(o.transform&&!0!==o.skipRules){var r=e.extend({},o.transform);for(var a in r){var l=a,c=r[a];if(o.bbSelector||(o.bbSelector=[]),-1==e.inArray(c,o.bbSelector)&&o.bbSelector.push(c),!1===this.options.onlyBBmode){a=this.wrapAttrs(a);var d=e(document.createElement("DIV")).append(e(this.elFromString(a,document))),u=this.filterByNode(d.children());if("div"==u||void 0!==t.rules[u]){e.log("create unique selector: "+u),this.setUID(d.children()),u=this.filterByNode(d.children()),e.log("New rootSelector: "+u);var h=d.html();h=this.unwrapAttrs(h);var p=this.unwrapAttrs(a);o.transform[h]=c,delete o.transform[p],a=h,l=h}o.excmd||(o.rootSelector||(o.rootSelector=[]),o.rootSelector.push(u)),void 0===t.rules[u]&&(t.rules[u]=[]);var f={};if(a.match(/\{\S+?\}/)){d.find("*").each(e.proxy((function(t,i){var n=this.getAttributeList(i);e.each(n,e.proxy((function(t,n){var o=e(i).attr(n);"_"==n.substr(0,1)&&(n=n.substr(1));var s=o.match(/\{\S+?\}/g);if(s)for(var r=0;r<s.length;r++){var a=s[r].substr(1,s[r].length-2);a=a.replace(this.getValidationRGX(a),"");var l=this.relFilterByNode(i,u),c=o!=s[r]&&this.getRegexpReplace(o,s[r]);f[a.toLowerCase()]={sel:!!l&&e.trim(l),attr:n,rgx:c}}}),this));var o=[];e(i).is("iframe")||e(i).contents().filter((function(){return 3===this.nodeType})).each(e.proxy((function(t,n){var s=n.textContent||n.data;if(void 0===s)return!0;var r=s.match(/\{\S+?\}/g);if(r)for(var a=0;a<r.length;a++){var l=r[a].substr(1,r[a].length-2);l=l.replace(this.getValidationRGX(l),"");var c=this.relFilterByNode(i,u),d=s!=r[a]&&this.getRegexpReplace(s,r[a]),h=!!c&&e.trim(c);if(e.inArray(h,o)>-1||e(n).parent().contents().length>1){var p=e("<span>").html("{"+l+"}");this.setUID(p,"wbb");var m=s.indexOf(l)+l.length+1,g=s.substr(m,s.length-m);n.data=s.substr(0,s.indexOf(l)-1),e(n).after(this.elFromString(g,document)).after(p),h=(h?h+" ":"")+this.filterByNode(p),d=!1}f[l.toLowerCase()]={sel:h,attr:!1,rgx:d},o[o.length]=h}}),this)),o=null}),this));var m=d.html();l!=(m=this.unwrapAttrs(m))&&(delete o.transform[l],o.transform[m]=c,a=m)}t.rules[u].push([c,f]),!0===o.onlyClearText&&(this.cleartext||(this.cleartext={}),this.cleartext[u]=i[n]),o.groupkey&&(t.groups[o.groupkey]||(t.groups[o.groupkey]=[]),t.groups[o.groupkey].push(u))}}o.rootSelector&&this.sortArray(o.rootSelector,-1);var g=e.map(o.transform,(function(t,e){return e})).sort((function(t,e){return(e[0]||"").length-(t[0]||"").length}));o.bbcode=o.transform[g[0]],o.html=g[0]}}}for(var v in this.options.btnlist=i,e.extend(t.rules,this.options.customRules),t.srules={},this.options.smileList&&e.each(t.smileList,e.proxy((function(i,n){var o=e(this.strf(n.img,t)),s=this.filterByNode(o);t.srules[s]=[n.bbcode,n.img]}),this)),t.rules)this.options.rules[v].sort((function(t,e){return e[0].length-t[0].length}));for(var v in this.rsellist=[],this.options.rules)this.rsellist.push(v);this.sortArray(this.rsellist,-1)},build:function(){if(e.log("Build editor"),this.$editor=e("<div>").addClass("wysibb"),this.isMobile&&this.$editor.addClass("wysibb-mobile"),this.options.direction&&this.$editor.css("direction",this.options.direction),this.$editor.insertAfter(this.txtArea).append(this.txtArea),this.startHeight=this.$txtArea.outerHeight(),this.$txtArea.addClass("wysibb-texarea"),this.buildToolbar(),this.$txtArea.wrap('<div class="wysibb-text">'),!1===this.options.onlyBBmode){var t=this.options.minheight||this.$txtArea.outerHeight(),i=(this.options.resize_maxheight,!0===this.options.autoresize?this.options.resize_maxheight:t);if(this.$body=e(this.strf('<div class="wysibb-text-editor" style="max-height:{maxheight}px;min-height:{height}px"></div>',{maxheight:i,height:t})).insertAfter(this.$txtArea),this.body=this.$body[0],this.$txtArea.hide(),t>32&&this.$toolbar.css("max-height",t),e.log("WysiBB loaded"),this.$body.addClass("wysibb-body").addClass(this.options.bodyClass),this.options.direction&&this.$body.css("direction",this.options.direction),"contentEditable"in this.body){this.body.contentEditable=!0;try{document.execCommand("StyleWithCSS",!1,!1),this.$body.append("<span></span>")}catch(t){}}else this.options.onlyBBmode=this.options.bbmode=!0;this.txtArea.value.length>0&&this.txtAreaInitContent(),this.$body.bind("keydown",e.proxy((function(t){if(86==t.which&&(1==t.ctrlKey||1==t.metaKey)||45==t.which&&(1==t.shiftKey||1==t.metaKey))return this.$pasteBlock||(this.saveRange(),this.$pasteBlock=e(this.elFromString('<div style="opacity:0;" contenteditable="true">\ufeff</div>')),this.$pasteBlock.appendTo(this.body),setTimeout(e.proxy((function(){this.clearPaste(this.$pasteBlock);var t="<span>"+this.$pasteBlock.html()+"</span>";this.$body.attr("contentEditable","true"),this.$pasteBlock.blur().remove(),this.body.focus(),this.cleartext&&(e.log("Check if paste to clearText Block"),this.isInClearTextBlock()&&(t=this.toBB(t).replace(/\n/g,"<br/>").replace(/\s{3}/g,'<span class="wbbtab"></span>'))),t=t.replace(/\t/g,'<span class="wbbtab"></span>'),this.selectRange(this.lastRange),this.insertAtCursor(t,!1),this.lastRange=!1,this.$pasteBlock=!1}),this),1),this.selectNode(this.$pasteBlock[0])),!0}),this)),this.$body.bind("keydown",e.proxy((function(t){13==t.which&&(this.isContain(this.getSelectNode(),"li")||(t.preventDefault&&t.preventDefault(),this.checkForLastBR(this.getSelectNode()),this.insertAtCursor("<br/>",!1)))}),this)),!0===this.options.tabInsert&&this.$body.bind("keydown",e.proxy(this.pressTab,this)),this.$body.bind("mouseup keyup",e.proxy(this.updateUI,this)),this.$body.bind("mousedown",e.proxy((function(t){this.clearLastRange(),this.checkForLastBR(t.target)}),this)),!0===this.options.traceTextarea&&(e(document).bind("mousedown",e.proxy(this.traceTextareaEvent,this)),this.$txtArea.val("")),!0===this.options.hotkeys&&this.$body.bind("keydown",e.proxy(this.presskey,this)),!0===this.options.smileConversion&&this.$body.bind("keyup",e.proxy(this.smileConversion,this)),this.inited=!0,!0===this.options.autoresize&&(this.$bresize=e(this.elFromString('<div class="bottom-resize-line"></div>')).appendTo(this.$editor).wdrag({scope:this,axisY:!0,height:t})),this.imgListeners()}this.$txtArea.bind("mouseup keyup",e.proxy((function(){clearTimeout(this.uitimer),this.uitimer=setTimeout(e.proxy(this.updateUI,this),100)}),this)),!0===this.options.hotkeys&&e(document).bind("keydown",e.proxy(this.presskey,this))},buildToolbar:function(){if(!1===this.options.toolbar)return!1;var t;this.$toolbar=e("<div>").addClass("wysibb-toolbar").prependTo(this.$editor),e.each(this.options.buttons,e.proxy((function(i,n){var o=this.options.allButtons[n];0!=i&&"|"!=n&&"-"!=n||("-"==n&&this.$toolbar.append("<div>"),t=e('<div class="wysibb-toolbar-container">').appendTo(this.$toolbar)),o&&("colorpicker"==o.type?this.buildColorpicker(t,n,o):"table"==o.type?this.buildTablepicker(t,n,o):"select"==o.type?this.buildSelect(t,n,o):"smilebox"==o.type?this.buildSmilebox(t,n,o):this.buildButton(t,n,o))}),this)),this.$toolbar.find(".btn-tooltip").hover((function(){e(this).parent().css("overflow","hidden")}),(function(){e(this).parent().css("overflow","visible")}));var i=e(document.createElement("div")).addClass("wysibb-toolbar-container modeSwitch").html('<div class="wysibb-toolbar-btn mswitch" unselectable="on"><span class="btn-inner modesw" unselectable="on">[bbcode]</span></div>').appendTo(this.$toolbar);1==this.options.bbmode&&i.children(".wysibb-toolbar-btn").addClass("on"),!1===this.options.onlyBBmode&&i.children(".wysibb-toolbar-btn").click(e.proxy((function(t){e(t.currentTarget).toggleClass("on"),this.modeSwitch()}),this))},buildButton:function(i,n,o){"object"!=t(i)&&(i=this.$toolbar);var s=o.buttonHTML?e(this.strf(o.buttonHTML,this.options)).addClass("btn-inner"):this.strf('<span class="btn-inner btn-text">{text}</span>',{text:o.buttonText.replace(/</g,"&lt;")}),r=!0===this.options.hotkeys&&!0===this.options.showHotkeys&&o.hotkey?' <span class="tthotkey">['+o.hotkey+"]</span>":"",a=e('<div class="wysibb-toolbar-btn wbb-'+n+'">').appendTo(i).append(s).append(this.strf('<span class="btn-tooltip">{title}<ins/>{hotkey}</span>',{title:o.title,hotkey:r}));this.controllers.push(a),a.bind("queryState",e.proxy((function(t){this.queryState(n)?e(t.currentTarget).addClass("on"):e(t.currentTarget).removeClass("on")}),this)),o.onClick?a.mousedown(o.onClick.bind(this)):a.mousedown(e.proxy((function(t){t.preventDefault(),this.execCommand(n,o.exvalue||!1),e(t.currentTarget).trigger("queryState")}),this))},buildColorpicker:function(t,i,n){var s=e('<div class="wysibb-toolbar-btn wbb-dropdown wbb-cp">').appendTo(t).append('<div class="ve-tlb-colorpick"><span class="fonticon"></span><span class="cp-line"></span></div><ins class="fonticon ar"></ins>').append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:n.title})),r=s.find(".cp-line"),a=e('<div class="wbb-list">').appendTo(s);a.append('<div class="nc">'+o.auto+"</div>");for(var l=n.colors?n.colors.split(","):[],c=0;c<l.length;c++)l[c]=e.trim(l[c]),"-"==l[c]?a.append('<span class="pl"></span>'):a.append(this.strf('<div class="sc" style="background:{color}" title="{color}"></div>',{color:l[c]}));var d=e(document.body).css("color");this.controllers.push(s),s.bind("queryState",e.proxy((function(t){r.css("background-color",d);var e=this.queryState(i,!0);e&&(r.css("background-color",this.options.bbmode?e.color:e),s.find(".ve-tlb-colorpick span.fonticon").css("color",this.options.bbmode?e.color:e))}),this)),s.mousedown(e.proxy((function(t){t.preventDefault(),this.dropdownclick(".wbb-cp",".wbb-list",t)}),this)),s.find(".sc").mousedown(e.proxy((function(t){t.preventDefault(),this.selectLastRange();var n=e(t.currentTarget).attr("title");this.execCommand(i,n),s.trigger("queryState")}),this)),s.find(".nc").mousedown(e.proxy((function(t){t.preventDefault(),this.selectLastRange(),this.execCommand(i,d),s.trigger("queryState")}),this)),s.mousedown((function(t){t.preventDefault&&t.preventDefault()}))},buildTablepicker:function(t,i,n){var o=e('<div class="wysibb-toolbar-btn wbb-dropdown wbb-tbl">').appendTo(t).append('<span class="btn-inner fonticon ve-tlb-table1"></span><ins class="fonticon ar"></ins>').append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:n.title})),s=e('<div class="wbb-list">').appendTo(o),r=e("<div>").css({position:"relative","box-sizing":"border-box"}).appendTo(s),a=n.rows||10,l=n.cols||10,c=a*l;r.css("height",a*n.cellwidth+2+"px");for(var d=1;d<=l;d++)for(var u=1;u<=a;u++){var h='<div class="tbl-sel" style="width:'+100*d/l+"%;height:"+100*u/a+"%;z-index:"+--c+'" title="'+u+","+d+'"></div>';r.append(h)}o.find(".tbl-sel").mousedown(e.proxy((function(t){t.preventDefault();for(var i=e(t.currentTarget).attr("title").split(","),n=this.options.bbmode?"[table]":'<table class="wbb-table" cellspacing="5" cellpadding="0">',o=1;o<=i[0];o++){n+=this.options.bbmode?" [tr]\n":"<tr>";for(var s=1;s<=i[1];s++)n+=this.options.bbmode?"  [td][/td]\n":"<td>\ufeff</td>";n+=this.options.bbmode?"[/tr]\n":"</tr>"}n+=this.options.bbmode?"[/table]":"</table>",this.insertAtCursor(n)}),this)),o.mousedown(e.proxy((function(t){t.preventDefault(),this.dropdownclick(".wbb-tbl",".wbb-list",t)}),this))},buildSelect:function(t,i,n){for(var o=e('<div class="wysibb-toolbar-btn wbb-select wbb-'+i+'">').appendTo(t).append(this.strf('<span class="val">{title}</span><ins class="fonticon sar"></ins>',n)).append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:n.title})),s=e('<div class="wbb-list">').appendTo(o),r=o.find("span.val"),a=e.isArray(n.options)?n.options:n.options.split(","),l=this.isMobile?e("<select>").addClass("wbb-selectbox"):"",c=0;c<a.length;c++){var d=a[c];if("string"==typeof d){var u=this.options.allButtons[d];u&&(u.html?e("<span>").addClass("option").attr("oid",d).attr("cmdvalue",u.exvalue).appendTo(s).append(this.strf(u.html,{seltext:u.title})):s.append(this.strf('<span class="option" oid="'+d+'" cmdvalue="'+u.exvalue+'">{title}</span>',u)),this.isMobile&&l.append(e("<option>").attr("oid",d).attr("cmdvalue",u.exvalue).append(u.title)))}else{var h={seltext:d.title};h[n.valueBBname]=d.exvalue,e("<span>").addClass("option").attr("oid",i).attr("cmdvalue",d.exvalue).appendTo(s).append(this.strf(n.html,h)),this.isMobile&&l.append(e("<option>").attr("oid",i).attr("cmdvalue",d.exvalue).append(d.exvalue))}}this.isMobile&&(l.appendTo(t),this.controllers.push(l),l.bind("queryState",e.proxy((function(t){l.find("option").each(e.proxy((function(t,i){var n=e(i),o=this.queryState(n.attr("oid"),!0),s=n.attr("cmdvalue");if(s&&o==n.attr("cmdvalue")||!s&&o)return n.prop("selected",!0),!1}),this))}),this)),l.change(e.proxy((function(t){t.preventDefault();var i=e(t.currentTarget).find(":selected"),n=i.attr("oid"),o=i.attr("cmdvalue"),s=this.options.allButtons[n];this.execCommand(n,s.exvalue||o||!1),e(t.currentTarget).trigger("queryState")}),this))),this.controllers.push(o),o.bind("queryState",e.proxy((function(t){r.text(n.title),o.find(".option.selected").removeClass("selected"),o.find(".option").each(e.proxy((function(t,i){var n=e(i),o=this.queryState(n.attr("oid"),!0),s=n.attr("cmdvalue");if(s&&o==n.attr("cmdvalue")||!s&&o)return r.text(n.text()),n.addClass("selected"),!1}),this))}),this)),o.mousedown(e.proxy((function(t){t.preventDefault(),this.dropdownclick(".wbb-select",".wbb-list",t)}),this)),o.find(".option").mousedown(e.proxy((function(t){t.preventDefault();var i=e(t.currentTarget).attr("oid"),n=e(t.currentTarget).attr("cmdvalue"),o=this.options.allButtons[i];this.execCommand(i,o.exvalue||n||!1),e(t.currentTarget).trigger("queryState")}),this))},buildSmilebox:function(t,i,n){if(this.options.smileList&&this.options.smileList.length>0){var o=e(this.strf(n.buttonHTML,n)).addClass("btn-inner"),s=e('<div class="wysibb-toolbar-btn wbb-smilebox wbb-'+i+'">').appendTo(t).append(o).append(this.strf('<span class="btn-tooltip">{title}<ins/></span>',{title:n.title})),r=e('<div class="wbb-list">').appendTo(s);e.isArray(this.options.smileList)&&e.each(this.options.smileList,e.proxy((function(t,i){e("<span>").addClass("smile").appendTo(r).append(e(this.strf(i.img,this.options)).attr("title",i.title))}),this)),s.mousedown(e.proxy((function(t){t.preventDefault(),this.dropdownclick(".wbb-smilebox",".wbb-list",t)}),this)),s.find(".smile").mousedown(e.proxy((function(t){t.preventDefault(),this.insertAtCursor(this.options.bbmode?this.toBB(e(t.currentTarget).html()):e(e(t.currentTarget).html()))}),this))}},updateUI:function(t){(!t||t.which>=8&&t.which<=46||t.which>90||"mouseup"==t.type)&&e.each(this.controllers,e.proxy((function(t,e){e.trigger("queryState")}),this)),this.disNonActiveButtons()},initModal:function(){this.$modal=e("#wbbmodal"),0==this.$modal.length&&(e.log("Init modal"),this.$modal=e("<div>").attr("id","wbbmodal").prependTo(document.body).html('<div class="wbbm"><div class="wbbm-title"><span class="wbbm-title-text"></span><span class="wbbclose" title="'+o.close+'"></span></div><div class="wbbm-content"></div><div class="wbbm-bottom"><button id="wbbm-submit" class="wbb-button">'+o.save+'</button><button id="wbbm-cancel" class="wbb-cancel-button">'+o.cancel+'</button><button id="wbbm-remove" class="wbb-remove-button">'+o.remove+"</button></div></div>").hide(),this.$modal.find("#wbbm-cancel,.wbbclose").click(e.proxy(this.closeModal,this)),this.$modal.bind("click",e.proxy((function(t){0==e(t.target).parents(".wbbm").length&&this.closeModal()}),this)),e(document).bind("keydown",e.proxy(this.escModal,this)))},initHotkeys:function(){e.log("initHotkeys"),this.hotkeys=[];e.each(this.options.allButtons,e.proxy((function(t,i){if(i.hotkey){var n=i.hotkey.split("+");if(n&&n.length>=2){var o=0,s=n.pop();e.each(n,(function(t,i){switch(e.trim(i.toLowerCase())){case"ctrl":o+=1;break;case"shift":o+=4;break;case"alt":o+=7}})),o>0&&(this.hotkeys["m"+o]||(this.hotkeys["m"+o]=[]),this.hotkeys["m"+o]["k"+("0123456789       abcdefghijklmnopqrstuvwxyz".indexOf(s)+48)]=t)}}}),this))},presskey:function(t){if(1==t.ctrlKey||1==t.shiftKey||1==t.altKey){var e=(1==t.ctrlKey?1:0)+(1==t.shiftKey?4:0)+(1==t.altKey?7:0);if(this.hotkeys["m"+e]&&this.hotkeys["m"+e]["k"+t.which])return this.execCommand(this.hotkeys["m"+e]["k"+t.which],!1),t.preventDefault(),!1}},execCommand:function(t,i){e.log("execCommand: "+t);var n=this.options.allButtons[t];if(!0!==n.en)return!1;var o=this.queryState(t,i),s=this.isInClearTextBlock();if(!s||s==t){if(n.excmd)if(this.options.bbmode)if(e.log("Native command in bbmode: "+t),o&&1!=n.subInsert)this.wbbRemoveCallback(t,i);else{var r={};n.valueBBname&&i&&(r[n.valueBBname]=i),this.insertAtCursor(this.getBBCodeByCommand(t,r))}else this.execNativeCommand(n.excmd,i||!1);else n.cmd?n.cmd.call(this,t,i,o):this.wbbExecCommand.call(this,t,i,o);this.updateUI()}},queryState:function(t,i){var n=this.options.allButtons[t];if(!0!==n.en)return!1;if(this.options.bbmode){if(n.bbSelector)for(var o=0;o<n.bbSelector.length;o++){var s=this.isBBContain(n.bbSelector[o]);if(s)return this.getParams(s,n.bbSelector[o],s[1])}return!1}if(!n.excmd){if(e.isArray(n.rootSelector))for(o=0;o<n.rootSelector.length;o++){var r=this.isContain(this.getSelectNode(),n.rootSelector[o]);if(r)return this.getParams(r,n.rootSelector[o])}return!1}if(i)try{var a=(document.queryCommandValue(n.excmd)+"").replace(/\'/g,"");return"foreColor"==n.excmd&&(a=this.rgbToHex(a)),a}catch(t){return!1}else try{return("bold"!=n.excmd&&"italic"!=n.excmd&&"underline"!=n.excmd&&"strikeThrough"!=n.excmd||!e(this.getSelectNode()).is("img"))&&(!("underline"==n.excmd&&e(this.getSelectNode()).closest("a").length>0)&&document.queryCommandState(n.excmd))}catch(t){return!1}},wbbExecCommand:function(t,i,n){e.log("wbbExecCommand");var o=this.options.allButtons[t];if(o)if(o.modal)e.isFunction(o.modal)?o.modal.call(this,t,o.modal,n):this.showModal.call(this,t,o.modal,n);else if(n&&1!=o.subInsert)this.wbbRemoveCallback(t);else{if(o.groupkey){var s=this.options.groups[o.groupkey];if(s){var r=this.getSelectNode();e.each(s,e.proxy((function(t,i){var n=this.isContain(r,i);if(n){var o=e("<span>").html(n.innerHTML),s=this.setUID(o);return e(n).replaceWith(o),this.selectNode(this.$editor.find("#"+s)[0]),!1}}),this))}}this.wbbInsertCallback(t,i)}},wbbInsertCallback:function(i,n){"object"!=t(n)&&(n={}),e.log("wbbInsertCallback: "+i);var o=this.getCodeByCommand(i,n);if(this.insertAtCursor(o),this.seltextID&&-1!=o.indexOf(this.seltextID)){var s=this.$body.find("#"+this.seltextID)[0];this.selectNode(s),e(s).removeAttr("id"),this.seltextID=!1}},wbbRemoveCallback:function(t,i){e.log("wbbRemoveCallback: "+t);var n=this.options.allButtons[t];if(this.options.bbmode){this.getCursorPosBB();var o=0;e.each(n.bbSelector,e.proxy((function(t,n){var s=n.match(/\{[\s\S]+?\}/g);e.each(s,(function(t,e){if("{seltext}"==e.toLowerCase())return o=t,!1}));var r=this.isBBContain(n);if(r)return this.txtArea.value=this.txtArea.value.substr(0,r[1])+this.txtArea.value.substr(r[1],this.txtArea.value.length-r[1]).replace(r[0][0],!0===i?"":r[0][o+1]),this.setCursorPosBB(r[1]),!1}),this))}else{var s=this.getSelectNode();e.each(n.rootSelector,e.proxy((function(o,r){var a=this.isContain(s,r);if(!a)return!0;var l=e(a),c=this.options.rules[r][0][1];if(l.is("span[wbb]")||!l.is("span,font")){if(!0!==i&&c&&c.seltext)if(c&&c.seltext&&c.seltext.sel){var d=l.find(c.seltext.sel).html();!0===n.onlyClearText&&(d=(d=this.getHTML(d,!0,!0)).replace(/\&#123;/g,"{").replace(/\&#125;/g,"}")),l.replaceWith(d)}else{d=l.html();!0===n.onlyClearText&&(d=(d=this.getHTML(d,!0)).replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&#123;/g,"{").replace(/\&#125;/g,"}")),l.replaceWith(d)}else this.setCursorByEl(l),l.remove();return!1}var u=this.getRange(),h=this.getSelectText();this.getSelectNode();h=""==h?"\ufeff":this.clearFromSubInsert(h,t);var p=this.elFromString(h),f=window.getSelection?u.cloneRange():this.body.createTextRange(),m=window.getSelection?u.cloneRange():this.body.createTextRange();if(window.getSelection){this.insertAtCursor('<span id="wbbdivide"></span>');var g=l.find("span#wbbdivide").get(0);f.setStart(a.firstChild,0),f.setEndBefore(g),m.setStartAfter(g),m.setEndAfter(a.lastChild)}else f.moveToElementText(a),m.moveToElementText(a),f.setEndPoint("EndToStart",u),m.setEndPoint("StartToEnd",u);var v=this.getSelectText(!1,f),b=this.getSelectText(!1,m);if(""!=b){var y=l.clone().html(b);l.after(y)}return!0!==i&&l.after(p),window.getSelection?(l.html(v),!0!==i&&this.selectNode(p)):l.replaceWith(v),!1}),this))}},execNativeCommand:function(t,i){if(this.body.focus(),"insertHTML"!=t||window.getSelection)if("insertHTML"==t){var n=this.getSelection(),o=this.elFromString(i),s=this.lastRange?this.lastRange:this.getRange();s.deleteContents(),s.insertNode(o),s.setStartAfter(o),s.setEndAfter(o),s.collapse(!1),n.removeAllRanges(),n.addRange(s)}else void 0===i&&(i=!1),this.lastRange&&(e.log("Last range select"),this.selectLastRange()),document.execCommand(t,!1,i);else{var r=this.lastRange?this.lastRange:document.selection.createRange();r.pasteHTML(i);var a=e("<div>").html(i).text(),l=a.indexOf("\ufeff");l>-1&&(r.moveStart("character",-1*(a.length-l)),r.select()),this.lastRange=!1}},getCodeByCommand:function(t,e){return this.options.bbmode?this.getBBCodeByCommand(t,e):this.getHTMLByCommand(t,e)},getBBCodeByCommand:function(t,i){if(!this.options.allButtons[t])return"";void 0===i&&(i={}),(i=this.keysToLower(i)).seltext||(i.seltext=this.getSelectText(!0));var n=this.options.allButtons[t].bbcode;n=n.replace(/\{(.*?)(\[.*?\])*\}/g,(function(t,e,n){var o;if(n&&(n&&(o=new RegExp(n+"+","i")),void 0!==i[e.toLowerCase()]&&null===i[e.toLowerCase()].toString().match(o)))return"";return void 0===i[e.toLowerCase()]?"":i[e.toLowerCase()]}));var o=null,s=0;if(this.options.allButtons[t].transform){var r=[];e.each(this.options.allButtons[t].transform,(function(t,e){r.push(e)})),r=this.sortArray(r,-1),e.each(r,(function(t,e){var n=!0,r=0,a={};e=e.replace(/\{(.*?)(\[.*?\])*\}/g,(function(t,e,o){var s;return e=e.toLowerCase(),o&&(s=new RegExp(o+"+","i")),(void 0===i[e.toLowerCase()]||o&&null===i[e.toLowerCase()].toString().match(s))&&(n=!1),void 0===i[e]||a[e]||(a[e]=1,r++),void 0===i[e.toLowerCase()]?"":i[e.toLowerCase()]})),n&&r>s&&(o=e,s=r)}))}return o||n},getHTMLByCommand:function(t,i){if(!this.options.allButtons[t])return"";void 0===(i=this.keysToLower(i))&&(i={}),i.seltext||(i.seltext=this.getSelectText(!1),""==i.seltext?i.seltext="\ufeff":(i.seltext=this.clearFromSubInsert(i.seltext,t),!0===this.options.allButtons[t].onlyClearText&&(i.seltext=this.toBB(i.seltext).replace(/\</g,"&lt;").replace(/\n/g,"<br/>").replace(/\s{3}/g,'<span class="wbbtab"></span>'))));var n="";this.seltextID="wbbid_"+ ++this.lastid,"link"!=t&&"img"!=t?i.seltext='<span id="'+this.seltextID+'">'+i.seltext+"</span>":n='<span id="'+this.seltextID+'">\ufeff</span>';var o=this.options.allButtons[t].html;o=o.replace(/\{(.*?)(\[.*?\])*\}/g,(function(t,e,n){if(n){var o=new RegExp(n+"+","i");if(void 0!==i[e.toLowerCase()]&&null===i[e.toLowerCase()].toString().match(o))return""}return void 0===i[e.toLowerCase()]?"":i[e.toLowerCase()]}));var s=null,r=0;if(this.options.allButtons[t].transform){var a=[];e.each(this.options.allButtons[t].transform,(function(t,e){a.push(t)})),a=this.sortArray(a,-1),e.each(a,(function(t,e){var n=!0,o=0,a={};e=e.replace(/\{(.*?)(\[.*?\])*\}/g,(function(t,e,s){var r;return e=e.toLowerCase(),s&&(r=new RegExp(s+"+","i")),(void 0===i[e]||s&&null===i[e].toString().match(r))&&(n=!1),void 0===i[e]||a[e]||(a[e]=1,o++),void 0===i[e]?"":i[e]})),n&&o>r&&(s=e,r=o)}))}return(s||o)+n},getSelection:function(){return window.getSelection?window.getSelection():document.selection?(this.options.bbmode,document.selection.createRange()):void 0},getSelectText:function(t,i){if(t){if(this.txtArea.focus(),"selectionStart"in this.txtArea){var n=this.txtArea.selectionEnd-this.txtArea.selectionStart;return this.txtArea.value.substr(this.txtArea.selectionStart,n)}return document.selection.createRange().text}return this.body.focus(),i||(i=this.getRange()),window.getSelection?i?e("<div>").append(i.cloneContents()).html():"":i.htmlText},getRange:function(){if(!window.getSelection)return this.options.bbmode,document.selection.createRange();var t=this.getSelection();if(t.getRangeAt&&t.rangeCount>0)return t.getRangeAt(0);if(t.anchorNode){var e=(this.options.bbmode,document.createRange());return e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset),e}},insertAtCursor:function(t,i){if("string"!=typeof t&&(t=e("<div>").append(t).html()),this.options.bbmode&&void 0===i||!0===i){var n=t.replace(/.*(\[\/\S+?\])$/,"$1"),o=this.getCursorPosBB()+(-1!=t.indexOf(n)&&t.match(/\[.*\]/)?t.indexOf(n):t.length);document.selection?(this.txtArea.focus(),this.getSelection().text=t):(this.txtArea.selectionStart||"0"==this.txtArea.selectionStart)&&(this.txtArea.value=this.txtArea.value.substring(0,this.txtArea.selectionStart)+t+this.txtArea.value.substring(this.txtArea.selectionEnd,this.txtArea.value.length)),o<0&&(o=0),this.setCursorPosBB(o)}else{this.execNativeCommand("insertHTML",t);var s=this.getSelectNode();e(s).closest("table,tr,td")||this.splitPrevNext(s)}},getSelectNode:function(t){if(this.body.focus(),t||(t=this.getRange()),!t)return this.$body;var i=window.getSelection?t.commonAncestorContainer:t.parentElement();return e(i).is(".imgWrap")&&(i=e(i).children("img")[0]),i},getCursorPosBB:function(){var t=0;if("selectionStart"in this.txtArea)t=this.txtArea.selectionStart;else{this.txtArea.focus();var e=this.getRange(),i=document.body.createTextRange();i.moveToElementText(this.txtArea),i.setEndPoint("EndToStart",e),t=i.text.length}return t},setCursorPosBB:function(t){if(this.options.bbmode)if(window.getSelection)this.txtArea.selectionStart=t,this.txtArea.selectionEnd=t;else{var e=this.txtArea.createTextRange();e.collapse(!0),e.move("character",t),e.select()}},selectNode:function(t,e){if(e||(e=this.getRange()),e)if(window.getSelection){var i=this.getSelection();e.selectNodeContents(t),i.removeAllRanges(),i.addRange(e)}else e.moveToElementText(t),e.select()},selectRange:function(t){if(t)if(window.getSelection){var e=this.getSelection();e.removeAllRanges(),e.addRange(t)}else t.select()},cloneRange:function(t){if(t)return window.getSelection?t.cloneRange():t.duplicate()},getRangeClone:function(){return this.cloneRange(this.getRange())},saveRange:function(){this.setBodyFocus(),this.lastRange=this.getRangeClone()},selectLastRange:function(){this.lastRange&&(this.body.focus(),this.selectRange(this.lastRange),this.lastRange=!1)},setBodyFocus:function(){e.log("Set focus to WysiBB editor"),this.options.bbmode?this.$txtArea.is(":focus")||this.$txtArea.focus():this.$body.is(":focus")||this.$body.focus()},clearLastRange:function(){this.lastRange=!1},filterByNode:function(t){var i=e(t),n=i.get(0).tagName.toLowerCase(),o=this.getAttributeList(i.get(0));return e.each(o,e.proxy((function(t,o){var s=i.attr(o);if("_"==o.substr(0,1)&&(o=o.substr(1,o.length)),s&&!s.match(/\{.*?\}/))if("style"==o){var r=(s=i.attr(o)).split(";");e.each(r,(function(t,i){i&&i.length>0&&(n+="["+o+'*="'+e.trim(i)+'"]')}))}else n+="["+o+'="'+s+'"]';else if(s&&"style"==o){var a=s.substr(0,s.indexOf("{"));if(a&&""!=a){r=(s=s.substr(0,s.indexOf("{"))).split(";");e.each(r,(function(t,e){n+="["+o+'*="'+e+'"]'}))}}else n+="["+o+"]"}),this)),i.parent().children(n).index(i)>0&&(n+=":eq("+i.index()+")"),n},relFilterByNode:function(t,i){var n="";for(e.each(this.options.attrWrap,(function(t,e){i=i.replace("["+e,"[_"+e)}));t&&"BODY"!=t.tagName&&!e(t).is(i);)n=this.filterByNode(t)+" "+n,t&&(t=t.parentNode);return n},getRegexpReplace:function(t,e){return t=t.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\)/g,"\\$1").replace(/\s+/g,"\\s+").replace(e.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\)/g,"\\$1"),"(.+)").replace(/\{\S+?\}/g,".*")},getBBCode:function(){return this.options.rules?this.options.bbmode?this.$txtArea.val():(this.clearEmpty(),this.removeLastBodyBR(),this.toBB(this.$body.html())):this.$txtArea.val()},toBB:function(t){if(!t)return"";var i="string"==typeof t?e("<span>").html(t):e(t);i.find("div,blockquote,p").each((function(){3!=this.nodeType&&this.lastChild&&"BR"==this.lastChild.tagName&&e(this.lastChild).remove()})),i.is("div,blockquote,p")&&3!=i[0].nodeType&&i[0].lastChild&&"BR"==i[0].lastChild.tagName&&e(i[0].lastChild).remove(),i.find("ul > br, table > br, tr > br").remove();var n="";return e.each(this.options.srules,e.proxy((function(t,e){i.find(t).replaceWith(e[0])}),this)),i.contents().each(e.proxy((function(t,i){var o=e(i);if(3===i.nodeType)n+=i.data.replace(/\n+/,"").replace(/\t/g,"   ");else{for(var s=0;s<this.rsellist.length;s++){var r=this.rsellist[s];if(o&&o.is(r)){var a=this.options.rules[r];for(t=0;t<a.length;t++){var l=a[t][0],c=a[t][1],d=!1,u=!1;if(o.is("br")||(l=l.replace(/\n/g,"<br>")),l=l.replace(/\{(.*?)(\[.*?\])*\}/g,e.proxy((function(t,n,s){var r=c[n.toLowerCase()];void 0===r&&(e.log("Param: {"+n+"} not found in HTML representation."),d=!0);var a=r.sel?e(i).find(r.sel):e(i);if(r.attr&&!a.attr(r.attr))return d=!0,n;var l=r.attr?a.attr(r.attr):a.html();if(void 0===l||null==l)return d=!0,n;var h=r.rgx;h&&"style"==r.attr&&";"!=h.substr(h.length-1,1)&&(h+=";"),"style"==r.attr&&l&&";"!=l.substr(l.length-1,1)&&(l+=";");var p=!!h&&new RegExp(h,"");if(p)if(l.match(p)){var f=l.match(p);f&&2==f.length&&(l=f[1])}else l="";if(r.attr&&!1===d)if("style"==r.attr){u=!0;var m="",g=r.rgx.replace(/^\.\*\?/,"").replace(/\.\*$/,"").replace(/;$/,"");e(a.attr("style").split(";")).each((function(t,e){e&&""!=e&&(e.match(g)||(m+=e+";"))})),""==m?a.removeAttr("style"):a.attr("style",m)}else!1===r.rgx&&(u=!0,!0,a.removeAttr(r.attr));return o.is("table,tr,td,font")&&(u=!0),l||""}),this)),!d){if(o.is("img,br,hr")){n+=l,o=null;break}if(!u||o.attr("notkeep")){o.is("iframe")?n+=l:(o.empty().html(l),n+=this.toBB(o),o=null);break}o.is("table,tr,td")?(l=this.fixTableTransform(l),n+=this.toBB(e("<span>").html(l)),o=null):o.empty().html("<span>"+l+"</span>")}}}}if(!o||o.is("iframe,img"))return!0;n+=this.toBB(o)}}),this)),n.replace(/\uFEFF/g,""),n},getHTML:function(t,i,n){if(!this.options.bbmode&&!i)return this.$body.html();n||(t=t.replace(/</g,"&lt;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;")),t=t.replace(/\[code\]([\s\S]*?)\[\/code\]/g,(function(t){return"[code]"+(t=t.substr("[code]".length,t.length-"[code]".length-"[/code]".length).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))+"[/code]"})),e.each(this.options.btnlist,e.proxy((function(i,n){if("|"!=n&&"-"!=n){if(!this.options.allButtons[n]||!this.options.allButtons[n].transform)return!0;e.each(this.options.allButtons[n].transform,e.proxy((function(i,n){i=i.replace(/\n/g,"");var o=[];n=(n=n.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\|\\)/g,"\\$1")).replace(/\{(.*?)(\\\[.*?\\\])*\}/gi,e.proxy((function(t,e,i){return o.push(e),i?"("+(i=i.replace(/\\/g,""))+"*?)":"([\\s\\S]*?)"}),this));for(var s;null!=(s=new RegExp(n,"mgi").exec(t));)if(s){var r={};e.each(o,e.proxy((function(t,e){r[e]=s[t+1]}),this));var a=i;a=a.replace(/\{(.*?)(\[.*?\])\}/g,"{$1}"),a=this.strf(a,r),t=t.replace(s[0],a)}}),this))}}),this)),e.each(this.options.systr,(function(e,i){i=i.replace(/(\(|\)|\[|\]|\.|\*|\?|\:|\\|\\)/g,"\\$1").replace(" ","\\s"),t=t.replace(new RegExp(i,"g"),e)}));var o=e(this.elFromString("<div>"+t+"</div>"));return this.getHTMLSmiles(o),o.html()},getHTMLSmiles:function(t){e(t).contents().filter((function(){return 3==this.nodeType})).each(e.proxy(this.smileRPL,this))},smileRPL:function(t,i){var n=i.data;e.each(this.options.smileList,e.proxy((function(t,o){var s=n.indexOf(o.bbcode);if(-1!=s){var r=n.substring(s+o.bbcode.length,n.length),a=document.createTextNode(r);return i.data=n=i.data.substr(0,s),e(i).after(a).after(this.strf(o.img,this.options)),this.getHTMLSmiles(i.parentNode),!1}this.getHTMLSmiles(i)}),this))},setUID:function(t,i){var n="wbbid_"+ ++this.lastid;return t&&e(t).attr(i||"id",n),n},keysToLower:function(t){return e.each(t,(function(e,i){e!=e.toLowerCase()&&(delete t[e],t[e.toLowerCase()]=i)})),t},strf:function(t,i){return i=this.keysToLower(e.extend({},i)),t.replace(/\{([\w\.]*)\}/g,(function(t,n){var o=(n=n.toLowerCase()).split("."),s=i[o.shift().toLowerCase()];return e.each(o,(function(){s=s[this]})),null==s?"":s}))},elFromString:function(t){if(-1!=t.indexOf("<")&&-1!=t.indexOf(">")){var i=document.createElement("SPAN");return e(i).html(t),this.setUID(i,"wbb"),e(i).contents().length>1?i:i.firstChild}return document.createTextNode(t)},isContain:function(t,i){for(;t&&!e(t).hasClass("wysibb");){if(e(t).is(i))return t;if(!t)return null;t=t.parentNode}},isBBContain:function(t){for(var e,i=this.getCursorPosBB(),n=this.prepareRGX(t),o=new RegExp(n,"g"),s=0;null!=(e=o.exec(this.txtArea.value));){var r=this.txtArea.value.indexOf(e[0],s);if(i>r&&i<r+e[0].length)return[e,r];s=r+1}},prepareRGX:function(t){return t.replace(/(\[|\]|\)|\(|\.|\*|\?|\:|\||\\)/g,"\\$1").replace(/\{.*?\}/g,"([\\s\\S]*?)")},checkForLastBR:function(t){t||(i=this.body),3==t.nodeType&&(t=t.parentNode);var i=e(t);if(i.is("span[id*='wbbid']")&&(i=i.parent()),!1===this.options.bbmode&&i.is("div,blockquote,code")&&i.contents().length>0){var n=i[0].lastChild;(!n||n&&"BR"!=n.tagName)&&i.append("<br/>")}this.$body.contents().length>0&&"BR"!=this.body.lastChild.tagName&&this.$body.append("<br/>")},getAttributeList:function(t){var i=[];return e.each(t.attributes,(function(t,e){e.specified&&i.push(e.name)})),i},clearFromSubInsert:function(t,i){if(this.options.allButtons[i]&&this.options.allButtons[i].rootSelector){var n=e("<div>").html(t);return e.each(this.options.allButtons[i].rootSelector,e.proxy((function(t,i){var o=!1;void 0!==this.options.rules[i][0][1].seltext&&(o=this.options.rules[i][0][1].seltext.sel);var s=!0;return n.find("*").each((function(){e(this).is(i)&&(o&&o.sel?e(this).replaceWith(e(this).find(o.sel.toLowerCase()).html()):e(this).replaceWith(e(this).html()),s=!1)})),s}),this)),n.html()}return t},splitPrevNext:function(t){3==t.nodeType&&(t=t.parentNode);var i=this.filterByNode(t).replace(/\:eq.*$/g,"");e(t.nextSibling).is(i)&&(e(t).append(e(t.nextSibling).html()),e(t.nextSibling).remove()),e(t.previousSibling).is(i)&&(e(t).prepend(e(t.previousSibling).html()),e(t.previousSibling).remove())},modeSwitch:function(){this.options.bbmode?(this.$body.html(this.getHTML(this.$txtArea.val())),this.$txtArea.hide().removeAttr("wbbsync").val(""),this.$body.css("min-height",this.$txtArea.height()).show().focus()):(this.$txtArea.val(this.getBBCode()).css("min-height",this.$body.height()),this.$body.hide(),this.$txtArea.show().focus()),this.options.bbmode=!this.options.bbmode},clearEmpty:function(){this.$body.children().filter((function t(){if(!e(this).is("span,font,a,b,i,u,s"))return!1;if(!e(this).hasClass("wbbtab")&&0==e.trim(e(this).html()).length)return!0;if(e(this).children().length>0&&(e(this).children().filter(t).remove(),0==e(this).html().length&&"BODY"!=this.tagName))return!0})).remove()},dropdownclick:function(t,i,n){var o=e(n.currentTarget).closest(t);o.hasClass("dis")||(o.attr("wbbshow")?(o.removeAttr("wbbshow"),e(document).unbind("mousedown",this.dropdownhandler),document&&e(document).unbind("mousedown",this.dropdownhandler),this.lastRange=!1):(this.saveRange(),this.$editor.find("*[wbbshow]").each((function(t,i){e(i).removeClass("on").find(e(i).attr("wbbshow")).hide().end().removeAttr("wbbshow")})),o.attr("wbbshow",i),e(document.body).bind("mousedown",e.proxy((function(e){this.dropdownhandler(o,t,i,e)}),this)),this.$body&&this.$body.bind("mousedown",e.proxy((function(e){this.dropdownhandler(o,t,i,e)}),this))),o.find(i).toggle(),o.toggleClass("on"))},dropdownhandler:function(t,i,n,o){0==e(o.target).parents(i).length&&(t.removeClass("on").find(n).hide(),e(document).unbind("mousedown",this.dropdownhandler),this.$body&&this.$body.unbind("mousedown",this.dropdownhandler))},rgbToHex:function(t){if("#"==t.substr(0,1))return t;if(-1==t.indexOf("rgb")){var e=parseInt(t);return"#"+(e=(255&e)<<16|65280&e|(16711680&e)>>>16).toString(16)}var i=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(t);return"#"+this.dec2hex(parseInt(i[2]))+this.dec2hex(parseInt(i[3]))+this.dec2hex(parseInt(i[4]))},dec2hex:function(t){return t>15?t.toString(16):"0"+t.toString(16)},sync:function(){this.options.bbmode?this.$body.html(this.getHTML(this.txtArea.value,!0)):this.$txtArea.attr("wbbsync",1).val(this.getBBCode())},clearPaste:function(t){var i=e(t);e.each(this.options.rules,e.proxy((function(t,n){var o=i.find(t).attr("wbbkeep",1);if(o.length>0){var s=n[0][1];e.each(s,(function(t,e){e.sel&&o.find(e.sel).attr("wbbkeep",1)}))}}),this)),i.find("*[wbbkeep!='1']").each(e.proxy((function(t,i){var n=e(i);!n.is("div,p")||0!=n.children().length&&"BR"==i.lastChild.tagName||n.after("<br/>")}),this)),i.find("*[wbbkeep]").removeAttr("wbbkeep").removeAttr("style"),e.log(i.html()),i.html(this.getHTML(this.toBB(i),!0)),e.log(i.html())},sortArray:function(t,e){return t.sort((function(t,i){return(t.length-i.length)*(e||1)})),t},smileFind:function(){if(this.options.smilefind){var t=e(this.options.smilefind).find("img[alt]");t.length>0&&(this.options.smileList=[],t.each(e.proxy((function(t,i){var n=e(i);this.options.smileList.push({title:n.attr("title"),bbcode:n.attr("alt"),img:n.removeAttr("alt").removeAttr("title")[0].outerHTML})}),this)))}},destroy:function(){this.$editor.replaceWith(this.$txtArea),this.$txtArea.removeClass("wysibb-texarea").show(),this.$modal.remove(),this.$txtArea.data("wbb",null)},pressTab:function(t){t&&9==t.which&&(t.preventDefault&&t.preventDefault(),this.options.bbmode?this.insertAtCursor("   ",!1):this.insertAtCursor('<span class="wbbtab">\ufeff</span>',!1))},removeLastBodyBR:function(){this.body.lastChild&&3!=this.body.lastChild.nodeType&&"BR"==this.body.lastChild.tagName&&(this.body.removeChild(this.body.lastChild),this.removeLastBodyBR())},traceTextareaEvent:function(t){0==e(t.target).closest("div.wysibb").length&&(e(document.activeElement).is("div.wysibb-body")&&this.saveRange(),setTimeout(e.proxy((function(){var i=this.$txtArea.val();!1!==this.options.bbmode||""==i||0!=e(t.target).closest("div.wysibb").length||this.$txtArea.attr("wbbsync")||(this.selectLastRange(),this.insertAtCursor(this.getHTML(i,!0)),this.$txtArea.val("")),e(document.activeElement).is("div.wysibb-body")&&(this.lastRange=!1)}),this),100))},txtAreaInitContent:function(){this.$body.html(this.getHTML(this.txtArea.value,!0))},getValidationRGX:function(t){return t.match(/\[\S+\]/)?t.replace(/.*(\\*\[\S+\]).*/,"$1"):""},smileConversion:function(){if(this.options.smileList&&this.options.smileList.length>0){var t=this.getSelectNode();if(3==t.nodeType){var i=t.data;i.length>=2&&!this.isInClearTextBlock(t)&&0==e(t).parents("a").length&&e.each(this.options.srules,e.proxy((function(n,o){var s=o[0],r=i.indexOf(s);if(-1!=r){var a=i.substring(r+s.length,i.length),l=document.createTextNode(a),c=document.createElement("SPAN");return t.data=t.data.substr(0,r),e(t).after(l).after(c).after(this.strf(o[1],this.options)),this.selectNode(c),!1}}),this))}}},isInClearTextBlock:function(){if(this.cleartext){var t=!1;return e.each(this.cleartext,e.proxy((function(e,i){if(this.queryState(i))return t=i,!1}),this)),t}return!1},wrapAttrs:function(t){return e.each(this.options.attrWrap,(function(e,i){t=t.replace(i+'="',"_"+i+'="')})),t},unwrapAttrs:function(t){return e.each(this.options.attrWrap,(function(e,i){t=t.replace("_"+i+'="',i+'="')})),t},disNonActiveButtons:function(){this.isInClearTextBlock()?this.$toolbar.find(".wysibb-toolbar-btn:not(.on,.mswitch)").addClass("dis"):this.$toolbar.find(".wysibb-toolbar-btn.dis").removeClass("dis")},setCursorByEl:function(t){var i=document.createTextNode("\ufeff");e(t).after(i),this.selectNode(i)},imgListeners:function(){e(document).on("mousedown",e.proxy(this.imgEventHandler,this))},imgEventHandler:function(t){var i=e(t.target);this.hasWrapedImage&&(0==i.closest(".wbb-img,#wbbmodal").length||i.hasClass("wbb-cancel-button"))&&(this.$body.find(".imgWrap ").each((function(){e.log("Removed imgWrap block"),e(this).replaceWith(e(this).find("img"))})),this.hasWrapedImage=!1,this.updateUI()),i.is("img")&&i.closest(".wysibb-body").length>0&&(i.wrap("<span class='imgWrap'></span>"),this.hasWrapedImage=i,this.$body.focus(),this.selectNode(i.parent()[0]))},showModal:function(t,i,n){e.log("showModal: "+t),this.saveRange();var s=this.$modal.find(".wbbm-content").html(""),r=this.$modal.find(".wbbm").removeClass("hastabs");if(this.$modal.find("span.wbbm-title-text").html(i.title),i.tabs&&i.tabs.length>1){r.addClass("hastabs");var a=e('<div class="wbbm-tablist">').appendTo(s).append("<ul>").children("ul");e.each(i.tabs,e.proxy((function(t,e){0==t&&(e.on="on"),a.append(this.strf("<li class=\"{on}\" onClick=\"$(this).parent().find('.on').removeClass('on');$(this).addClass('on');$(this).parents('.wbbm-content').find('.tab-cont').hide();$(this).parents('.wbbm-content').find('.tab"+t+"').show()\">{title}</li>",e))}),this))}i.width&&r.css("width",i.width);var l=e('<div class="wbbm-cont">').appendTo(s);n?r.find("#wbbm-remove").show():r.find("#wbbm-remove").hide(),e.each(i.tabs,e.proxy((function(t,i){var o=e("<div>").addClass("tab-cont tab"+t).attr("tid",t).appendTo(l);t>0&&o.hide(),i.html?o.html(this.strf(i.html,this.options)):e.each(i.input,e.proxy((function(t,i){i.value=n[i.param.toLowerCase()],"seltext"!=i.param.toLowerCase()||i.value&&""!=i.value||(i.value=this.getSelectText(this.options.bbmode)),i.value&&0==i.value.indexOf("<span id='wbbid")&&e(i.value).is("span[id*='wbbid']")&&(i.value=e(i.value).html()),i.type&&"div"==i.type?o.append(this.strf('<div class="wbbm-inp-row"><label>{title}</label><div class="inp-text div-modal-text" contenteditable="true" name="{param}">{value}</div></div>',i)):o.append(this.strf('<div class="wbbm-inp-row"><label>{title}</label><input class="inp-text modal-text" type="text" name="{param}" value="{value}"/></div>',i))}),this))}),this)),e.isFunction(i.onLoad)&&i.onLoad.call(this,t,i,n),r.find("#wbbm-submit").click(e.proxy((function(){if(e.isFunction(i.onSubmit)&&!1===i.onSubmit.call(this,t,i,n))return;var s={},r=!0;this.$modal.find(".wbbm-inperr").remove(),this.$modal.find(".wbbm-brdred").removeClass("wbbm-brdred"),e.each(this.$modal.find(".tab-cont:visible .inp-text"),e.proxy((function(t,n){var a=e(n).parents(".tab-cont").attr("tid"),l=e(n).attr("name").toLowerCase(),c="";c=e(n).is("input,textrea,select")?e(n).val():e(n).html();var d=i.tabs[a].input[t].validation;void 0!==d&&(c.match(new RegExp(d,"i"))||(r=!1,e(n).after('<span class="wbbm-inperr">'+o.validation_err+"</span>").addClass("wbbm-brdred"))),s[l]=c}),this)),r&&(e.log("Last range: "+this.lastRange),this.selectLastRange(),n&&this.wbbRemoveCallback(t,!0),this.wbbInsertCallback(t,s),this.closeModal(),this.updateUI())}),this)),r.find("#wbbm-remove").click(e.proxy((function(){this.selectLastRange(),this.wbbRemoveCallback(t),this.closeModal(),this.updateUI()}),this)),e(document.body).css("overflow","hidden"),e("body").height()>e(window).height()&&e(document.body).css("padding-right","18px"),this.$modal.show(),this.isMobile?r.css("margin-top","10px"):r.css("margin-top",(e(window).height()-r.outerHeight())/3+"px"),setTimeout(e.proxy((function(){this.$modal.find(".inp-text:visible")[0].focus()}),this),10)},escModal:function(t){27==t.which&&this.closeModal()},closeModal:function(){return e(document.body).css("overflow","auto").css("padding-right","0").unbind("keyup",this.escModal),this.$modal.find("#wbbm-submit,#wbbm-remove").unbind("click"),this.$modal.hide(),this.lastRange=!1,this},getParams:function(t,i,n){var o={};if(this.options.bbmode){var s=i.match(/\{[\s\S]+?\}/g);i=this.prepareRGX(i);var r=new RegExp(i,"g"),a=this.txtArea.value;n>0&&(a=a.substr(n,a.length-n));var l=r.exec(a);l&&e.each(s,(function(t,e){o[e.replace(/\{|\}/g,"").replace(/"/g,"'").toLowerCase()]=l[t+1]}))}else{var c=this.options.rules[i][0][1];e.each(c,e.proxy((function(i,n){var s="",r=!1!==n.sel?s=e(t).find(n.sel):e(t);if(s=!1!==n.attr?r.attr(n.attr):r.html()){if(!1!==n.rgx){var a=s.match(new RegExp(n.rgx));a&&2==a.length&&(s=a[1])}o[i]=s.replace(/"/g,"'")}}),this))}return o},imgLoadModal:function(){e.log("imgLoadModal"),!0===this.options.imgupload?(this.$modal.find("#imguploader").dragfileupload({url:this.strf(this.options.img_uploadurl,this.options),extraParams:{maxwidth:this.options.img_maxwidth,maxheight:this.options.img_maxheight},themePrefix:this.options.themePrefix,themeName:this.options.themeName,success:e.proxy((function(t){this.$txtArea.insertImage(t.image_link,t.thumb_link),this.closeModal(),this.updateUI()}),this)}),this.$modal.find("#fileupl").bind("change",(function(){e("#fupform").submit()})),this.$modal.find("#fupform").bind("submit",e.proxy((function(t){e(t.target).parents("#imguploader").hide().after('<div class="loader"><img src="'+this.options.themePrefix+"/"+this.options.themeName+'/img/loader.gif" /><br/><span>'+o.loading+"</span></div>").parent().css("text-align","center")}),this))):(this.$modal.find(".hastabs").removeClass("hastabs"),this.$modal.find("#imguploader").parents(".tab-cont").remove(),this.$modal.find(".wbbm-tablist").remove())},imgSubmitModal:function(){e.log("imgSubmitModal")},printObjectInIE:function(t){try{e.log(JSON.stringify(t))}catch(t){}},checkFilter:function(t,i){e.log("node: "+e(t).get(0).outerHTML+" filter: "+i+" res: "+e(t).is(i.toLowerCase()))},debug:function(t){if(!0===this.options.debug){var i=(new Date).getTime();"undefined"!=typeof console?console.log(i-this.startTime+" ms: "+t):e("#exlog").append("<p>"+(i-this.startTime)+" ms: "+t+"</p>"),this.startTime=i}},isChrome:function(){return!!window.chrome},fixTableTransform:function(t){return t?-1==e.inArray("table",this.options.buttons)?t.replace(/\<(\/*?(table|tr|td|tbody))[^>]*\>/gi,""):t.replace(/\<(\/*?(table|tr|td))[^>]*\>/gi,"[$1]".toLowerCase()).replace(/\<\/*tbody[^>]*\>/gi,""):""}},e.log=function(t){0},e.fn.wysibb=function(t){return this.each((function(){e(this).data("wbb")||new e.wysibb(this,t)}))},e.fn.wdrag=function(t){t.scope||(t.scope=this);var i,n={x:0,y:0,height:0};t.scope.drag_mousedown=function(o){o.preventDefault(),n={x:o.pageX,y:o.pageY,height:t.height,sheight:t.scope.$body.height()},i=!0,e(document).bind("mousemove",e.proxy(t.scope.drag_mousemove,this)),e(this).addClass("drag")},t.scope.drag_mouseup=function(n){!0===i&&(n.preventDefault(),e(document).unbind("mousemove",t.scope.drag_mousemove),e(this).removeClass("drag"),i=!1)},t.scope.drag_mousemove=function(e){e.preventDefault();var i=0;if(t.axisX&&e.pageX-n.x,t.axisY&&(i=e.pageY-n.y),0!=i){var o=n.sheight+i;o>n.height&&o<=t.scope.options.resize_maxheight&&(1==t.scope.options.bbmode?t.scope.$txtArea.css(!0===t.scope.options.autoresize?"min-height":"height",o+"px"):t.scope.$body.css(!0===t.scope.options.autoresize?"min-height":"height",o+"px"))}},e(this).bind("mousedown",t.scope.drag_mousedown),e(document).bind("mouseup",e.proxy(t.scope.drag_mouseup,this))},e.fn.getDoc=function(){return this.data("wbb").doc},e.fn.getSelectText=function(t){return this.data("wbb").getSelectText(t)},e.fn.bbcode=function(t){return void 0!==t?(this.data("wbb").options.bbmode?this.data("wbb").$txtArea.val(t):this.data("wbb").$body.html(this.data("wbb").getHTML(t)),this):this.data("wbb").getBBCode()},e.fn.htmlcode=function(t){if(!this.data("wbb").options.onlyBBMode&&!0===this.data("wbb").inited)return void 0!==t?(this.data("wbb").$body.html(t),this):this.data("wbb").getHTML(this.data("wbb").$txtArea.val())},e.fn.getBBCode=function(){return this.data("wbb").getBBCode()},e.fn.getHTML=function(){var t=this.data("wbb");return t.getHTML(t.$txtArea.val())},e.fn.getHTMLByCommand=function(t,e){return this.data("wbb").getHTMLByCommand(t,e)},e.fn.getBBCodeByCommand=function(t,e){return this.data("wbb").getBBCodeByCommand(t,e)},e.fn.insertAtCursor=function(t,e){return this.data("wbb").insertAtCursor(t,e),this.data("wbb")},e.fn.execCommand=function(t,e){return this.data("wbb").execCommand(t,e),this.data("wbb")},e.fn.insertImage=function(t,e){var i=this.data("wbb"),n=e?i.getCodeByCommand("link",{url:t,seltext:i.getCodeByCommand("img",{src:e})}):i.getCodeByCommand("img",{src:t});return this.insertAtCursor(n),i},e.fn.sync=function(){return this.data("wbb").sync(),this.data("wbb")},e.fn.destroy=function(){this.data("wbb").destroy()},e.fn.queryState=function(t){return this.data("wbb").queryState(t)}}(jQuery),function(t){function e(e,i){this.$block=t(e),this.opt=t.extend({url:!1,success:!1,extraParams:!1,fileParam:"img",validation:".(jpg|png|gif|jpeg)$",t1:o.fileupload_text1,t2:o.fileupload_text2},i)}t.fn.dragfileupload=function(t){return this.each((function(){new e(this,t).init()}))},e.prototype={init:function(){if(null!=window.FormData){this.$block.addClass("drag"),this.$block.prepend('<div class="p2">'+this.opt.t2+"</div>"),this.$block.prepend('<div class="p">'+this.opt.t1+"</div>"),this.$block.bind("dragover",(function(){return t(this).addClass("dragover"),!1})),this.$block.bind("dragleave",(function(){return t(this).removeClass("dragover"),!1}));var e=t.proxy((function(t){var e=parseInt(t.loaded/t.total*100,10);this.$loader.children("span").text(o.loading+": "+e+"%")}),this),i=jQuery.ajaxSettings.xhr();i.upload&&i.upload.addEventListener("progress",e,!1),this.$block[0].ondrop=t.proxy((function(e){e.preventDefault(),this.$block.removeClass("dragover");var n=e.dataTransfer.files[0];if(this.opt.validation&&!n.name.match(new RegExp(this.opt.validation)))return this.error(o.validation_err),!1;var s=new FormData;s.append(this.opt.fileParam,n),this.opt.extraParams&&t.each(this.opt.extraParams,(function(t,e){s.append(t,e)})),this.$loader=t('<div class="loader"><img src="'+this.opt.themePrefix+"/"+this.opt.themeName+'/img/loader.gif" /><br/><span>'+o.loading+"</span></div>"),this.$block.html(this.$loader),t.ajax({type:"POST",url:this.opt.url,data:s,processData:!1,contentType:!1,xhr:function(){return i},dataType:"json",success:t.proxy((function(t){t&&1==t.status?this.opt.success(t):this.error(t.msg||o.error_onupload)}),this),error:t.proxy((function(t,e,i){this.error(o.error_onupload)}),this)})}),this)}},error:function(t){this.$block.find(".upl-error").remove().end().append('<span class="upl-error">'+t+"</span>").addClass("wbbm-brdred")}}}(jQuery)}).call(window)},8069:(t,e,i)=>{(function(){i(69826),i(89554),i(82772),i(69600),i(21249),i(19601),i(47941),i(74916),i(15306),i(73210);var e=function(){$(".left-menus .language").addClass("visible")};$(document).ready((function(){$(".left-menus .language").click((function(){e()}))}));var n=function(t){0==$(t.target).closest("ul.left-menus").length&&$(".left-menus .language").removeClass("visible")};onBodyMousedownTriggers.push(n);var o=function(){$(".left-menus .current-object").addClass("visible")};$(document).ready((function(){$(".left-menus .current-object").click((function(){o()}))}));var s=function(t){0==$(t.target).closest("ul.left-menus").length&&$(".left-menus .current-object").removeClass("visible")};onBodyMousedownTriggers.push(s);var r=function(t){window.location=t.letterEditorURL},a=function(t){window.location=t.cvEditorURL},l=function(t){var e=introJs();e.setOptions(Object.assign(introjsIntl,{steps:t})),e.start()},c=$(window).height(),d=$(window).width(),u=function(t){return $(window).width()-(t.offset().left+t.outerWidth())},h=function(t){if(t&&"string"==typeof t&&t.indexOf("{")>-1){t=t.replace(/'/g,'"'),t=JSON.parse(t);var e=0,i=null;Object.keys(t).map((function(t,n){"default"!==t&&(t=parseInt(t))<d&&t>e&&(e=t,i=t)})),t=i?t[i]:t.default}return t=parseInt(t)},p=null,f=0,m=$(window).scrollTop()||0,g=$(window).scrollTop()||0,v="neutral",b=!1,y=function(t,e){void 0!==t&&(c=$(window).height(),null!==p&&(p=$(document).height()));var i=!1,n=!1;e=e||$(".static:not(.binded)"),$(window).resize((function(){c=$(window).height(),d=$(window).width()})),e.each((function(){var t=$(this),e=t.hasClass("rightalign");$(this).addClass("binded");var o=$(this).offset().left,s=u($(this)),r=o-$(this).parent().offset().left,a=s-u($(this).parent()),l=function(){},g=!1;$(window).resize((function(){g&&(clearTimeout(g),g=!1),g=setTimeout((function(){t.hasClass("follow")&&(t.removeClass("follow"),t.attr("style",""),e&&t.css("right",a),!e&&t.css("left",r),w=t.offset().top),setTimeout((function(){o=t.offset().left,r=o-t.parent().offset().left,s=u(t),a=s-u(t.parent()),d>1275&&"rightEditorStaticBar"===t.attr("id")&&$("#cvOptionsHTML .html").show(),l()}),50),g=!1}),300)}));var y=t.outerHeight(),w=null,C=t.hasClass("margintop")?"margin-top":"top",x=h(t.data("offset-y")),E=!!t.data("trigger-offset-y")&&h(t.data("trigger-offset-y")),_=t.data("preventUnder"),k=t.data("offset-scroll-height");n=!n||x<n?x:n,i=!i||y>i?y:i,l=function(){null!==w&&null!==p||(w=t.offset().top,p=$(document).height());var i=h(t.data("offset-y"));if(i!==x&&(x=i,E=!1!==E&&h(t.data("trigger-offset-y")),n=!n||x<n?x:n),(!_||d>_)&&m>=w-(E||x)){if(m<=p-c){var l=x;if(t.hasClass("follow")||t.addClass("follow"),"top"===C){e&&t.css("right",s),!e&&t.css("left",o),m>w+k&&(l=x+w+k-m);var u=l;if("down"===v){var g=t.data("fixed-scroll")||0;t.height()+(u||0)+50+g>c&&(g-=Math.min(f,t.height()+(u||0)+50-c)),u+=g,t.data("fixed-scroll",g)}else if("up"===v&&parseInt(t.data("fixed-scroll"))<0){var b=Math.abs(f);b=Math.min(0,t.data("fixed-scroll")+b),t.data("fixed-scroll",b),u+=b}t.data("fixed-scroll")&&"neutral"===v||t.css("top",u)}}}else t.hasClass("follow")&&(t.removeClass("follow"),t.attr("style",""),e&&t.css("right",a),!e&&t.css("left",r))},b&&l(),$(window).scroll((function(){l()}))})),b=!0};$(window).scroll((function(){m=$(window).scrollTop(),v=m>g?"down":m<g?"up":"neutral",f=m-g,g=m})),$(document).ready((function(){$('input[name="collect"].disabled').tooltipster({delay:200,theme:"tooltipster-borderless",trigger:"custom",triggerOpen:{click:!0},triggerClose:{click:!0,scroll:!0,tap:!0,mouseleave:!0}}),$('input[name="collect"].disabled').click((function(t){$(this).hasClass("disabled")&&t.preventDefault()}))}));var w=function(t,e){$('input[name="collect"]').removeAttr("disabled"),$('input[name="collect"]').removeAttr("title"),$('input[name="collect"]').removeClass("disabled"),$('input[name="collect"]').hasClass("tooltipstered")&&$('input[name="collect"]').tooltipster("destroy"),$(".help-us .sumary").show();var i=$(t).parent();$("a",i).removeClass("active"),$(t).addClass("active");var n=parseInt(i.data("depth")),o=n+1;$('input[name="chosenGroupLvl'+s+'"]').val(""),$('input[name="chosenGroupLvl'+n+'"]').val(e);for(var s=o;s<=4;s++)$("#subgroup"+s).empty(),$('input[name="chosenGroupLvl'+s+'"]').val("");for(s=n;s<=4;s++)$("#subgroup"+s).removeClass("hoverable");for(s=o+1;s<=4;s++)$("#subgroup"+s).removeClass("visible");n<4&&$(".choose-group").removeClass("active"),requestGET(isco_load_subgroups_URL.replace("%groupId%",e),(function(t){if(t.success){for(var e in t.items){var n=t.items[e],s=$("<a/>");s.attr("href","javascript:;"),s.attr("onclick","chooseAndLoadSubGroup(this, "+n.id+")"),s.html(n.label),$("#subgroup"+o).append(s)}$("#subgroup"+o).addClass("active"),$("#subgroup"+o).addClass("visible"),i.mouseleave((function(){i.hasClass("hoverable")||setTimeout((function(){i.addClass("hoverable")}),50)}))}}));var r=[];$(".choose-group.visible").find("a.active").each((function(){r.push('<span title="'+$(this).text().trim()+'">'+$(this).text()+"</span>")})),r=r.join(" > "),$("#chosenSumary").html(r)},C=function(t){t.success?clearOverlay():handleError(t.reason)},x=function(t,e,i){return $('<div class="advice-popup advice-popup--informations"><div class="advice-popup__title">'+t+'</div><div class="advice-popup__content">'+e+"</div>"+(i||"")+"</div>")},E=function(t,e,i){var n=[],o=$("#cvHTML");o.length||(o=$("#coverLetterHTML"));var s="<ul>";for(var r in t){var a=t[r];if("DISABLED"!=a.type){var l=$("."+a.type);l.addClass("cv-information-line--waggle"),n.push(l),s+="<li>"+intl("cvInformation."+a.type)+"</li>"}}s+="</ul>",setTimeout((function(){n.forEach((function(t){t.removeClass("cv-information-line--waggle")}))}),700);var c=$(".cv-information");c.length||(c=$(".cover-letter-information"));var d=c.first(),u='<div class="advice-popup__footer"><div class="footer-button footer-button--ignore">'+intl("editor.advices.actions.ignore")+'</div><div class="footer-button footer-button--accept">'+intl("editor.advices.actions.accept")+"</div></div>";o.prepend(x(intl("editor.advices.informations.title"),intl("editor.advices.informations.content",{data:s}),u));var h=$(".advice-popup.advice-popup--informations");h.position({my:"left top",at:"right top",of:d,collision:"none"});var p=!1;"scrollBehavior"in document.documentElement.style&&(p={behavior:"smooth",block:"center"}),h.get(0).scrollIntoView&&h.get(0).scrollIntoView(p);var f=function(t){$(".advice-popup.advice-popup--informations").remove()};$(".footer-button.footer-button--ignore",h).tmousedown((function(){$(".advice-popup.advice-popup--informations").remove(),localStorage.setItem("ignore-informations-advices-"+e,1),i?i():window.downloadCoverLetter&&downloadCoverLetter()})),$(".footer-button.footer-button--accept",h).tmousedown(f),$(".advice-popup.advice-popup--informations").tmousedown((function(t){t.stopPropagation()})),onBodyMousedownTriggers.push(f),h.scrollTop()};window.showVariants=e,window.hideVariants=n,window.showObjects=o,window.hideObjects=s,window.setLetterCreated=r,window.setCVCreated=a,window.runTutorial=l,window.windowHeight=c,window.windowWidth=d,window.rightOffiset=u,window.getResponsiveValue=h,window.documentHeight=p,window.currentScrollDiff=f,window.currentScrollTop=m,window.lastScrollTop=g,window.scrollingDirection=v,window.alreadyLoadedStaticsOnce=b,window.loadTheStatics=y,window.chooseAndLoadSubGroup=w,window.collectedUserOccupation=C,window.createAdvicePopup=x,window.warnDefaultInformations=E,t.exports={showVariants:e,hideVariants:n,showObjects:o,hideObjects:s,setLetterCreated:r,setCVCreated:a,runTutorial:l,windowHeight:c,windowWidth:d,rightOffiset:u,getResponsiveValue:h,documentHeight:p,currentScrollDiff:f,currentScrollTop:m,lastScrollTop:g,scrollingDirection:v,alreadyLoadedStaticsOnce:b,loadTheStatics:y,chooseAndLoadSubGroup:w,collectedUserOccupation:C,createAdvicePopup:x,warnDefaultInformations:E}}).call(window)},88314:(t,e,i)=>{(function(){i(82772),i(69600),i(21249),i(74916),i(15306),i(23123);var e={},n=function(){$(".suggestor").hide(),e={}};onBodyMousedownTriggers.push(n);var o=["street_number","route","country","country_short","administrative_area_level_1","administrative_area_level_1_short","administrative_area_level_2","administrative_area_level_2_short","locality","postal_code","point_of_interest","latitude","longitude"],s=function(t,e,i){$(".thx",t).removeClass("hidden");var o=t.closest(".form-input")[0],s=i.replace(/ *\([^)]*\) */g,"");$('input[name="'+e+'"]',o).val(s),$('input[name="'+e+'"]',o).effect("highlight"),$('input[name="'+e+'"]',o).focus(),n()},r=function(t){$(".thx",t).addClass("hidden")},a=function(t,e){return t.indexOf("]")>-1?t.substring(0,t.length-1)+""+e+"]":t+e},l=function(t){var i=$(t);$('*[suggest="true"]',i).each((function(){var t=$(this).attr("suggest-type"),i=$(this).attr("suggest-ln"),l=$(this).attr("suggested-hidden-name"),c=$(this).attr("suggested-hidden-type"),d=$(this).attr("suggested-hidden-initial-value"),u=$(this).attr("suggested-hidden-initial-type-value"),h=$(this),p=h.val();if(h.parent().append('<input type="hidden" name="'+l+'" value="'+d+'" />'),c&&""!==c&&h.parent().append('<input type="hidden" name="'+c+'" value="'+u+'" />'),"canonicalPlace"===t)for(var f in h.parent().append('<input type="hidden" name="'+a(l,"_origin")+'[google_id]" value="'+d+'" />'),o)h.parent().append('<input type="hidden" name="'+a(l,"_origin")+"["+o[f]+']" value="" />');var m=$('<div class="suggestor" style="display:none;"></div>');m.tmousedown((function(t){t.stopPropagation()}));var g=null,v=null,b=function(){g&&(clearTimeout(g),v&&v.abort()),e[t]=!0,p=h.val(),g=setTimeout((function(){v=$.ajax({url:siteurl+"/ajax/cv/suggestion/"+t,method:"POST",dataType:"json",data:{value:p,lang:i,nb:10},success:function(i){var n=i.results;m.empty();var o=$('<a href="javascript:;">'+intl("editor.suggestor.cancel")+"</a>");o.click((function(){r($(this.parentNode.parentNode.parentNode))}));var p=$('<div class="thx hidden"></div>'),f=$("<div></div>");if(f.append(o),p.append(f),m.append(p),m.data("nbResults",n.length),n.length>0){e[t]&&m.show();var g=$('<ul><li><label><input name="'+l+'_tmp" type="radio" value="0" tabindex="-1" data-is-place="'+("canonicalPlace"===t?1:0)+'" checked/> '+intl("editor.cvEditor.nomatch")+"</label></li>"+n.map((function(e){return'<li><label><input tabindex="-1" name="'+l+'_tmp" type="radio" value="'+e.id+'" data-type="'+(e.type||"")+'" data-label="'+e.label+'" data-place-label="'+(e.minified_label?e.minified_label:-1)+'" data-is-place-tool="'+("canonicalPlace"==t?i.placeTool:0)+'" data-is-place="'+("canonicalPlace"==t?1:0)+'" '+("canonicalPlace"==t?'data-place-geocoding="'+encodeURIComponent(JSON.stringify(e.payload))+'" ':"")+(e.id==d||"canonicalPlace"==t&&e.gid==d?"checked":"")+" /> "+e.label+"</label></li>"})).join("")+"</ul>");m.append(g),$('input[name="'+l+'_tmp"]').change((function(){var t=$(this).data("is-place"),e=($(this).data("is-place-tool"),$(this).data("label")),i=$(this).data("type"),n=$(this).val();if(0!=n){if(t){var o=(p=JSON.parse(decodeURIComponent($(this).data("place-geocoding")))).coordinates.split(","),r=$(this).data("place-label");-1!=r&&(e=r),$('input[name="'+a(l,"_origin")+'[latitude]"]').val(o[0]),$('input[name="'+a(l,"_origin")+'[longitude]"]').val(o[1]),$('input[name="'+a(l,"_origin")+'[administrative_area_level_1]"]').val(p.admin1),$('input[name="'+a(l,"_origin")+'[country]"]').val(p.country),$('input[name="'+a(l,"_origin")+'[locality]"]').val(p.city)}else $('input[name="'+l+'"]').val(n),d=n,i&&($('input[name="'+c+'"]').val(i),u=i);s(m,h.attr("name"),e)}else{if(t){var p;o=(p=JSON.parse(decodeURIComponent($(this).data("place-geocoding")))).coordinates.split(",");$('input[name="'+a(l,"_origin")+'[latitude]"]').val(o[0]),$('input[name="'+a(l,"_origin")+'[longitude]"]').val(o[1]),$('input[name="'+a(l,"_origin")+'[administrative_area_level_1]"]').val(p.admin1),$('input[name="'+a(l,"_origin")+'[country]"]').val(p.country),$('input[name="'+a(l,"_origin")+'[locality]"]').val(p.city)}else $('input[name="'+l+'"]').val(0),$('input[name="'+c+'"]').val(""),u="";d=n}}))}else m.hide()}})}),400)};$(this).keyup((function(){b(),r(m)}));var y=!1;$(this).tmousedown((function(t){t.stopPropagation()})),$(this).keydown((function(t){9===t.which&&n()})),$(this).focus((function(){n(),y?m.data("nbResults")>0&&m.show():(h.parent().append(m),b(),y=!0)}))}))},c=function(t,e,i){$.ajax({url:siteurl+"/ajax/getSkillLanguageTests",method:"POST",dataType:"json",data:{ln:t},success:function(t){if(t.success){var n=$(".certifications-select",$("#"+e));if(n.data("initied",1),t.languageTests.length>0)for(var o in n.html('<option value="0">'+intl("editor.cvEditor.editContent.chooseTest")+"</option>"),t.languageTests)n.append('<option value="'+t.languageTests[o].id+'" data-max-score="'+t.languageTests[o].maxScore+'">'+t.languageTests[o].label+"</option>");i&&(t.languageTests.length>0?($(".add-certification",$("#"+e)).show(),d(e)):$(".add-certification",$("#"+e)).hide(),window.onSelectedLanguageSkill&&window.onSelectedLanguageSkill(t.languageTests.length>0),$(".certifications-inputs").html(""))}}})},d=function(t){$(".add-certification a.add",$("#"+t)).show(),$(".add-certification a.cancel",$("#"+t)).hide(),$(".add-certification select",$("#"+t)).hide()},u=function(t){if($(".add-certification a.add",$("#"+t)).hide(),$(".add-certification a.cancel",$("#"+t)).show(),0==$(".certifications-select",$("#"+t)).data("initied")){var e=$('select[name="skillLabel"]',$("#"+t)).val();c(e,t)}$(".add-certification select",$("#"+t)).show()},h=function(t){$(".test-score-"+t).remove()},p=function(t){var e=$(".certifications-inputs"),i=$(".certifications-select option:selected",$("#"+t)),n=i.val(),o=i.text(),s=i.data("max-score");if(n&&!$(".test-score-"+n,$("#"+t)).length){var r=$('<a href="javascript:;" class="delete">x</a>');r.click((function(){h(n)}));var a=$('<div class="test-score test-score-'+n+'"></div>');a.append(r),a.append(o),a.append('<div class="score"><input type="number" step="any" name="testScores['+n+']" min="0" max="'+s+'" /> / '+s+"</div>"),e.append(a)}$(".certifications-select").val(0),d(t)};window.visibleSuggestions=e,window.hideAllSuggestors=n,window.addressComponents=o,window.validateMySuggestion=s,window.cancelMySuggestion=r,window.suffixizeInputName=a,window.bindSuggestor=l,window.chooseSkillLanguage=c,window.cancelTestScore=d,window.addTestScore=u,window.deleteTestScore=h,window.prepareTestScoreForm=p,t.exports={visibleSuggestions:e,hideAllSuggestors:n,addressComponents:o,validateMySuggestion:s,cancelMySuggestion:r,suffixizeInputName:a,bindSuggestor:l,chooseSkillLanguage:c,cancelTestScore:d,addTestScore:u,deleteTestScore:h,prepareTestScoreForm:p}}).call(window)},72887:(t,e,i)=>{(function(){i(21249),i(68309),i(19601),i(41539),i(88674);var e=i(59713);function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?n(Object(o),!0).forEach((function(i){e(t,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var s=function(t,e,i,n){this.orderTypeKey=t||null,this.userData=e;n=n||{};var s=function(t,e){return"/api/v1/services/"+t+"/product/"+e+"/bought"},r=function(t,e){return"/api/v1/services/"+t+"/product/"+e};this.checkPaymentForProduct=function(t,e){return new Promise((function(i,n){requestGET(s(t,e),i)}))},this.setOrderType=function(t){this.orderTypeKey=t},this.openMicroserviceModal=function(t,s){window.dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:n.list},products:[Object.assign({},{id:t.service_product.id,name:i,price:t.service_product.price/100},n)]}}});var r=[Object.assign({},{id:t.service_product.id,name:i,price:t.service_product.price/100,quantity:1},n)];window.dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"EUR",add:{products:r,items:r.map((function(t){return o(o({},t),{},{item_id:t.id,item_name:t.name,item_price:t.price,item_category:t.category,item_list_name:t.list||"Micropayment",quantity:t.quantity})}))}}});var a=e.address,l=e.user;if(t.service_product){var c=t.service_product;new OrderModal({orderTypeKey:this.orderTypeKey||"3",pageData:{productId:c.id},urls:{submitOrder:"/service/order/submit",createOrder:"/service/order",checkOrderStatus:"/service/order/status",cancelOrder:"/service/order/cancel"}},(function(t){return{}}),{classnames:{information:"minh500"},decomposeNameInputs:!1,initialValues:{email:l.email,name:l.name,address:{address1:a&&a.address1||"",city:a&&a.city||"",countryCode:a&&a.countryCode||"",postalCode:a&&a.postalCode||""}},html:{basketSummary:'<div class="basket-payout__information__summary__box">\n        <div class="basket-payout__information__summary__box__thumbnail">\n            '+c.basketThumbnailHTML+'\n        </div>\n        <div class="basket-payout__information__summary__box__content">\n\n            <div class="basket-payout__information__summary__box__content__title">\n                '+c.basketTitle+'\n            </div>\n            <div class="basket-payout__information__summary__box__content__summary">\n                '+c.basketSummary+'\n            </div>\n            <div class="basket-payout__information__summary__box__content__total">\n                '+c.basketPrice+"\n            </div>\n\n        </div>\n    </div>"+(c.basketTagline?'    <div class="basket-payout__information__summary__box mb0">\n        <div class="basket-payout__information__summary__box__content-full grey-text">\n            '+c.basketTagline+"\n        </div>\n    </div>":""),customFieldsBefore:"",termsWording:c.termsWording,customFieldsAfter:"",buyWording:c.buyWording}},(function(t){}),(function(t,e,i,n){}),{title:c.successWording.title,text:c.successWording.text,btnLabel:c.successWording.confirmButton},(function(e,s){var r=[Object.assign({},{id:t.service_product.id,name:i,price:t.service_product.price/100,quantity:1},n)];dataLayer.push({event:"purchase",ecommerce:{purchase:{currency:"EUR",actionField:{id:s.getOrder().getId(),affiliation:"CVDesignR",revenue:s.getOrder().getTotal()/100,tax:s.getOrder().getTotal()/100*.2},products:r,items:r.map((function(t){return o(o({},t),{},{item_id:t.id,item_name:t.name,item_price:t.price,item_category:t.category,item_list_name:t.list||"Micropayment",quantity:t.quantity})}))}}})}),(function(){s&&s()}),null,(function(){window.dataLayer.push({event:"removeFromCart",ecommerce:{remove:{products:[Object.assign({},{id:t.service_product.id,name:i,price:t.service_product.price/100,quantity:1},n)]}}})})).open()}},this.showPaymentModal=function(t,e,i){requestGET(r(t,e),function(t){this.openMicroserviceModal(t,i)}.bind(this))}};window._defineProperty=e,window.ownKeys=n,window._objectSpread=o,window.MicroPayment=s,t.exports={_defineProperty:e,ownKeys:n,_objectSpread:o,MicroPayment:s}}).call(window)},25235:()=>{},93634:()=>{},68527:()=>{},87615:()=>{},91298:()=>{},19498:()=>{},50709:()=>{},57098:()=>{},44035:()=>{},37368:()=>{},17659:()=>{},5827:()=>{},71570:()=>{},65236:()=>{}}]);